{"version":3,"sources":["../src/index.ts","../src/environment.ts","../src/actions/actionGetAvailableGpus.ts","../src/error/base.ts","../src/actions/actionGetCurrentBalance.ts","../src/actions/actionGetGpuStatus.ts","../src/actions/actionGetSpendHistory.ts","../src/actions/actionRentCompute.ts","../src/utils/parseGpuRent.ts","../src/actions/actionTerminateCompute.ts","../src/utils/parseGpuInstance.ts"],"sourcesContent":["import { Plugin } from \"@elizaos/core\";\r\nimport chalk from 'chalk';\r\nimport Table from 'cli-table3';\r\nimport ora from 'ora';\r\nimport { getConfig } from \"./environment\";\r\nimport { actionGetAvailableGpus } from \"./actions/actionGetAvailableGpus\";\r\nimport { actionGetCurrentBalance } from \"./actions/actionGetCurrentBalance\";\r\nimport { actionGetGpuStatus } from \"./actions/actionGetGpuStatus\";\r\nimport { actionGetSpendHistory } from \"./actions/actionGetSpendHistory\";\r\nimport { actionRentCompute } from \"./actions/actionRentCompute\";\r\nimport { actionTerminateCompute } from \"./actions/actionTerminateCompute\";\r\n\r\n\r\n// Start the loader\r\nconst spinner = ora({\r\n    text: chalk.cyan('Initializing HYPERBOLIC Plugin...'),\r\n    spinner: 'dots12',\r\n    color: 'cyan'\r\n  }).start();\r\n\r\nconst actions = [\r\n    actionGetAvailableGpus,\r\n    actionGetCurrentBalance,\r\n    actionGetGpuStatus,\r\n    actionGetSpendHistory,\r\n    actionRentCompute,\r\n    actionTerminateCompute\r\n];\r\n\r\n// Get NVIDIA_NIM_SPASH from config\r\nconst HYPERBOLIC_SPASH = getConfig().HYPERBOLIC_SPASH;\r\n\r\n// Initial banner\r\n// Only show splash screen if NVIDIA_NIM_SPASH is true\r\nif (HYPERBOLIC_SPASH) {\r\n    // Initial banner with chalk styling\r\n    console.log(`\\n${chalk.cyan('┌────────────────────────────────────────┐')}`);\r\n    console.log(chalk.cyan('│') + chalk.yellow.bold('          HYPERBOLIC PLUGIN             ') + chalk.cyan(' │'));\r\n    console.log(chalk.cyan('├────────────────────────────────────────┤'));\r\n    console.log(chalk.cyan('│') + chalk.white('  Initializing HYPERBOLIC Services...    ') + chalk.cyan('│'));\r\n    console.log(chalk.cyan('│') + chalk.white('  Version: 1.0.0                        ') + chalk.cyan('│'));\r\n    console.log(chalk.cyan('└────────────────────────────────────────┘'));\r\n\r\n    // Stop the loader\r\n    spinner.succeed(chalk.green('HYPERBOLIC Plugin initialized successfully!'));\r\n\r\n    // Create a beautiful table for actions\r\n    const actionTable = new Table({\r\n      head: [\r\n        chalk.cyan('Action'),\r\n        chalk.cyan('H'),\r\n        chalk.cyan('V'),\r\n        chalk.cyan('E'),\r\n        chalk.cyan('Similes')\r\n      ],\r\n      style: {\r\n        head: [],\r\n        border: ['cyan']\r\n      }\r\n    });\r\n\r\n    // Format and add action information\r\n    for (const action of actions) {\r\n        actionTable.push([\r\n            chalk.white(action.name),\r\n            typeof action.handler === 'function' ? chalk.green('✓') : chalk.red('✗'),\r\n            typeof action.validate === 'function' ? chalk.green('✓') : chalk.red('✗'),\r\n            action.examples?.length > 0 ? chalk.green('✓') : chalk.red('✗'),\r\n            chalk.gray(action.similes?.join(', ') || 'none')\r\n        ]);\r\n    }\r\n\r\n    // Display the action table\r\n    console.log(`\\n${actionTable.toString()}`);\r\n\r\n    // Plugin status with a nice table\r\n    const statusTable = new Table({\r\n      style: {\r\n        border: ['cyan']\r\n      }\r\n    });\r\n\r\n    statusTable.push(\r\n      [chalk.cyan('Plugin Status')],\r\n      [chalk.white('Name    : ') + chalk.yellow('hyperbolic-plugin')],\r\n      [chalk.white('Actions : ') + chalk.green(actions.length.toString())],\r\n      [chalk.white('Status  : ') + chalk.green('Loaded & Ready')]\r\n    );\r\n\r\n    console.log(`\\n${statusTable.toString()}\\n`);\r\n  } else {\r\n    // Stop the loader silently if splash is disabled\r\n    spinner.stop();\r\n  }\r\n\r\n  const hyperbolicPlugin: Plugin = {\r\n    name: \"hyperbolic-plugin\",\r\n    description: \"HYPERBOLIC Plugin for DePin\",\r\n    actions: actions,\r\n    evaluators: []\r\n  };\r\n\r\nexport { hyperbolicPlugin };\r\nexport default hyperbolicPlugin;\r\n","import { IAgentRuntime } from \"@elizaos/core\";\r\nimport { z } from \"zod\";\r\n\r\n// Environment Variables\r\nlet ENV= \"production\";\r\n\r\n// Hyperbolic API Configuration\r\nexport const HYPERBOLIC_ENDPOINTS = {\r\n    production: {\r\n        marketplace: \"https://api.hyperbolic.xyz/v1/marketplace\",\r\n        balance: \"https://api.hyperbolic.xyz/billing/get_current_balance\",\r\n        history: \"https://api.hyperbolic.xyz/billing/purchase_history\",\r\n        instances: {\r\n            base: \"https://api.hyperbolic.xyz/v1/marketplace/instances\",\r\n            history: \"https://api.hyperbolic.xyz/v1/marketplace/instances/history\",\r\n            create: \"https://api.hyperbolic.xyz/v1/marketplace/instances/create\",\r\n            terminate: \"https://api.hyperbolic.xyz/v1/marketplace/instances/terminate\",\r\n            gpu_status: \"https://api.hyperbolic.xyz/v1/marketplace/instances/{id}/status\"\r\n        }\r\n    },\r\n    staging: {\r\n        marketplace: process.env.HYPERBOLIC_STAGING_MARKETPLACE || \"https://api-staging.hyperbolic.xyz/v1/marketplace\",\r\n        balance: process.env.HYPERBOLIC_STAGING_BALANCE || \"https://api-staging.hyperbolic.xyz/billing/get_current_balance\",\r\n        history: process.env.HYPERBOLIC_STAGING_HISTORY || \"https://api-staging.hyperbolic.xyz/billing/purchase_history\",\r\n        instances: {\r\n            base: process.env.HYPERBOLIC_STAGING_INSTANCES || \"https://api-staging.hyperbolic.xyz/v1/marketplace/instances\",\r\n            history: process.env.HYPERBOLIC_STAGING_INSTANCES_HISTORY || \"https://api-staging.hyperbolic.xyz/v1/marketplace/instances/history\",\r\n            create: process.env.HYPERBOLIC_STAGING_INSTANCES_CREATE || \"https://api-staging.hyperbolic.xyz/v1/marketplace/instances/create\",\r\n            terminate: process.env.HYPERBOLIC_STAGING_INSTANCES_TERMINATE || \"https://api-staging.hyperbolic.xyz/v1/marketplace/instances/terminate\",\r\n            gpu_status: \"https://api.hyperbolic.xyz/v1/marketplace/instances/{id}/status\"\r\n        }\r\n    }\r\n} as const;\r\n\r\nexport const hyperbolicEnvSchema = z.object({\r\n    // API Configuration\r\n    HYPERBOLIC_ENV: z.enum([\"production\", \"staging\"]).default(\"production\"),\r\n    HYPERBOLIC_API_KEY: z.string().min(1, \"HYPERBOLIC_API_KEY is required\"),\r\n\r\n    // Request Configuration\r\n    HYPERBOLIC_MAX_RETRIES: z.string().transform(Number).default(\"3\"),\r\n    HYPERBOLIC_RETRY_DELAY: z.string().transform(Number).default(\"1000\"),\r\n    HYPERBOLIC_TIMEOUT: z.string().transform(Number).default(\"5000\"),\r\n\r\n    // Logging Configuration\r\n    HYPERBOLIC_GRANULAR_LOG: z.boolean().default(true),\r\n    HYPERBOLIC_LOG_LEVEL: z.enum([\"error\", \"warn\", \"info\", \"debug\"]).default(\"info\"),\r\n\r\n    // SSH Configuration\r\n    HYPERBOLIC_SSH_PRIVATE_KEY_PATH: z.string().optional(),\r\n\r\n    // Runtime Configuration\r\n    HYPERBOLIC_RUNTIME_CHECK_MODE: z.boolean().default(false),\r\n    HYPERBOLIC_SPASH: z.boolean().default(false)\r\n});\r\n\r\nexport type HyperbolicConfig = z.infer<typeof hyperbolicEnvSchema>;\r\n\r\nexport function getConfig(\r\n    env: string | undefined | null = ENV ||\r\n        process.env.HYPERBOLIC_ENV\r\n): HyperbolicConfig {\r\n    ENV = env || \"production\";\r\n\r\n    return {\r\n        HYPERBOLIC_ENV: (env as \"production\" | \"staging\") || \"production\",\r\n        HYPERBOLIC_API_KEY: process.env.HYPERBOLIC_API_KEY || \"\",\r\n        HYPERBOLIC_MAX_RETRIES: Number(process.env.HYPERBOLIC_MAX_RETRIES || \"3\"),\r\n        HYPERBOLIC_RETRY_DELAY: Number(process.env.HYPERBOLIC_RETRY_DELAY || \"1000\"),\r\n        HYPERBOLIC_TIMEOUT: Number(process.env.HYPERBOLIC_TIMEOUT || \"5000\"),\r\n        HYPERBOLIC_GRANULAR_LOG: process.env.HYPERBOLIC_GRANULAR_LOG === \"true\" || false,\r\n        HYPERBOLIC_LOG_LEVEL: (process.env.HYPERBOLIC_LOG_LEVEL as \"error\" | \"warn\" | \"info\" | \"debug\") || \"info\",\r\n        HYPERBOLIC_SSH_PRIVATE_KEY_PATH: process.env.SSH_PRIVATE_KEY_PATH,\r\n        HYPERBOLIC_RUNTIME_CHECK_MODE: process.env.RUNTIME_CHECK_MODE === \"true\" || false,\r\n        HYPERBOLIC_SPASH: process.env.HYPERBOLIC_SPASH === \"true\" || false\r\n    };\r\n}\r\n\r\nexport async function validateHyperbolicConfig(\r\n    runtime: IAgentRuntime\r\n): Promise<HyperbolicConfig> {\r\n    try {\r\n        const envConfig = getConfig(\r\n            runtime.getSetting(\"HYPERBOLIC_ENV\") ?? undefined\r\n        );\r\n\r\n        const config = {\r\n            HYPERBOLIC_ENV: process.env.HYPERBOLIC_ENV || runtime.getSetting(\"HYPERBOLIC_ENV\") || envConfig.HYPERBOLIC_ENV,\r\n            HYPERBOLIC_API_KEY: process.env.HYPERBOLIC_API_KEY || runtime.getSetting(\"HYPERBOLIC_API_KEY\") || envConfig.HYPERBOLIC_API_KEY,\r\n            HYPERBOLIC_MAX_RETRIES: process.env.HYPERBOLIC_MAX_RETRIES || runtime.getSetting(\"HYPERBOLIC_MAX_RETRIES\") || envConfig.HYPERBOLIC_MAX_RETRIES.toString(),\r\n            HYPERBOLIC_RETRY_DELAY: process.env.HYPERBOLIC_RETRY_DELAY || runtime.getSetting(\"HYPERBOLIC_RETRY_DELAY\") || envConfig.HYPERBOLIC_RETRY_DELAY.toString(),\r\n            HYPERBOLIC_TIMEOUT: process.env.HYPERBOLIC_TIMEOUT || runtime.getSetting(\"HYPERBOLIC_TIMEOUT\") || envConfig.HYPERBOLIC_TIMEOUT.toString(),\r\n            HYPERBOLIC_GRANULAR_LOG: process.env.HYPERBOLIC_GRANULAR_LOG === \"true\" || false,\r\n            HYPERBOLIC_LOG_LEVEL: process.env.HYPERBOLIC_LOG_LEVEL || runtime.getSetting(\"HYPERBOLIC_LOG_LEVEL\") || envConfig.HYPERBOLIC_LOG_LEVEL,\r\n            HYPERBOLIC_SSH_PRIVATE_KEY_PATH: process.env.SSH_PRIVATE_KEY_PATH || runtime.getSetting(\"SSH_PRIVATE_KEY_PATH\"),\r\n            HYPERBOLIC_RUNTIME_CHECK_MODE: process.env.RUNTIME_CHECK_MODE === \"true\" || false,\r\n            HYPERBOLIC_SPASH: process.env.HYPERBOLIC_SPASH === \"true\" || false\r\n        };\r\n\r\n        return hyperbolicEnvSchema.parse(config);\r\n    } catch (error) {\r\n        const errorMessage = error instanceof Error ? error.message : String(error);\r\n        throw new Error(`Failed to validate Hyperbolic configuration: ${errorMessage}`);\r\n    }\r\n}\r\n\r\n// Export endpoints configuration\r\nexport const getEndpoints = (env: string = ENV) =>\r\n    HYPERBOLIC_ENDPOINTS[env as keyof typeof HYPERBOLIC_ENDPOINTS];\r\n\r\n// Helper to get full endpoint URL\r\nexport function getEndpointUrl(endpoint: string, env: string = ENV): string {\r\n    const endpoints = getEndpoints(env);\r\n    const parts = endpoint.split('.');\r\n    let current: Record<string, unknown> = endpoints;\r\n\r\n    for (const part of parts) {\r\n        if (current[part] === undefined) {\r\n            throw new Error(`Invalid endpoint path: ${endpoint}`);\r\n        }\r\n        current = current[part] as Record<string, unknown>;\r\n    }\r\n\r\n    if (typeof current !== 'string') {\r\n        throw new Error(`Invalid endpoint path: ${endpoint}`);\r\n    }\r\n\r\n    return current;\r\n}","import { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\nimport axios from 'axios';\r\nimport { getConfig, validateHyperbolicConfig, HYPERBOLIC_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\n\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.HYPERBOLIC_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.info(`[GetAvailableGpus] ${message}`, data);\r\n        console.log(`[GetAvailableGpus] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetAvailableGpusContent extends Content {\r\n    text: string;\r\n    filters?: Record<string, unknown>;\r\n    success?: boolean;\r\n    data?: {\r\n        gpus: Array<{\r\n            model: string;\r\n            memory: number;\r\n            price: number;\r\n            available: number;\r\n            total: number;\r\n            location: string;\r\n            node_id: string;\r\n            cluster_name: string;\r\n            compute_power: number;\r\n            clock_speed: number;\r\n            storage_capacity: number;\r\n            ram_capacity: number;\r\n            cpu_cores: number;\r\n            status: string;\r\n        }>;\r\n        error?: string;\r\n    };\r\n}\r\n\r\n// interface GpuInfo {\r\n//     model: string;\r\n//     memory: number;\r\n//     compute_capability: string;\r\n//     price_per_hour: number;\r\n//     price_per_month: number;\r\n//     availability: boolean;\r\n//     location: string;\r\n//     performance_score: number;\r\n// }\r\n\r\nexport const actionGetAvailableGpus: Action = {\r\n    name: \"GET_HB_AVAILABLE_GPUS\",\r\n    similes: [\"LIST_GPUS\", \"SHOW_GPUS\", \"AVAILABLE_GPUS\", \"FIND_GPUS\"],\r\n    description: \"Get all available GPU machines on the Hyperbolic platform with their specifications and pricing.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me available GPUs on Hyperbolic\",\r\n                filters: {}\r\n            } as GetAvailableGpusContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the available GPUs on the Hyperbolic platform:\\n\\nGPU Model: RTX 4090\\nMemory: 24GB\\nCompute Capability: 8.9\\nPricing: $2.5/hour ($1800/month)\\nLocation: US-East\\nStatus: ✓ Available\\nPerformance Score: 95/100\",\r\n                success: true,\r\n                data: {\r\n                    gpus: [{\r\n                        model: \"RTX 4090\",\r\n                        memory: 24,\r\n                        price: 2.5,\r\n                        available: 8,\r\n                        total: 8,\r\n                        location: \"US-East\"\r\n                    }]\r\n                }\r\n            } as GetAvailableGpusContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_HB_AVAILABLE_GPUS\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_HB_AVAILABLE_GPUS action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetAvailableGpusContent;\r\n            if (content.filters && typeof content.filters !== 'object') {\r\n                throw new ValidationError(\"Invalid filters format - must be an object\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_HB_AVAILABLE_GPUS action\");\r\n            // ------------------------------------------------------------------------------------------------\r\n            // Core GPU availability check logic\r\n            // ------------------------------------------------------------------------------------------------\r\n\r\n        try {\r\n            const config = await validateHyperbolicConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasApiKey: !!config.HYPERBOLIC_API_KEY,\r\n                env: config.HYPERBOLIC_ENV\r\n            });\r\n\r\n            const apiKey = config.HYPERBOLIC_API_KEY;\r\n            if (!apiKey) {\r\n                throw new ConfigurationError(\"HYPERBOLIC_API_KEY not found in environment variables\");\r\n            }\r\n\r\n            const content = message.content as GetAvailableGpusContent;\r\n            logGranular(\"Processing request with filters\", { filters: content.filters });\r\n\r\n            try {\r\n                logGranular(\"Making request to Hyperbolic marketplace API\");\r\n                const response = await axios.post(\r\n                    HYPERBOLIC_ENDPOINTS[config.HYPERBOLIC_ENV].marketplace,\r\n                    { filters: content.filters || {} },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            'Authorization': `Bearer ${apiKey}`\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from API\", {\r\n                    statusCode: response.status,\r\n                    dataLength: response.data?.instances?.length\r\n                });\r\n\r\n                // Process GPU information from response\r\n                const gpuMap = new Map<string, {\r\n                    model: string;\r\n                    memory: number;\r\n                    price: number;\r\n                    available: number;\r\n                    total: number;\r\n                    location: string;\r\n                    node_id: string;\r\n                    cluster_name: string;\r\n                    compute_power: number;\r\n                    clock_speed: number;\r\n                    storage_capacity: number;\r\n                    ram_capacity: number;\r\n                    cpu_cores: number;\r\n                    status: string;\r\n                }>();\r\n\r\n                for (const instance of response.data.instances) {\r\n                    if (instance.status === \"node_ready\") {\r\n                        const gpu = instance.hardware.gpus[0];\r\n                        const gpuModel = gpu.model.replace(\"NVIDIA-\", \"\");\r\n                        const memory = Math.round(gpu.ram / 1024); // Convert to GB\r\n                        const price = instance.pricing.price.amount / 100; // Convert to actual dollars\r\n                        const available = instance.gpus_total - instance.gpus_reserved;\r\n                        const total = instance.gpus_total;\r\n                        const location = instance.location.region;\r\n\r\n                        // Get additional hardware details\r\n                        const storage = instance.hardware.storage[0]?.capacity || 0;\r\n                        const ram = instance.hardware.ram[0]?.capacity || 0;\r\n                        const cpuCores = instance.hardware.cpus[0]?.virtual_cores || 0;\r\n\r\n                        // Create unique key based on model, price, and cluster\r\n                        const key = `${gpuModel}-${price}-${instance.cluster_name}`;\r\n\r\n                        if (!gpuMap.has(key)) {\r\n                            gpuMap.set(key, {\r\n                                model: gpuModel,\r\n                                memory,\r\n                                price,\r\n                                available,\r\n                                total,\r\n                                location,\r\n                                node_id: instance.id,\r\n                                cluster_name: instance.cluster_name,\r\n                                compute_power: gpu.compute_power || 0,\r\n                                clock_speed: gpu.clock_speed || 0,\r\n                                storage_capacity: storage,\r\n                                ram_capacity: ram,\r\n                                cpu_cores: cpuCores,\r\n                                status: instance.status\r\n                            });\r\n                        } else {\r\n                            const existing = gpuMap.get(key);\r\n                            if (existing) {\r\n                                existing.available += available;\r\n                                existing.total += total;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                const gpus = Array.from(gpuMap.values());\r\n\r\n                // Sort GPUs by price (descending) and availability\r\n                gpus.sort((a, b) => b.price - a.price || b.available - a.available);\r\n\r\n                // Format response text with more details\r\n                const formattedText = `Available GPU Types:\\n\\n${gpus\r\n                    .map(gpu => {\r\n                        const monthlyPrice = Math.round(gpu.price * 24 * 30);\r\n                        const storageGB = Math.round(gpu.storage_capacity / 1024);\r\n                        const ramGB = Math.round(gpu.ram_capacity / 1024);\r\n\r\n                        return `${gpu.model} (${gpu.memory}GB):\r\n- Price: $${gpu.price.toFixed(2)}/hour ($${monthlyPrice}/month)\r\n- Available: ${gpu.available}/${gpu.total} units\r\n- Location: ${gpu.location}\r\n- Node ID: ${gpu.node_id}\r\n- Cluster: ${gpu.cluster_name}\r\n- Hardware Specs:\r\n  • CPU: ${gpu.cpu_cores} virtual cores\r\n  • RAM: ${ramGB}GB\r\n  • Storage: ${storageGB}GB\r\n  • GPU Clock: ${gpu.clock_speed}MHz\r\n  • Compute Power: ${gpu.compute_power} TFLOPS\r\n- Status: ${gpu.status}\r\n\r\nTo rent this GPU, use:\r\n  • Node ID: ${gpu.node_id}\r\n  • Cluster Name: ${gpu.cluster_name}\r\n`;\r\n                    })\r\n                    .join(\"\\n\")}\r\n\r\n                Note: Use the Node ID and Cluster Name when creating an instance. These are the unique identifiers required for the rental process.`;\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            gpus: gpus\r\n                        }\r\n                    } as GetAvailableGpusContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch GPU data: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch GPU data\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting available GPUs: ${errorMessage}`,\r\n                    success: false,\r\n                    data: {\r\n                        gpus: [],\r\n                        error: errorMessage\r\n                    }\r\n                } as GetAvailableGpusContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_HB_AVAILABLE_GPUS action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetAvailableGpus;\r\n","export class HyperbolicError extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'HyperbolicError';\r\n    Object.setPrototypeOf(this, HyperbolicError.prototype);\r\n  }\r\n}\r\n\r\nexport class ConfigurationError extends HyperbolicError {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'ConfigurationError';\r\n    Object.setPrototypeOf(this, ConfigurationError.prototype);\r\n  }\r\n}\r\n\r\nexport class APIError extends HyperbolicError {\r\n  constructor(message: string, public statusCode?: number) {\r\n    super(message);\r\n    this.name = 'APIError';\r\n    Object.setPrototypeOf(this, APIError.prototype);\r\n  }\r\n}\r\n\r\nexport class ValidationError extends HyperbolicError {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'ValidationError';\r\n    Object.setPrototypeOf(this, ValidationError.prototype);\r\n  }\r\n}\r\n\r\nexport class SSHError extends HyperbolicError {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'SSHError';\r\n    Object.setPrototypeOf(this, SSHError.prototype);\r\n  }\r\n}\r\n\r\nexport class GPUError extends HyperbolicError {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'GPUError';\r\n    Object.setPrototypeOf(this, GPUError.prototype);\r\n  }\r\n}\r\n","import { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\nimport axios from 'axios';\r\nimport { Decimal } from 'decimal.js';\r\nimport { getConfig, validateHyperbolicConfig, HYPERBOLIC_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\n\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.HYPERBOLIC_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.info(`[GetCurrentBalance] ${message}`, data);\r\n        console.log(`[GetCurrentBalance] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetCurrentBalanceContent extends Content {\r\n    text: string;\r\n    currency?: string;\r\n    success?: boolean;\r\n    data?: {\r\n        balances?: {\r\n            [key: string]: string;\r\n        };\r\n        error?: string;\r\n    };\r\n}\r\n\r\nexport const actionGetCurrentBalance: Action = {\r\n    name: \"GET_HB_CURRENT_BALANCE\",\r\n    similes: [\"CHECK_BALANCE\", \"SHOW_BALANCE\", \"VIEW_BALANCE\", \"BALANCE_CHECK\"],\r\n    description: \"Get the current balance of your Hyperbolic account in USD and crypto currencies.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show my current balance on Hyperbolic\"\r\n            } as GetCurrentBalanceContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Your current balances are:\\nUSD: $1,000.00\\nETH: 0.5\\nBTC: 0.01\",\r\n                success: true,\r\n                data: {\r\n                    balances: {\r\n                        USD: \"1000.00\",\r\n                        ETH: \"0.5\",\r\n                        BTC: \"0.01\"\r\n                    }\r\n                }\r\n            } as GetCurrentBalanceContent\r\n        } as ActionExample\r\n    ], [\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Get my ETH balance\",\r\n                currency: \"ETH\"\r\n            } as GetCurrentBalanceContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Your ETH balance is: 0.5 ETH\",\r\n                success: true,\r\n                data: {\r\n                    balances: {\r\n                        ETH: \"0.5\"\r\n                    }\r\n                }\r\n            } as GetCurrentBalanceContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_CURRENT_BALANCE\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_CURRENT_BALANCE action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetCurrentBalanceContent;\r\n\r\n            if (content.currency && typeof content.currency !== 'string') {\r\n                throw new ValidationError(\"Currency must be a string\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_CURRENT_BALANCE action\");\r\n            // ------------------------------------------------------------------------------------------------\r\n            // Core balance check logic\r\n            // ------------------------------------------------------------------------------------------------\r\n        try {\r\n            const config = await validateHyperbolicConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasApiKey: !!config.HYPERBOLIC_API_KEY,\r\n                env: config.HYPERBOLIC_ENV\r\n            });\r\n\r\n            const apiKey = config.HYPERBOLIC_API_KEY;\r\n            if (!apiKey) {\r\n                throw new ConfigurationError(\"HYPERBOLIC_API_KEY not found in environment variables\");\r\n            }\r\n\r\n            const content = message.content as GetCurrentBalanceContent;\r\n            logGranular(\"Processing request\", { currency: content.currency });\r\n\r\n\r\n            try {\r\n                const response = await axios.get(\r\n                    HYPERBOLIC_ENDPOINTS[config.HYPERBOLIC_ENV].balance,\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            Authorization: `Bearer ${apiKey}`\r\n                        },\r\n                        params: content.currency ? { currency: content.currency } : undefined\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from API\", {\r\n                    statusCode: response.status,\r\n                    dataLength: Object.keys(response.data).length\r\n                });\r\n\r\n                // Format balances using Decimal.js for precision\r\n                const balances: { [key: string]: string } = {};\r\n                for (const [key, value] of Object.entries(response.data)) {\r\n                    if (typeof value === 'number') {\r\n                        balances[key] = new Decimal(value).dividedBy(100).toFixed(2);\r\n                    }\r\n                }\r\n\r\n                // Format text response\r\n                const formattedText = Object.entries(balances)\r\n                    .map(([currency, amount]) => `${currency}: ${amount}`)\r\n                    .join('\\n');\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: `Your current balances are:\\n${formattedText}`,\r\n                        success: true,\r\n                        data: {\r\n                            balances\r\n                        }\r\n                    } as GetCurrentBalanceContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch balance data: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch balance data\");\r\n            }\r\n            // ------------------------------------------------------------------------------------------------\r\n            // End core logic\r\n            // ------------------------------------------------------------------------------------------------\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting current balance: ${errorMessage}`,\r\n                    success: false,\r\n                    data: {\r\n                        error: errorMessage\r\n                    }\r\n                } as GetCurrentBalanceContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_CURRENT_BALANCE action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetCurrentBalance;\r\n","import { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\nimport axios from 'axios';\r\nimport { getConfig, validateHyperbolicConfig, HYPERBOLIC_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\n\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.HYPERBOLIC_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.info(`[GetGpuStatus] ${message}`, data);\r\n        console.log(`[GetGpuStatus] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetGpuStatusContent extends Content {\r\n    text: string;\r\n    instanceId?: string;  // Make instanceId optional since we'll list all instances\r\n    success?: boolean;\r\n    data?: {\r\n        instances?: Array<{\r\n            id: string;\r\n            start: string;\r\n            sshCommand: string;\r\n            instance: {\r\n                status: string;\r\n                hardware: {\r\n                    gpus: Array<{\r\n                        model: string;\r\n                    }>;\r\n                };\r\n                pricing: {\r\n                    price: {\r\n                        amount: number;\r\n                    };\r\n                };\r\n            };\r\n        }>;\r\n        error?: string;\r\n    };\r\n}\r\n\r\nexport const actionGetGpuStatus: Action = {\r\n    name: \"GET_HB_GPU_STATUS\",\r\n    similes: [\"CHECK_GPU\", \"GPU_STATUS\", \"INSTANCE_STATUS\", \"CHECK_INSTANCE\", \"LIST_INSTANCES\"],\r\n    description: \"List all GPU instances or get detailed status information about a specific GPU instance.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Check status of all my GPU instances on Hyperbolic\",\r\n            } as GetGpuStatusContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"GPU Instance Status:\\nState: Running\\nUptime: 2.5 hours\\nGPU Utilization: 85%\\nMemory Usage: 75%\\nTemperature: 65°C\\nPower Usage: 250W\\n\\nRunning Processes:\\n- PyTorch Training (PID: 1234): 70% GPU, 8GB Memory\\n- TensorFlow Inference (PID: 5678): 15% GPU, 4GB Memory\",\r\n                instanceId: \"abc123\",\r\n                success: true,\r\n                data: {\r\n                    status: {\r\n                        state: \"running\",\r\n                        uptime: 9000,\r\n                        gpu_utilization: 85,\r\n                        memory_utilization: 75,\r\n                        temperature: 65,\r\n                        power_usage: 250,\r\n                        processes: [\r\n                            {\r\n                                pid: 1234,\r\n                                name: \"PyTorch Training\",\r\n                                memory_usage: 8192,\r\n                                gpu_usage: 70\r\n                            },\r\n                            {\r\n                                pid: 5678,\r\n                                name: \"TensorFlow Inference\",\r\n                                memory_usage: 4096,\r\n                                gpu_usage: 15\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            } as GetGpuStatusContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_HB_GPU_STATUS\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_HB_GPU_STATUS action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetGpuStatusContent;\r\n            // instanceId is optional now - if provided, it must be a string\r\n            if (content.instanceId && typeof content.instanceId !== 'string') {\r\n                throw new ValidationError(\"If provided, Instance ID must be a string\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_HB_GPU_STATUS action\");\r\n            // ------------------------------------------------------------------------------------------------\r\n            // Core GPU status check logic\r\n            // ------------------------------------------------------------------------------------------------\r\n        try {\r\n            const config = await validateHyperbolicConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasApiKey: !!config.HYPERBOLIC_API_KEY,\r\n                env: config.HYPERBOLIC_ENV\r\n            });\r\n\r\n            const apiKey = config.HYPERBOLIC_API_KEY;\r\n            if (!apiKey) {\r\n                throw new ConfigurationError(\"HYPERBOLIC_API_KEY not found in environment variables\");\r\n            }\r\n\r\n            const content = message.content as GetGpuStatusContent;\r\n            logGranular(\"Processing request\", { instanceId: content.instanceId });\r\n\r\n            try {\r\n                const response = await axios.get(\r\n                    HYPERBOLIC_ENDPOINTS[config.HYPERBOLIC_ENV].instances.base,\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            Authorization: `Bearer ${apiKey}`\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from API\", {\r\n                    statusCode: response.status\r\n                });\r\n\r\n                const instances = response.data.instances || [];\r\n                const formattedText = instances.length > 0\r\n                    ? `Your GPU Instances:\\n\\n${instances.map((instance: {\r\n                        id: string;\r\n                        instance: {\r\n                            status: string;\r\n                            hardware: {\r\n                                gpus: Array<{ model: string }>;\r\n                            };\r\n                            pricing: {\r\n                                price: { amount: number };\r\n                            };\r\n                        };\r\n                        sshCommand: string;\r\n                    }) =>\r\n                        `Instance ID: ${instance.id}\\n` +\r\n                        `Status: ${instance.instance.status}\\n` +\r\n                        `SSH Access: ${instance.sshCommand}\\n` +\r\n                        `GPU: ${instance.instance.hardware.gpus[0].model}\\n` +\r\n                        `Price: $${instance.instance.pricing.price.amount}/hour`\r\n                    ).join('\\n-------------------\\n\\n')}`\r\n                    : 'No active GPU instances found.';\r\n\r\n                logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n\r\n                if (callback) {\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            instances: response.data.instances\r\n                        }\r\n                    } as GetGpuStatusContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    if (error.response?.status === 404) {\r\n                        throw new APIError(\r\n                            `Instance ${content.instanceId} not found or GPU status is not available. Please verify the instance ID and try again.`,\r\n                            404\r\n                        );\r\n                    }\r\n                    throw new APIError(\r\n                        `Failed to fetch GPU status: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch GPU status\");\r\n            }\r\n            // ------------------------------------------------------------------------------------------------\r\n            // End core logic\r\n            // ------------------------------------------------------------------------------------------------\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting GPU status: ${errorMessage}`,\r\n                    instanceId: (message.content as GetGpuStatusContent).instanceId,\r\n                    success: false,\r\n                    data: {\r\n                        error: errorMessage\r\n                    }\r\n                } as GetGpuStatusContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_HB_GPU_STATUS action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetGpuStatus;\r\n","import { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\nimport axios from 'axios';\r\nimport { getConfig, validateHyperbolicConfig, HYPERBOLIC_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { Decimal } from 'decimal.js';\r\n\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.HYPERBOLIC_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.info(`[GetSpendHistory] ${message}`, data);\r\n        console.log(`[GetSpendHistory] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface SpendHistoryEntry {\r\n    timestamp: string;\r\n    amount: number;\r\n    currency: string;\r\n    description: string;\r\n    instanceId?: string;\r\n}\r\n\r\ninterface GetSpendHistoryContent extends Content {\r\n    text: string;\r\n    startDate?: string;\r\n    endDate?: string;\r\n    currency?: string;\r\n    success?: boolean;\r\n    data?: {\r\n        history?: SpendHistoryEntry[];\r\n        totalSpend?: number;\r\n        error?: string;\r\n    };\r\n}\r\n\r\nexport const actionGetSpendHistory: Action = {\r\n    name: \"GET_HB_SPEND_HISTORY\",\r\n    similes: [\"CHECK_SPENDING\", \"VIEW_EXPENSES\", \"SPENDING_HISTORY\", \"COST_HISTORY\"],\r\n    description: \"Get the spending history for your Hyperbolic account, optionally filtered by date range and currency.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show my spending history on Hyperbolic\"\r\n            } as GetSpendHistoryContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here's your spending history for the last 30 days:\\n\\nTotal Spend: $2,500\\n\\nBreakdown by Service:\\n- GPU Compute: $2,000 (80%)\\n- Storage: $300 (12%)\\n- Network: $200 (8%)\\n\\nTop Instances:\\n1. RTX 4090 Instance (gpu-123): $1,200\\n2. A100 Instance (gpu-456): $800\\n3. Storage Volume (vol-789): $300\",\r\n                success: true,\r\n                data: {\r\n                    totalSpend: 2500,\r\n                    breakdown: {\r\n                        compute: 2000,\r\n                        storage: 300,\r\n                        network: 200\r\n                    },\r\n                    topInstances: [\r\n                        {\r\n                            id: \"gpu-123\",\r\n                            name: \"RTX 4090 Instance\",\r\n                            spend: 1200\r\n                        },\r\n                        {\r\n                            id: \"gpu-456\",\r\n                            name: \"A100 Instance\",\r\n                            spend: 800\r\n                        },\r\n                        {\r\n                            id: \"vol-789\",\r\n                            name: \"Storage Volume\",\r\n                            spend: 300\r\n                        }\r\n                    ]\r\n                }\r\n            } as GetSpendHistoryContent\r\n        } as ActionExample\r\n    ], [\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Get my spending for the last week\",\r\n                days: 7\r\n            } as GetSpendHistoryContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here's your spending history for the last 7 days:\\n\\nTotal Spend: $800\\n\\nBreakdown by Service:\\n- GPU Compute: $650 (81.25%)\\n- Storage: $100 (12.5%)\\n- Network: $50 (6.25%)\\n\\nTop Instances:\\n1. RTX 4090 Instance (gpu-123): $400\\n2. A100 Instance (gpu-456): $250\\n3. Storage Volume (vol-789): $100\",\r\n                success: true,\r\n                data: {\r\n                    totalSpend: 800,\r\n                    breakdown: {\r\n                        compute: 650,\r\n                        storage: 100,\r\n                        network: 50\r\n                    },\r\n                    topInstances: [\r\n                        {\r\n                            id: \"gpu-123\",\r\n                            name: \"RTX 4090 Instance\",\r\n                            spend: 400\r\n                        },\r\n                        {\r\n                            id: \"gpu-456\",\r\n                            name: \"A100 Instance\",\r\n                            spend: 250\r\n                        },\r\n                        {\r\n                            id: \"vol-789\",\r\n                            name: \"Storage Volume\",\r\n                            spend: 100\r\n                        }\r\n                    ]\r\n                }\r\n            } as GetSpendHistoryContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_HB_SPEND_HISTORY\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_HB_SPEND_HISTORY action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetSpendHistoryContent;\r\n\r\n            // Validate date formats if provided\r\n            if (content.startDate && !/^\\d{4}-\\d{2}-\\d{2}$/.test(content.startDate)) {\r\n                throw new ValidationError(\"Start date must be in YYYY-MM-DD format\");\r\n            }\r\n            if (content.endDate && !/^\\d{4}-\\d{2}-\\d{2}$/.test(content.endDate)) {\r\n                throw new ValidationError(\"End date must be in YYYY-MM-DD format\");\r\n            }\r\n\r\n            // Validate currency if provided\r\n            if (content.currency && typeof content.currency !== 'string') {\r\n                throw new ValidationError(\"Currency must be a string\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_HB_SPEND_HISTORY action\");\r\n            // ------------------------------------------------------------------------------------------------\r\n            // Core spend history logic\r\n            // ------------------------------------------------------------------------------------------------\r\n        try {\r\n            const config = await validateHyperbolicConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasApiKey: !!config.HYPERBOLIC_API_KEY,\r\n                env: config.HYPERBOLIC_ENV\r\n            });\r\n\r\n            const apiKey = config.HYPERBOLIC_API_KEY;\r\n            if (!apiKey) {\r\n                throw new ConfigurationError(\"HYPERBOLIC_API_KEY not found in environment variables\");\r\n            }\r\n\r\n            const content = message.content as GetSpendHistoryContent;\r\n            logGranular(\"Processing request\", {\r\n                startDate: content.startDate,\r\n                endDate: content.endDate,\r\n                currency: content.currency\r\n            });\r\n\r\n\r\n            try {\r\n                const response = await axios.get(\r\n                    HYPERBOLIC_ENDPOINTS[config.HYPERBOLIC_ENV].history,\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            Authorization: `Bearer ${apiKey}`\r\n                        },\r\n                        params: {\r\n                            start_date: content.startDate,\r\n                            end_date: content.endDate,\r\n                            currency: content.currency\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from API\", {\r\n                    statusCode: response.status,\r\n                    dataLength: response.data.purchase_history?.length\r\n                });\r\n\r\n                const history = response.data.purchase_history || [];\r\n                const totalSpend = history.reduce((sum: number, entry: SpendHistoryEntry) =>\r\n                    sum + (entry.amount || 0), 0) / 100; // Convert to dollars\r\n\r\n                // Format date ranges for display\r\n                const dateRange = content.startDate && content.endDate\r\n                    ? ` (${content.startDate} - ${content.endDate})`\r\n                    : '';\r\n\r\n                // Format currency prefix/suffix\r\n                const currencyPrefix = content.currency ? `${content.currency} ` : '$';\r\n\r\n                // Format history entries\r\n                const historyText = history.length > 0 ? history\r\n                    .map((entry: SpendHistoryEntry, index: number) => {\r\n                        const date = new Date(entry.timestamp).toLocaleDateString('en-US', {\r\n                            year: 'numeric',\r\n                            month: 'short',\r\n                            day: '2-digit'\r\n                        });\r\n                        const amount = new Decimal(entry.amount).dividedBy(100).toFixed(2);\r\n                        return `${index + 1}. ${date}: ${currencyPrefix}${amount} - ${entry.description}`;\r\n                    })\r\n                    .join('\\n') : 'No purchase history available.';\r\n\r\n                const formattedText = `${content.currency || 'Spending'} History${dateRange}:\r\n\r\n${historyText}\r\n\r\n${history.length > 0 ? `Total Spend: ${currencyPrefix}${totalSpend.toFixed(2)}` : ''}`;\r\n            // ------------------------------------------------------------------------------------------------\r\n            // End core logic\r\n            // ------------------------------------------------------------------------------------------------\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback\");\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            history,\r\n                            totalSpend\r\n                        }\r\n                    } as GetSpendHistoryContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch spend history: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch spend history\");\r\n            }\r\n\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting spend history: ${errorMessage}`,\r\n                    success: false,\r\n                    data: {\r\n                        error: errorMessage\r\n                    }\r\n                } as GetSpendHistoryContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_HB_SPEND_HISTORY action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetSpendHistory;\r\n","import { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\nimport axios from 'axios';\r\nimport { getConfig, validateHyperbolicConfig, HYPERBOLIC_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseGpuRental } from '../utils/parseGpuRent';\r\n\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.HYPERBOLIC_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.info(`[RentCompute] ${message}`, data);\r\n        console.log(`[RentCompute] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface RentComputeContent extends Content {\r\n    text: string;\r\n    success?: boolean;\r\n    data?: {\r\n        nodeId?: string;\r\n        clusterName?: string;\r\n        instanceId?: string;\r\n        cost?: {\r\n            amount: number;\r\n            currency: string;\r\n        };\r\n        specs?: {\r\n            gpu_model: string;\r\n            gpu_memory: number;\r\n            cpu_cores: number;\r\n            ram: number;\r\n            storage: number;\r\n        };\r\n        error?: string;\r\n    };\r\n}\r\n\r\nexport const actionRentCompute: Action = {\r\n    name: \"RENT_HB_COMPUTE\",\r\n    similes: [\"RENT_GPU\", \"GET_GPU\", \"LAUNCH_INSTANCE\", \"START_INSTANCE\"],\r\n    description: \"Rent GPU compute resources on the Hyperbolic platform using node ID and cluster name.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Rent GPU instance on the Hyperbolic \\n[nodeid]las1-prd-acl-msi-09.fen.intra[/nodeid]\\n[cluster]circular-snapdragon-worm[/cluster]\"\r\n            } as RentComputeContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Successfully rented GPU instance:\\n\" +\r\n                      \"Instance ID: i-rtx4090-xyz789\\n\" +\r\n                      \"Node: las1-prd-acl-msi-09.fen.intra\\n\" +\r\n                      \"Cluster: circular-snapdragon-worm\\n\" +\r\n                      \"Cost: $0.50/hour\\n\\n\" +\r\n                      \"Specifications:\\n\" +\r\n                      \"- GPU: NVIDIA RTX 4090\\n\" +\r\n                      \"- GPU Memory: 24GB\\n\" +\r\n                      \"- CPU Cores: 128\\n\" +\r\n                      \"- RAM: 1GB\\n\" +\r\n                      \"- Storage: 1GB\",\r\n                success: true,\r\n                data: {\r\n                    nodeId: \"las1-prd-acl-msi-09.fen.intra\",\r\n                    clusterName: \"circular-snapdragon-worm\",\r\n                    instanceId: \"i-rtx4090-xyz789\",\r\n                    cost: {\r\n                        amount: 0.50,\r\n                        currency: \"USD\"\r\n                    },\r\n                    specs: {\r\n                        gpu_model: \"NVIDIA RTX 4090\",\r\n                        gpu_memory: 24,\r\n                        cpu_cores: 128,\r\n                        ram: 1,\r\n                        storage: 1\r\n                    }\r\n                }\r\n            } as RentComputeContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"RENT_COMPUTE\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating RENT_COMPUTE action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as RentComputeContent;\r\n\r\n            // Parse and validate the node ID and cluster name from the text\r\n            const rentalInfo = parseGpuRental(content.text);\r\n\r\n            logGranular(\"Validation successful\", rentalInfo);\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing RENT_COMPUTE action\");\r\n\r\n        try {\r\n            const config = await validateHyperbolicConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasApiKey: !!config.HYPERBOLIC_API_KEY,\r\n                env: config.HYPERBOLIC_ENV\r\n            });\r\n\r\n            const apiKey = config.HYPERBOLIC_API_KEY;\r\n            if (!apiKey) {\r\n                throw new ConfigurationError(\"HYPERBOLIC_API_KEY not found in environment variables\");\r\n            }\r\n\r\n            const content = message.content as RentComputeContent;\r\n            const rentalInfo = parseGpuRental(content.text);\r\n\r\n            logGranular(\"Processing request\", rentalInfo);\r\n\r\n            try {\r\n                // Ensure proper URL construction\r\n                const _baseUrl = HYPERBOLIC_ENDPOINTS[config.HYPERBOLIC_ENV].marketplace;\r\n                const endpoint = \"https://api.hyperbolic.xyz/v1/marketplace/instances/create\";\r\n\r\n                const requestBody = {\r\n                    cluster_name: rentalInfo.clusterName,\r\n                    node_name: rentalInfo.nodeId,\r\n                    gpu_count: 1\r\n                };\r\n\r\n                logGranular(\"Making API request:\", {\r\n                    endpoint,\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${apiKey.substring(0, 10)}...`\r\n                    },\r\n                    body: requestBody\r\n                });\r\n\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    requestBody,\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            'Authorization': `Bearer ${apiKey}`\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received API response:\", {\r\n                    status: response.status,\r\n                    statusText: response.statusText,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.status === \"success\") {\r\n                    const formattedText = `Successfully requested GPU instance:\r\nNode: ${rentalInfo.nodeId}\r\nCluster: ${rentalInfo.clusterName}\r\nGPU Count: 1\r\n\r\nYour instance is being provisioned. You can check its status using the GET_GPU_STATUS command.`;\r\n\r\n                    if (callback) {\r\n                        callback({\r\n                            text: formattedText,\r\n                            success: true,\r\n                            data: {\r\n                                nodeId: rentalInfo.nodeId,\r\n                                clusterName: rentalInfo.clusterName\r\n                            }\r\n                        } as RentComputeContent);\r\n                    }\r\n\r\n                    return true;\r\n                }\r\n\r\n                throw new APIError(\"Unexpected response format from API\");\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to rent GPU: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to rent GPU\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error renting GPU: ${errorMessage}`,\r\n                    success: false,\r\n                    data: {\r\n                        error: errorMessage\r\n                    }\r\n                } as RentComputeContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute RENT_COMPUTE action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionRentCompute;\r\n","import { ValidationError } from '../error/base';\r\nimport { elizaLogger } from \"@elizaos/core\";\r\n\r\nexport interface ParsedGpuRental {\r\n    nodeId: string;\r\n    clusterName: string;\r\n}\r\n\r\n/**\r\n * Parses GPU rental information from [nodeid] and [cluster] tags\r\n * Format expected:\r\n * [nodeid]node-id-here[/nodeid]\r\n * [cluster]cluster-name-here[/cluster]\r\n *\r\n * @throws ValidationError if no valid node ID or cluster name is found\r\n */\r\nexport function parseGpuRental(text: string): ParsedGpuRental {\r\n    elizaLogger.info(\"[GpuRentalParser] Parsing text:\", { text });\r\n\r\n    try {\r\n        // Check for [nodeid] tag\r\n        const nodeMatch = text.match(/\\[nodeid\\]([\\s\\S]*?)\\[\\/nodeid\\]/i);\r\n        if (!nodeMatch) {\r\n            elizaLogger.info(\"[GpuRentalParser] No [nodeid] tags found in text\");\r\n            throw new ValidationError(\"No [nodeid] tags found. Expected format: [nodeid]node-id[/nodeid]\");\r\n        }\r\n\r\n        // Check for [cluster] tag\r\n        const clusterMatch = text.match(/\\[cluster\\]([\\s\\S]*?)\\[\\/cluster\\]/i);\r\n        if (!clusterMatch) {\r\n            elizaLogger.info(\"[GpuRentalParser] No [cluster] tags found in text\");\r\n            throw new ValidationError(\"No [cluster] tags found. Expected format: [cluster]cluster-name[/cluster]\");\r\n        }\r\n\r\n        const nodeId = nodeMatch[1].trim();\r\n        const clusterName = clusterMatch[1].trim();\r\n\r\n        if (!nodeId) {\r\n            elizaLogger.info(\"[GpuRentalParser] Empty node ID in [nodeid] tags\");\r\n            throw new ValidationError(\"Empty node ID in [nodeid] tags\");\r\n        }\r\n\r\n        if (!clusterName) {\r\n            elizaLogger.info(\"[GpuRentalParser] Empty cluster name in [cluster] tags\");\r\n            throw new ValidationError(\"Empty cluster name in [cluster] tags\");\r\n        }\r\n\r\n        elizaLogger.info(\"[GpuRentalParser] Successfully parsed rental info:\", { nodeId, clusterName });\r\n\r\n        return {\r\n            nodeId,\r\n            clusterName\r\n        };\r\n    } catch (error) {\r\n        elizaLogger.error(\"[GpuRentalParser] Parse error:\", { error });\r\n        if (error instanceof ValidationError) {\r\n            throw error;\r\n        }\r\n        throw new ValidationError(\r\n            `Failed to parse GPU rental info: ${error instanceof Error ? error.message : String(error)}`\r\n        );\r\n    }\r\n}\r\n\r\nexport default parseGpuRental;","import { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\nimport axios from 'axios';\r\nimport { getConfig, validateHyperbolicConfig, HYPERBOLIC_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseGpuInstance } from '../utils/parseGpuInstance';\r\n\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.HYPERBOLIC_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.info(`[TerminateCompute] ${message}`, data);\r\n        console.log(`[TerminateCompute] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface TerminateComputeContent extends Content {\r\n    text: string;\r\n    instanceId: string;\r\n    market?: string;\r\n    success?: boolean;\r\n    data?: {\r\n        terminationStatus?: {\r\n            status: string;\r\n            message: string;\r\n            error_code?: number;\r\n        };\r\n        error?: string;\r\n    };\r\n}\r\n\r\nexport const actionTerminateCompute: Action = {\r\n    name: \"TERMINATE_HB_COMPUTE\",\r\n    similes: [\"STOP_GPU\", \"TERMINATE_INSTANCE\", \"STOP_INSTANCE\"],\r\n    description: \"Terminate a running GPU compute instance on Hyperbolic\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Terminate GPU instance [gpu]worse-walnut-viper[/gpu] on Hyperbolic\",\r\n                instanceId: \"worse-walnut-viper\",\r\n                market: \"Hyperbolic\"\r\n            } as TerminateComputeContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Successfully initiated termination of GPU instance worse-walnut-viper on Hyperbolic\",\r\n                instanceId: \"worse-walnut-viper\",\r\n                market: \"Hyperbolic\",\r\n                success: true,\r\n                data: {\r\n                    terminationStatus: {\r\n                        status: \"success\",\r\n                        message: \"Termination initiated\"\r\n                    }\r\n                }\r\n            } as TerminateComputeContent\r\n        } as ActionExample\r\n    ], [\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Terminate the Hyperbolic instance [gpu]worse-walnut-viper[/gpu]\",\r\n                instanceId: \"worse-walnut-viper\",\r\n                market: \"gpu\"\r\n            } as TerminateComputeContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Successfully initiated termination of GPU instance worse-walnut-viper on gpu marketplace\",\r\n                instanceId: \"worse-walnut-viper\",\r\n                market: \"gpu\",\r\n                success: true,\r\n                data: {\r\n                    terminationStatus: {\r\n                        status: \"success\",\r\n                        message: \"Termination initiated\"\r\n                    }\r\n                }\r\n            } as TerminateComputeContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        logGranular(\"Starting validation\", {\r\n            messageText: message.content?.text,\r\n            type: message.content?.type\r\n        });\r\n\r\n        // Check if this is our action type\r\n        if (!message.content?.type || message.content.type !== \"TERMINATE_HB_COMPUTE\") {\r\n            return true;\r\n        }\r\n\r\n        if (!message.content.text) {\r\n            throw new ValidationError(\"No text provided to parse instance ID\");\r\n        }\r\n\r\n        try {\r\n            // Just verify we can parse the instance ID\r\n            const parsed = parseGpuInstance(message.content.text);\r\n            logGranular(\"Successfully parsed instance ID\", {\r\n                instanceId: parsed.instanceId,\r\n                market: parsed.market\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Failed to parse instance ID\", { error });\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Could not parse instance ID from text\");\r\n        }\r\n    },\r\n\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing TERMINATE_HB_COMPUTE action\");\r\n        try {\r\n            const config = await validateHyperbolicConfig(runtime);\r\n            const apiKey = config.HYPERBOLIC_API_KEY;\r\n            if (!apiKey) {\r\n                throw new ConfigurationError(\"HYPERBOLIC_API_KEY not found in environment variables\");\r\n            }\r\n\r\n            // Parse the instance ID directly from text\r\n            const parsed = parseGpuInstance(message.content?.text || \"\");\r\n            logGranular(\"Parsed instance details\", {\r\n                instanceId: parsed.instanceId,\r\n                market: parsed.market\r\n            });\r\n\r\n            try {\r\n                const requestBody = { id: parsed.instanceId };\r\n                logGranular(\"Sending termination request\", {\r\n                    endpoint: HYPERBOLIC_ENDPOINTS[config.HYPERBOLIC_ENV].instances.terminate,\r\n                    requestBody\r\n                });\r\n\r\n                const response = await axios.post(\r\n                    HYPERBOLIC_ENDPOINTS[config.HYPERBOLIC_ENV].instances.terminate,\r\n                    requestBody,\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            Authorization: `Bearer ${apiKey}`\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                const formattedText = `Successfully initiated termination of GPU instance ${parsed.instanceId}`;\r\n\r\n                if (callback) {\r\n                    callback({\r\n                        text: formattedText,\r\n                        instanceId: parsed.instanceId,\r\n                        market: parsed.market,\r\n                        success: true,\r\n                        data: {\r\n                            terminationStatus: {\r\n                                status: \"success\",\r\n                                message: \"Termination initiated\"\r\n                            }\r\n                        }\r\n                    } as TerminateComputeContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    const errorCode = error.response?.data?.error_code;\r\n                    const errorMessage = error.response?.data?.message || error.message;\r\n\r\n                    if (errorCode === 105) {\r\n                        throw new APIError(`Instance not found: ${parsed.instanceId}`, 404);\r\n                    }\r\n\r\n                    throw new APIError(\r\n                        `Failed to terminate instance: ${errorMessage}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to terminate instance\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error terminating instance: ${errorMessage}`,\r\n                    instanceId: (message.content as TerminateComputeContent).instanceId,\r\n                    success: false,\r\n                    data: {\r\n                        terminationStatus: {\r\n                            status: \"error\",\r\n                            message: errorMessage,\r\n                            error_code: (error as APIError).statusCode || 500\r\n                        }\r\n                    }\r\n                } as TerminateComputeContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute TERMINATE_HB_COMPUTE action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionTerminateCompute;\r\n","import { ValidationError } from '../error/base';\r\nimport { elizaLogger } from \"@elizaos/core\";\r\n\r\nexport interface ParsedGpuInstance {\r\n    instanceId: string;\r\n    market?: string;\r\n}\r\n\r\n/**\r\n * Parses a GPU instance ID from [gpu] tags\r\n * Format expected:\r\n * [gpu]instance-id[/gpu]\r\n *\r\n * @throws ValidationError if no valid instance ID is found\r\n */\r\nexport function parseGpuInstance(text: string): ParsedGpuInstance {\r\n    elizaLogger.info(\"[GpuParser] Parsing text:\", { text });\r\n\r\n    try {\r\n        // Only check for [gpu] tag format\r\n        const tagMatch = text.match(/\\[gpu\\]([\\s\\S]*?)\\[\\/gpu\\]/i);\r\n        if (!tagMatch) {\r\n            elizaLogger.info(\"[GpuParser] No [gpu] tags found in text\");\r\n            throw new ValidationError(\"No [gpu] tags found. Expected format: [gpu]instance-id[/gpu]\");\r\n        }\r\n\r\n        const instanceId = tagMatch[1].trim();\r\n        if (!instanceId) {\r\n            elizaLogger.info(\"[GpuParser] Empty instance ID in [gpu] tags\");\r\n            throw new ValidationError(\"Empty instance ID in [gpu] tags\");\r\n        }\r\n\r\n        elizaLogger.info(\"[GpuParser] Successfully parsed instance ID:\", { instanceId });\r\n\r\n        return {\r\n            instanceId,\r\n            market: \"gpu\"\r\n        };\r\n    } catch (error) {\r\n        elizaLogger.error(\"[GpuParser] Parse error:\", { error });\r\n        if (error instanceof ValidationError) {\r\n            throw error;\r\n        }\r\n        throw new ValidationError(\r\n            `Failed to parse GPU instance: ${error instanceof Error ? error.message : String(error)}`\r\n        );\r\n    }\r\n}\r\n\r\nexport default parseGpuInstance;"],"mappings":"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","names":["config","config","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","Decimal","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","elizaLogger","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","elizaLogger","config","GRANULAR_LOG","logGranular","elizaLogger","axios"]}