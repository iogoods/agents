{"version":3,"sources":["../src/actions/executeSwap.ts","../src/actions/swapTemplate.ts","../src/actions/utils.ts","../src/environment.ts","../src/actions/txns.ts","../src/actions/chains.ts","../src/index.ts"],"sourcesContent":["import {\r\n    composeContext,\r\n    elizaLogger,\r\n    generateObjectDeprecated,\r\n    type HandlerCallback,\r\n    type IAgentRuntime,\r\n    type Memory,\r\n    ModelClass,\r\n    type State\r\n} from \"@elizaos/core\";\r\nimport { swapTemplate } from \"./swapTemplate.ts\";\r\nimport { ChainUtils, fetchChains, fetchPathfinderQuote, fetchTokenConfig } from \"./utils.ts\";\r\nimport { validateRouterNitroConfig } from \"../environment.ts\";\r\nimport { checkAndSetAllowance, checkNativeTokenBalance, checkUserBalance, getSwapTransaction } from \"./txns.ts\";\r\nimport { ethers } from \"ethers\";\r\nimport { getBlockExplorerFromChainId, getRpcUrlFromChainId } from \"./chains.ts\";\r\n\r\n// Types\r\ninterface PathfinderDestinationAsset {\r\n    decimals: number;\r\n}\r\n\r\ninterface PathfinderDestination {\r\n    tokenAmount: string;\r\n    asset: PathfinderDestinationAsset;\r\n}\r\n\r\ninterface PathfinderResponse {\r\n    destination: PathfinderDestination;\r\n    allowanceTo: string;\r\n}\r\n\r\ninterface SwapContent {\r\n    fromChain: string;\r\n    toChain: string;\r\n    fromToken: string;\r\n    toToken: string;\r\n    amount: string;\r\n    toAddress: string;\r\n}\r\n\r\n// Helper functions\r\nconst validateAddress = (address: string): boolean => \r\n    typeof address === \"string\" && address.startsWith(\"0x\") && address.length === 42;\r\n\r\nconst initializeWallet = async (runtime: IAgentRuntime, rpc: string) => {\r\n    const privateKey = runtime.getSetting(\"ROUTER_NITRO_EVM_PRIVATE_KEY\");\r\n    if (!privateKey) {\r\n        throw new Error(\"Private key is missing. Please set ROUTER_NITRO_EVM_PRIVATE_KEY in the environment settings.\");\r\n    }\r\n    const provider = new ethers.JsonRpcProvider(rpc);\r\n    return new ethers.Wallet(privateKey, provider);\r\n};\r\n\r\nconst checkBalances = async (wallet: ethers.Wallet, tokenConfig: any, amountIn: bigint) => {\r\n    const isNativeToken = tokenConfig.address.toLowerCase() === \"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\";\r\n    \r\n    if (isNativeToken) {\r\n        const nativeBalance = await checkNativeTokenBalance(wallet, tokenConfig.decimals);\r\n        if (BigInt(nativeBalance) < amountIn) {\r\n            throw new Error(\"Insufficient native token balance\");\r\n        }\r\n    }\r\n    \r\n    const tokenBalance = await checkUserBalance(wallet, tokenConfig.address, tokenConfig.decimals);\r\n    if (BigInt(tokenBalance) < amountIn) {\r\n        throw new Error(\"Insufficient token balance\");\r\n    }\r\n};\r\n\r\nconst handleTransaction = async (\r\n    wallet: ethers.Wallet, \r\n    txResponse: any, \r\n    blockExplorer: string,\r\n    callback?: HandlerCallback\r\n) => {\r\n    const tx = await wallet.sendTransaction(txResponse.txn);\r\n    const receipt = await tx.wait();\r\n    \r\n    if (!receipt?.status) {\r\n        throw new Error(\"Transaction failed\");\r\n    }\r\n    \r\n    const txExplorerUrl = blockExplorer ? `${blockExplorer}/tx/${tx.hash}` : tx.hash;\r\n    const successMessage = `Swap completed successfully! Txn: ${txExplorerUrl}`;\r\n    \r\n    callback?.({ text: successMessage });\r\n    return true;\r\n};\r\n\r\nexport const executeSwapAction = {\r\n    name: \"ROUTER_NITRO_SWAP\",\r\n    description: \"Swaps tokens across chains from the agent's wallet to a recipient wallet.\",\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        state: State | undefined,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        elizaLogger.log(\"Starting ROUTER_NITRO_SWAP handler...\");\r\n\r\n        try {\r\n            // State initialization\r\n            const updatedState = state ? \r\n                await runtime.updateRecentMessageState(state) : \r\n                await runtime.composeState(message);\r\n\r\n            // Generate swap content\r\n            const swapContext = composeContext({ state: updatedState, template: swapTemplate });\r\n            const content = await generateObjectDeprecated({\r\n                runtime,\r\n                context: swapContext,\r\n                modelClass: ModelClass.LARGE,\r\n            }) as SwapContent;\r\n\r\n            // Validate and set address\r\n            if (!validateAddress(content.toAddress)) {\r\n                content.toAddress = runtime.getSetting(\"ROUTER_NITRO_EVM_ADDRESS\");\r\n            }\r\n\r\n            // Initialize chain data\r\n            const chainUtils = new ChainUtils(await fetchChains());\r\n            const swapDetails = chainUtils.processChainSwap(content.fromChain, content.toChain);\r\n            \r\n            if (!swapDetails.fromChainId || !swapDetails.toChainId) {\r\n                throw new Error(\"Invalid chain data details\");\r\n            }\r\n\r\n            // Initialize wallet\r\n            const rpc = getRpcUrlFromChainId(swapDetails.fromChainId);\r\n            const wallet = await initializeWallet(runtime, rpc);\r\n            const address = await wallet.getAddress();\r\n\r\n            // Fetch token configurations\r\n            const [fromTokenConfig, toTokenConfig] = await Promise.all([\r\n                fetchTokenConfig(Number(swapDetails.fromChainId), content.fromToken),\r\n                fetchTokenConfig(Number(swapDetails.toChainId), content.toToken)\r\n            ]);\r\n\r\n            // Calculate amount and check balances\r\n            const amountIn = BigInt(Math.floor(Number(content.amount) * 10 ** fromTokenConfig.decimals));\r\n            await checkBalances(wallet, fromTokenConfig, amountIn);\r\n\r\n            // Get pathfinder quote and process swap\r\n            const pathfinderResponse = await fetchPathfinderQuote({\r\n                fromTokenAddress: fromTokenConfig.address,\r\n                toTokenAddress: toTokenConfig.address,\r\n                amount: amountIn.toString(),\r\n                fromTokenChainId: Number(swapDetails.fromChainId),\r\n                toTokenChainId: Number(swapDetails.toChainId),\r\n                partnerId: 127,\r\n            }) as PathfinderResponse;\r\n\r\n            if (pathfinderResponse) {\r\n                await checkAndSetAllowance(\r\n                    wallet,\r\n                    fromTokenConfig.address,\r\n                    pathfinderResponse.allowanceTo,\r\n                    amountIn\r\n                );\r\n\r\n                const txResponse = await getSwapTransaction(pathfinderResponse, address, content.toAddress);\r\n                const blockExplorer = getBlockExplorerFromChainId(swapDetails.fromChainId).url;\r\n                \r\n                return await handleTransaction(wallet, txResponse, blockExplorer, callback);\r\n            }\r\n\r\n            return false;\r\n        } catch (error) {\r\n            elizaLogger.log(`Error during executing swap: ${error.message}`);\r\n            callback?.({ text: `Error during swap: ${error.message}` });\r\n            return false;\r\n        }\r\n    },\r\n\r\n    template: swapTemplate,\r\n    validate: async (runtime: IAgentRuntime) => {\r\n        await validateRouterNitroConfig(runtime);\r\n        return true;\r\n    },\r\n    examples: [\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Bridge 1 ETH from Ethereum to Base on address 0xCCa8009f5e09F8C5dB63cb0031052F9CB635Af62\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agent}}\",\r\n                content: {\r\n                    text: \"Sure, I'll send 1 ETH from Ethereum to Base\",\r\n                    action: \"ROUTER_NITRO_SWAP\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agent}}\",\r\n                content: {\r\n                    text: \"Successfully sent 1 ETH to 0xCCa8009f5e09F8C5dB63cb0031052F9CB635Af62 on Base\\nTransaction: 0x4fed598033f0added272c3ddefd4d83a521634a738474400b27378db462a76ec\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Please swap 1 ETH into USDC from Avalanche to Base on address 0xF43042865f4D3B32A19ECBD1C7d4d924613c41E8\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agent}}\",\r\n                content: {\r\n                    text: \"Sure, I'll swap 1 ETH into USDC from Solana to Base on address 0xF43042865f4D3B32A19ECBD1C7d4d924613c41E8\",\r\n                    action: \"ROUTER_NITRO_SWAP\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agent}}\",\r\n                content: {\r\n                    text: \"Successfully Swapped 1 ETH into USDC and sent to 0xF43042865f4D3B32A19ECBD1C7d4d924613c41E8 on Base\\nTransaction: 2sj3ifA5iPdRDfnkyK5LZ4KoyN57AH2QoHFSzuefom11F1rgdiUriYf2CodBbq9LBi77Q5bLHz4CShveisTu954B\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Send 100 UNI from Arbitrum to Ethereum on 0xCCa8009f5e09F8C5dB63cb0031052F9CB635Af62 \",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agent}}\",\r\n                content: {\r\n                    text: \"Sure, I'll send 100 UNI to Ethereum right away.\",\r\n                    action: \"ROUTER_NITRO_SWAP\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agent}}\",\r\n                content: {\r\n                    text: \"Successfully sent 100 UNI to 0xCCa8009f5e09F8C5dB63cb0031052F9CB635Af62 on Ethereum\\nTransaction: 0x4fed598033f0added272c3ddefd4d83a521634a738474400b27378db462a76ec\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                \"user\": \"{{user1}}\",\r\n                \"content\": {\r\n                    \"text\": \"Transfer 50 AAVE from Polygon to Optimism on address 0x5C7EDE23cFeBB3A2F60d2D51901A53a276e8F001\",\r\n                }\r\n            },\r\n            {\r\n                \"user\": \"{{agent}}\",\r\n                \"content\": {\r\n                    \"text\": \"Sure, I'll transfer 50 AAVE from Polygon to Optimism\",\r\n                    \"action\": \"ROUTER_NITRO_SWAP\",\r\n                }\r\n            },\r\n            {\r\n                \"user\": \"{{agent}}\",\r\n                \"content\": {\r\n                    \"text\": \"Successfully transferred 50 AAVE to 0x5C7EDE23cFeBB3A2F60d2D51901A53a276e8F001 on Optimism\\nTransaction: 0x720b46c95f7f819f5d7e1e8df6fd7d8be12b8d06312bb9d96ea85a45fc65079a\",\r\n                }\r\n            }\r\n        ],\r\n        [\r\n            {\r\n                \"user\": \"{{user1}}\",\r\n                \"content\": {\r\n                    \"text\": \"Send 1000 USDT from Ethereum to Arbitrum on address 0x456dC2FfE61d8F92A29b9Bd6b32730d345e0638c\",\r\n                }\r\n            },\r\n            {\r\n                \"user\": \"{{agent}}\",\r\n                \"content\": {\r\n                    \"text\": \"Sure, I'll send 1000 USDT from Ethereum to Arbitrum\",\r\n                    \"action\": \"ROUTER_NITRO_SWAP\",\r\n                }\r\n            },\r\n            {\r\n                \"user\": \"{{agent}}\",\r\n                \"content\": {\r\n                    \"text\": \"Successfully sent 1000 USDT to 0x456dC2FfE61d8F92A29b9Bd6b32730d345e0638c on Arbitrum\\nTransaction: 0x3c72a5fe4d0278f2b46dbe765a5f5dbf2f78cbfdce3d0c2b8f11855969e9e173\",\r\n                }\r\n            }\r\n        ]\r\n    ],\r\n    similes: [\"CROSS_CHAIN_SWAP\", \"CROSS_CHAIN_BRIDGE\", \"NITRO_BRIDGE\", \"SWAP\", \"BRIDGE\", \"TRANSFER\"],\r\n};\r\n","export const swapTemplate = `Using the provided context and wallet information:\r\n\r\n{{recentMessages}}\r\n\r\nExtract the following details for the cross-chain swap request:\r\n- **From Token**: The symbol of the token to swap from.\r\n- **To Token**: The symbol of the token to swap into (default: same as \"From Token\").\r\n- **Source Chain**: The chain to swap from.\r\n- **Destination Chain**: The chain to swap into (default: same as \"Source Chain\").\r\n- **Amount**: The amount to swap, in the \"From Token.\"\r\n- **Destination Address**: The address to send the swapped token to (if specified ).\r\nIf the destination address is not specified, the ROUTER NITRO EVM address of the runtime should be used.\r\n\r\nIf a value is not explicitly provided, use the default specified above.\r\n\r\nRespond with a JSON object containing only the extracted information:\r\n\r\n\\\\\\`json\r\n{\r\n    \"fromToken\": string | null,\r\n    \"toToken\": string | null,\r\n    \"fromChain\": string | null,\r\n    \"toChain\": string | null,\r\n    \"amount\": string | null,\r\n    \"toAddress\": string | null\r\n}\r\n\\\\\\`\r\n`;\r\n","import axios from \"axios\";\r\ninterface ChainData {\r\n    name: string;\r\n    chainId: string;\r\n    type: string;\r\n    isLive: boolean;\r\n    gasToken?: {\r\n        symbol: string;\r\n        address: string;\r\n    };\r\n}\r\n\r\ninterface TokenData {\r\n    address: string;\r\n    name: string;\r\n    decimals: number;\r\n    chainId: number;\r\n}\r\n\r\nexport class ChainUtils {\r\n    private chainData: ChainData[] = [];\r\n    private chainNameMappings: { [key: string]: string[] } = {\r\n        'arbitrum': ['arbitrum', 'arbitrum one', 'arb', 'arbitrum mainnet'],\r\n        'ethereum': ['ethereum', 'eth', 'ethereum mainnet', 'ether'],\r\n        'polygon': ['polygon', 'matic', 'polygon mainnet', 'polygon pos'],\r\n        'avalanche': ['avalanche', 'avax', 'avalanche c-chain', 'avalanche mainnet'],\r\n        'binance': ['binance', 'bsc', 'bnb', 'bnb smart chain', 'bnb smart chain mainnet'],\r\n        'optimism': ['optimism', 'op', 'op mainnet'],\r\n        'base': ['base', 'base mainnet'],\r\n        'zksync': ['zksync', 'zksync era', 'zksync mainnet'],\r\n        'manta': ['manta', 'manta pacific', 'manta pacific mainnet'],\r\n        'mantle': ['mantle', 'mantle mainnet'],\r\n        'linea': ['linea', 'linea mainnet'],\r\n        'scroll': ['scroll', 'scroll mainnet'],\r\n        'mode': ['mode', 'mode mainnet'],\r\n        'blast': ['blast', 'blast mainnet'],\r\n        'polygon-zkevm': ['polygon zkevm', 'polygon zkvm', 'zkevm'],\r\n        'boba': ['boba', 'boba network'],\r\n        'metis': ['metis', 'metis andromeda', 'metis mainnet'],\r\n        'aurora': ['aurora', 'aurora mainnet'],\r\n        'taiko': ['taiko', 'taiko mainnet'],\r\n        'rootstock': ['rootstock', 'rsk', 'rootstock mainnet'],\r\n        'dogechain': ['dogechain', 'dogechain mainnet'],\r\n        'oasis-sapphire': ['oasis sapphire', 'sapphire'],\r\n        'xlayer': ['x layer', 'xlayer mainnet'],\r\n        'rollux': ['rollux', 'rollux mainnet'],\r\n        '5ire': ['5ire', '5irechain', '5irechain mainnet'],\r\n        'kyoto': ['kyoto', 'kyoto mainnet'],\r\n        'vanar': ['vanar', 'vanar mainnet'],\r\n        'saakuru': ['saakuru', 'saakuru mainnet'],\r\n        'redbelly': ['redbelly', 'redbelly mainnet'],\r\n        'shido': ['shido', 'shido mainnet'],\r\n        'nero': ['nero', 'nero mainnet'],\r\n        'soneium': ['soneium', 'soneium mainnet'],\r\n        'hyperliquid': ['hyperliquid', 'hyperliquid mainnet'],\r\n        'arthera': ['arthera', 'arthera mainnet']\r\n    };\r\n\r\n    constructor(apiResponse: { data: ChainData[] }) {\r\n        this.chainData = apiResponse.data;\r\n    }\r\n\r\n    private normalizeChainName(input: string): string {\r\n        const normalized = input.toLowerCase().trim();\r\n\r\n        // Iterate through chainNameMappings to find a match\r\n        for (const [standardName, aliases] of Object.entries(this.chainNameMappings)) {\r\n            if (aliases.includes(normalized)) {\r\n                const chainMatch = this.chainData.find(chain =>\r\n                    aliases.includes(chain.name.toLowerCase()) || chain.name.toLowerCase().includes(standardName) // Match standard name\r\n                );\r\n\r\n                if (chainMatch) {\r\n                    return chainMatch.name;\r\n                }\r\n            }\r\n        }\r\n\r\n        const partialMatch = this.chainData.find(chain =>\r\n            chain.name.toLowerCase().includes(normalized) ||\r\n            normalized.includes(chain.name.toLowerCase())\r\n        );\r\n\r\n        if (partialMatch) {\r\n            return partialMatch.name;\r\n        }\r\n\r\n        return input;\r\n    }\r\n\r\n\r\n    getChainId(chainName: string): string | null {\r\n        if (!chainName) return null;\r\n\r\n        const normalizedName = this.normalizeChainName(chainName);\r\n        const chain = this.chainData.find(\r\n            c => c.name.toLowerCase() === normalizedName.toLowerCase()\r\n        );\r\n\r\n        return chain ? chain.chainId : null;\r\n    }\r\n\r\n    getChainType(chainName: string): string | null {\r\n        if (!chainName) return null;\r\n\r\n        const normalizedName = this.normalizeChainName(chainName);\r\n        const chain = this.chainData.find(\r\n            c => c.name.toLowerCase() === normalizedName.toLowerCase()\r\n        );\r\n\r\n        return chain ? chain.type : null;\r\n    }\r\n\r\n    isChainLive(chainName: string): boolean {\r\n        if (!chainName) return false;\r\n\r\n        const normalizedName = this.normalizeChainName(chainName);\r\n        const chain = this.chainData.find(\r\n            c => c.name.toLowerCase() === normalizedName.toLowerCase()\r\n        );\r\n\r\n        return chain ? chain.isLive : false;\r\n    }\r\n\r\n    getGasToken(chainName: string): { symbol: string; address: string; } | null {\r\n        if (!chainName) return null;\r\n\r\n        const normalizedName = this.normalizeChainName(chainName);\r\n        const chain = this.chainData.find(\r\n            c => c.name.toLowerCase() === normalizedName.toLowerCase()\r\n        );\r\n\r\n        return chain?.gasToken || null;\r\n    }\r\n\r\n    validateChain(chainName: string): {\r\n        isValid: boolean;\r\n        chainId: string | null;\r\n        isLive: boolean;\r\n        type: string | null;\r\n        normalizedName: string;\r\n        message?: string;\r\n    } {\r\n        if (!chainName) {\r\n            return {\r\n                isValid: false,\r\n                chainId: null,\r\n                isLive: false,\r\n                type: null,\r\n                normalizedName: '',\r\n                message: 'Chain name is required'\r\n            };\r\n        }\r\n\r\n        const normalizedName = this.normalizeChainName(chainName);\r\n        const chainId = this.getChainId(normalizedName);\r\n        const isLive = this.isChainLive(normalizedName);\r\n        const type = this.getChainType(normalizedName);\r\n\r\n        const isValid = chainId !== null;\r\n\r\n        return {\r\n            isValid,\r\n            chainId,\r\n            isLive,\r\n            type,\r\n            normalizedName,\r\n            message: isValid\r\n                ? undefined\r\n                : `Invalid chain name: ${chainName}`\r\n        };\r\n    }\r\n\r\n    processChainSwap(fromChain: string, toChain: string): {\r\n        fromChainId: string | null;\r\n        toChainId: string | null;\r\n    } {\r\n        const sourceChain = this.validateChain(fromChain);\r\n        const destChain = this.validateChain(toChain);\r\n\r\n        if (!sourceChain.isValid) {\r\n            throw new Error(`Invalid source chain: ${fromChain}`);\r\n        }\r\n\r\n        if (!destChain.isValid) {\r\n            throw new Error(`Invalid destination chain: ${toChain}`);\r\n        }\r\n\r\n        if (!sourceChain.isLive) {\r\n            throw new Error(`Source chain ${sourceChain.normalizedName} is not currently active`);\r\n        }\r\n\r\n        if (!destChain.isLive) {\r\n            throw new Error(`Destination chain ${destChain.normalizedName} is not currently active`);\r\n        }\r\n\r\n        return {\r\n            fromChainId: sourceChain.chainId,\r\n            toChainId: destChain.chainId\r\n        };\r\n    }\r\n}\r\n\r\nexport async function fetchChains(): Promise<{ data: ChainData[] }> {\r\n    const url = 'https://api.nitroswap.routernitro.com/chain?page=0&limit=10000';\r\n\r\n    try {\r\n        const response = await axios.get(url);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error('Error fetching chains:', error);\r\n        throw new Error('Failed to fetch chains.');\r\n    }\r\n}\r\n\r\nconst tokenCache: { [key: string]: TokenData } = {};\r\n\r\nexport async function fetchTokenConfig(chainId: number, token: string): Promise<TokenData> {\r\n    const cacheKey = `${chainId}-${token.toLowerCase()}`;\r\n\r\n    // Check if the token config is already cached\r\n    if (tokenCache[cacheKey]) {\r\n        console.log(`Cache hit for ${cacheKey}`);\r\n        return tokenCache[cacheKey];\r\n    }\r\n\r\n    // prioritizing lowercase first\r\n    const tokenCases = [token.toLowerCase(), token.toUpperCase()];\r\n\r\n    for (const tokenSymbol of tokenCases) {\r\n        const url = `https://api.nitroswap.routernitro.com/token?&chainId=${chainId}&symbol=${tokenSymbol}`;\r\n        try {\r\n            const response = await axios.get(url);\r\n\r\n            const tokenData = response.data?.data?.[0];\r\n            if (tokenData) {\r\n                tokenCache[cacheKey] = {\r\n                    address: tokenData.address,\r\n                    name: tokenData.name,\r\n                    decimals: tokenData.decimals,\r\n                    chainId: tokenData.chainId,\r\n                };\r\n                return tokenCache[cacheKey];\r\n            }\r\n        } catch (error: unknown) {\r\n            const errorMessage = error instanceof Error \r\n                ? error.message \r\n                : 'Unknown error occurred';\r\n            console.warn(`Error with token symbol \"${tokenSymbol}\": ${errorMessage}`);\r\n        }\r\n    }\r\n\r\n    throw new Error(`Failed to fetch token config for \"${token}\" on chainId \"${chainId}\"`);\r\n}\r\n\r\ninterface PathfinderQuoteParams {\r\n    fromTokenAddress: string;\r\n    toTokenAddress: string;\r\n    amount: string;\r\n    fromTokenChainId: number;\r\n    toTokenChainId: number;\r\n    partnerId: number;\r\n}\r\n\r\nexport async function fetchPathfinderQuote(params: PathfinderQuoteParams): Promise<unknown> {\r\n    const { fromTokenAddress, toTokenAddress, amount, fromTokenChainId, toTokenChainId, partnerId } = params;\r\n\r\n    const pathfinderUrl = `https://api-beta.pathfinder.routerprotocol.com/api/v2/quote?fromTokenAddress=${fromTokenAddress}&toTokenAddress=${toTokenAddress}&amount=${amount}&fromTokenChainId=${fromTokenChainId}&toTokenChainId=${toTokenChainId}&partnerId=${partnerId}`;\r\n\r\n    try {\r\n        const response = await axios.get(pathfinderUrl);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(\"Error fetching Pathfinder quote:\", error instanceof Error ? error.message : String(error));\r\n        throw new Error(`Pathfinder API call failed: ${error instanceof Error ? error.message : String(error)}`);\r\n    }\r\n}\r\n\r\n\r\n// export async function fetchPathfinderQuote(params: PathfinderQuoteParams): Promise<any> {\r\n//     const { fromTokenAddress, toTokenAddress, amount, fromTokenChainId, toTokenChainId, partnerId } = params;\r\n\r\n//     const pathfinderUrl = `https://api-beta.pathfinder.routerprotocol.com/api/v2/quote` +\r\n//         `?fromTokenAddress=${fromTokenAddress}` +\r\n//         `&toTokenAddress=${toTokenAddress}` +\r\n//         `&amount=${amount}` +\r\n//         `&fromTokenChainId=${fromTokenChainId}` +\r\n//         `&toTokenChainId=${toTokenChainId}` +\r\n//         `&partnerId=${partnerId}`;\r\n\r\n//     try {\r\n//         const response = await axios.get(pathfinderUrl);\r\n//         return response.data;\r\n//     } catch (error) {\r\n//         console.error(\"Error fetching Pathfinder quote:\", error.message);\r\n//         throw new Error(`Pathfinder API call failed: ${error.message}`);\r\n//     }\r\n// }\r\n","import { IAgentRuntime } from \"@elizaos/core\";\r\nimport { z } from \"zod\";\r\n\r\nexport const routerNitroEnvSchema = z.object({\r\n    ROUTER_NITRO_EVM_ADDRESS: z.string().min(1, \"Address is required for interacting with Router Nitro\"),\r\n    ROUTER_NITRO_EVM_PRIVATE_KEY: z.string().min(1, \"Private key is required for interacting with Router Nitro\"),\r\n});\r\n\r\nexport type RouterNitroConfig = z.infer<typeof routerNitroEnvSchema>;\r\n\r\nexport async function validateRouterNitroConfig(\r\n    runtime: IAgentRuntime\r\n): Promise<RouterNitroConfig> {\r\n    try {\r\n        const config = {\r\n            ROUTER_NITRO_EVM_ADDRESS:\r\n                runtime.getSetting(\"ROUTER_NITRO_EVM_ADDRESS\") ||\r\n                process.env.ROUTER_NITRO_EVM_ADDRESS,\r\n            ROUTER_NITRO_EVM_PRIVATE_KEY:\r\n                runtime.getSetting(\"ROUTER_NITRO_EVM_PRIVATE_KEY\") ||\r\n                process.env.ROUTER_NITRO_EVM_PRIVATE_KEY,\r\n        };\r\n        // console.log(\"Router Nitro config: \", config);\r\n\r\n        return routerNitroEnvSchema.parse(config);\r\n    } catch (error) {\r\n        if (error instanceof z.ZodError) {\r\n            const errorMessages = error.errors\r\n                .map((err) => `${err.path.join(\".\")}: ${err.message}`)\r\n                .join(\"\\n\");\r\n            throw new Error(\r\n                `Router Nitro configuration validation failed:\\n${errorMessages}`\r\n            );\r\n        }\r\n        throw error;\r\n    }\r\n}","import axios from 'axios';\r\nimport { ethers } from 'ethers'\r\nimport { erc20Abi } from 'viem';\r\n\r\nexport const checkUserBalance = async (wallet, tokenAddress: string, _decimals) => {\r\n    try {\r\n        if (!wallet.provider) {\r\n            throw new Error(\"Wallet must be connected to a provider.\");\r\n        }\r\n        const tokenContract = new ethers.Contract(tokenAddress, erc20Abi, wallet.provider);\r\n        const address = await wallet.getAddress();\r\n        const balance = await tokenContract.balanceOf(address);\r\n        return balance.toString();\r\n    } catch (_error) {  // Changed from 'error' to '_error' to indicate it's intentionally unused\r\n        throw new Error(\"Unable to fetch balance\");\r\n    }\r\n};\r\n\r\nexport const checkNativeTokenBalance = async (wallet, _decimals) => {\r\n\r\n    try {\r\n        if (!wallet.provider) {\r\n            throw new Error(\"Wallet must be connected to a provider.\");\r\n        }\r\n\r\n        const address = await wallet.getAddress();\r\n        const balance = await wallet.provider.getBalance(address);\r\n        return balance.toString();\r\n    } catch (_error) {  // Changed from 'error' to '_error' to indicate it's intentionally unused\r\n        throw new Error(\"Unable to fetch native token balance\");\r\n    }\r\n};\r\n\r\nexport const checkAndSetAllowance = async (wallet, tokenAddress, approvalAddress, amount) => {\r\n    if (tokenAddress === ethers.ZeroAddress || tokenAddress.toLowerCase() === '0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee') {\r\n        console.log(\"Native token detected; no approval needed.\");\r\n        return;\r\n    }\r\n\r\n    console.log(`Checking allowance for token ${tokenAddress} and approval address ${approvalAddress}`);\r\n\r\n    const erc20ReadOnly = new ethers.Contract(tokenAddress, erc20Abi, wallet.provider);\r\n    const walletAddress = await wallet.getAddress();\r\n\r\n    try {\r\n        const allowance = await erc20ReadOnly.allowance(walletAddress, approvalAddress);\r\n        console.log(\"Current allowance:\", allowance.toString());\r\n\r\n        if (allowance < amount) {\r\n            const erc20WithSigner = new ethers.Contract(tokenAddress, erc20Abi, wallet);\r\n            const approveTx = await erc20WithSigner.approve(approvalAddress, amount);\r\n\r\n            console.log(`Approve transaction sent: ${approveTx.hash}`);\r\n            await approveTx.wait();\r\n            console.log(`Approved successfully: ${approveTx.hash}`);\r\n        } else {\r\n            console.log(\"Sufficient allowance already set.\");\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error during allowance check or approval:\", error);\r\n    }\r\n};\r\n\r\nexport const getSwapTransaction = async (quoteData, senderAddress, receiverAddress) => {\r\n    const txDataUrl = \"https://api-beta.pathfinder.routerprotocol.com/api/v2/transaction\";\r\n\r\n    const requestData = {\r\n        ...quoteData,\r\n        senderAddress: senderAddress,\r\n        receiverAddress: receiverAddress\r\n    };\r\n\r\n    const config = {\r\n        method: 'post',\r\n        maxBodyLength: Number.POSITIVE_INFINITY,\r\n        url: txDataUrl,\r\n        headers: {\r\n            'content-type': 'application/json'\r\n        },\r\n        data: requestData\r\n    };\r\n\r\n    try {\r\n        const res = await axios.request(config);\r\n        return res.data;\r\n    } catch (e) {\r\n        console.error(`Fetching tx data from pathfinder: ${e}`);\r\n    }\r\n}\r\n\r\n","import * as viemChains from \"viem/chains\";\r\n\r\n// Create chains object from all available viem chains\r\nconst chains = Object.values(viemChains).reduce((acc, chain) => {\r\n  if (chain && typeof chain === 'object' && 'id' in chain) {\r\n    acc[chain.id] = chain;\r\n  }\r\n  return acc;\r\n}, {});\r\n\r\nexport const getRpcUrlFromChainId = (chainId) => {\r\n  const chain = chains[chainId];\r\n  if (!chain) {\r\n    throw new Error(`Chain ID ${chainId} not found`);\r\n  }\r\n  \r\n  return chain.rpcUrls.default.http[0];\r\n}\r\n\r\n// Helper to get chain object\r\nexport const getChainFromChainId = (chainId) => {\r\n  const chain = chains[chainId];\r\n  if (!chain) {\r\n    throw new Error(`Chain ID ${chainId} not found`);\r\n  }\r\n  \r\n  return chain;\r\n}\r\n\r\nexport const getBlockExplorerFromChainId = (chainId) => {\r\n    const chain = chains[chainId];\r\n    if (!chain) {\r\n      throw new Error(`Chain ID ${chainId} not found`);\r\n    }\r\n    \r\n    if (!chain.blockExplorers || !chain.blockExplorers.default) {\r\n      throw new Error(`Block explorer not found for Chain ID ${chainId}`);\r\n    }\r\n  \r\n    return {\r\n      url: chain.blockExplorers.default.url,\r\n    };\r\n};\r\n\r\nexport { chains };\r\n","import { Plugin } from \"@elizaos/core\";\r\nimport { executeSwapAction } from \"./actions/executeSwap.ts\";\r\n\r\n\r\nexport const nitroPlugin: Plugin = {\r\n    name: \"Nitro\",\r\n    description: \"Nitro Plugin for Eliza\",\r\n    actions: [executeSwapAction],\r\n    evaluators: [],\r\n    providers: [],\r\n};\r\n\r\nexport default nitroPlugin;\r\n"],"mappings":"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","names":["axios","ethers","ethers"]}