{"version":3,"sources":["../src/index.ts","../src/environment.ts","../src/actions/actionGetTokenHoldersCount.ts","../src/error/base.ts","../src/validator/apiParseValidation.ts","../src/actions/actionGetTokenPrice.ts","../src/actions/actionGetTokenTransfers.ts","../src/actions/actionGetAccountBalance.ts","../src/actions/actionGetTransactionsByAddress.ts","../src/actions/actionGetTransactionsByHash.ts","../src/actions/actionGetBlockchainStats.ts","../src/actions/actionGetCurrencies.ts","../src/actions/actionGetInteractions.ts","../src/actions/actionGetNFTHolders.ts","../src/actions/actionGetNFTTransfers.ts","../src/actions/actionGetNFTMetadata.ts","../src/actions/actionGetNFTsByOwner.ts"],"sourcesContent":["import { Plugin } from \"@elizaos/core\";\r\nimport chalk from 'chalk';\r\nimport Table from 'cli-table3';\r\nimport ora from 'ora';\r\nimport { getConfig } from \"./environment\";\r\nimport { actionGetTokenHoldersCount } from \"./actions/actionGetTokenHoldersCount\";\r\nimport { actionGetTokenPrice } from \"./actions/actionGetTokenPrice\";\r\nimport { actionGetTokenTransfers } from \"./actions/actionGetTokenTransfers\";\r\nimport { actionGetAccountBalance } from \"./actions/actionGetAccountBalance\";\r\nimport { actionGetTransactionsByAddress } from \"./actions/actionGetTransactionsByAddress\";\r\nimport { actionGetTransactionsByHash } from \"./actions/actionGetTransactionsByHash\";\r\nimport { actionGetBlockchainStats } from \"./actions/actionGetBlockchainStats\";\r\nimport { actionGetCurrencies } from \"./actions/actionGetCurrencies\";\r\nimport { actionGetInteractions } from \"./actions/actionGetInteractions\";\r\nimport { actionGetNFTHolders } from \"./actions/actionGetNFTHolders\";\r\nimport { actionGetNFTTransfers } from \"./actions/actionGetNFTTransfers\";\r\nimport { actionGetNFTMetadata } from \"./actions/actionGetNFTMetadata\";\r\nimport { actionGetNFTsByOwner } from \"./actions/actionGetNFTsByOwner\";\r\n\r\n\r\n\r\n// Start the loader\r\nconst spinner = ora({\r\n    text: chalk.cyan('Initializing ANKR Plugin...'),\r\n    spinner: 'dots12',\r\n    color: 'cyan'\r\n  }).start();\r\n\r\nconst actions = [\r\n    actionGetTokenHoldersCount,\r\n    actionGetTokenPrice,\r\n    actionGetTokenTransfers,\r\n    actionGetAccountBalance,\r\n    actionGetTransactionsByAddress,\r\n    actionGetTransactionsByHash,\r\n    actionGetBlockchainStats,\r\n    actionGetCurrencies,\r\n    actionGetInteractions,\r\n    actionGetNFTHolders,\r\n    actionGetNFTTransfers,\r\n    actionGetNFTMetadata,\r\n    actionGetNFTsByOwner,\r\n];\r\n\r\n// Get NVIDIA_NIM_SPASH from config\r\nconst ANKR_SPASH = getConfig().ANKR_WALLET;\r\n\r\n// Initial banner\r\n// Only show splash screen if NVIDIA_NIM_SPASH is true\r\nif (ANKR_SPASH) {\r\n    // Initial banner with chalk styling\r\n    console.log(`\\n${chalk.cyan('┌────────────────────────────────────────┐')}`);\r\n    console.log(chalk.cyan('│') + chalk.yellow.bold('          ANKR PLUGIN             ') + chalk.cyan(' │'));\r\n    console.log(chalk.cyan('├────────────────────────────────────────┤'));\r\n    console.log(chalk.cyan('│') + chalk.white('  Initializing ANKR Services...    ') + chalk.cyan('│'));\r\n    console.log(chalk.cyan('│') + chalk.white('  Version: 1.0.0                        ') + chalk.cyan('│'));\r\n    console.log(chalk.cyan('└────────────────────────────────────────┘'));\r\n\r\n    // Stop the loader\r\n    spinner.succeed(chalk.green('ANKR Plugin initialized successfully!'));\r\n\r\n    // Create a beautiful table for actions\r\n    const actionTable = new Table({\r\n      head: [\r\n        chalk.cyan('Action'),\r\n        chalk.cyan('H'),\r\n        chalk.cyan('V'),\r\n        chalk.cyan('E'),\r\n        chalk.cyan('Similes')\r\n      ],\r\n      style: {\r\n        head: [],\r\n        border: ['cyan']\r\n      }\r\n    });\r\n\r\n    // Format and add action information\r\n    for (const action of actions) {\r\n        actionTable.push([\r\n            chalk.white(action.name),\r\n            typeof action.handler === 'function' ? chalk.green('✓') : chalk.red('✗'),\r\n            typeof action.validate === 'function' ? chalk.green('✓') : chalk.red('✗'),\r\n            action.examples?.length > 0 ? chalk.green('✓') : chalk.red('✗'),\r\n            chalk.gray(action.similes?.join(', ') || 'none')\r\n        ]);\r\n    }\r\n\r\n    // Display the action table\r\n    console.log(`\\n${actionTable.toString()}`);\r\n\r\n    // Plugin status with a nice table\r\n    const statusTable = new Table({\r\n      style: {\r\n        border: ['cyan']\r\n      }\r\n    });\r\n\r\n    statusTable.push(\r\n      [chalk.cyan('Plugin Status')],\r\n      [chalk.white('Name    : ') + chalk.yellow('plugin-ankr')],\r\n      [chalk.white('Actions : ') + chalk.green(actions.length.toString())],\r\n      [chalk.white('Status  : ') + chalk.green('Loaded & Ready')]\r\n    );\r\n\r\n    console.log(`\\n${statusTable.toString()}\\n`);\r\n  } else {\r\n    // Stop the loader silently if splash is disabled\r\n    spinner.stop();\r\n  }\r\n\r\n  const ankrPlugin: Plugin = {\r\n    name: \"plugin-ankr\",\r\n    description: \"Ankr Plugin for web3\",\r\n    actions: actions,\r\n    evaluators: []\r\n  };\r\n\r\nexport { ankrPlugin };\r\nexport default ankrPlugin;\r\n","import { IAgentRuntime } from \"@elizaos/core\";\r\nimport { z } from \"zod\";\r\n\r\n// Environment Variables\r\nlet ENV= \"production\";\r\n\r\n// ANKR API Configuration\r\nexport const ANKR_ENDPOINTS = {\r\n    production: {\r\n        multichain: \"https://rpc.ankr.com/multichain/\",\r\n    },\r\n\r\n} as const;\r\n\r\nexport const ankrEnvSchema = z.object({\r\n    // API Configuration\r\n    ANKR_ENV: z.enum([\"production\", \"staging\"]).default(\"production\"),\r\n    ANKR_WALLET: z.string().min(1, \"ANKR_WALLET is required\"),\r\n\r\n    // Request Configuration\r\n    ANKR_MAX_RETRIES: z.string().transform(Number).default(\"3\"),\r\n    ANKR_RETRY_DELAY: z.string().transform(Number).default(\"1000\"),\r\n    ANKR_TIMEOUT: z.string().transform(Number).default(\"5000\"),\r\n\r\n    // Logging Configuration\r\n    ANKR_GRANULAR_LOG: z.boolean().default(true),\r\n    ANKR_LOG_LEVEL: z.enum([\"error\", \"warn\", \"info\", \"debug\"]).default(\"info\"),\r\n\r\n    // Runtime Configuration\r\n    ANKR_RUNTIME_CHECK_MODE: z.boolean().default(false),\r\n    ANKR_SPASH: z.boolean().default(false)\r\n});\r\n\r\nexport type ankrConfig = z.infer<typeof ankrEnvSchema>;\r\n\r\nexport function getConfig(\r\n    env: string | undefined | null = ENV ||\r\n        process.env.ANKR_ENV\r\n): ankrConfig {\r\n    ENV = env || \"production\";\r\n\r\n    return {\r\n        ANKR_ENV: (env as \"production\" | \"staging\") || \"production\",\r\n        ANKR_WALLET: process.env.ANKR_WALLET || \"\",\r\n        ANKR_MAX_RETRIES: Number(process.env.ANKR_MAX_RETRIES || \"3\"),\r\n        ANKR_RETRY_DELAY: Number(process.env.ANKR_RETRY_DELAY || \"1000\"),\r\n        ANKR_TIMEOUT: Number(process.env.ANKR_TIMEOUT || \"5000\"),\r\n        ANKR_GRANULAR_LOG: process.env.ANKR_GRANULAR_LOG === \"true\" || false,\r\n        ANKR_LOG_LEVEL: (process.env.ANKR_LOG_LEVEL as \"error\" | \"warn\" | \"info\" | \"debug\") || \"info\",\r\n        ANKR_RUNTIME_CHECK_MODE: process.env.RUNTIME_CHECK_MODE === \"true\" || false,\r\n        ANKR_SPASH: process.env.ANKR_SPASH === \"true\" || false\r\n    };\r\n}\r\n\r\nexport async function validateankrConfig(\r\n    runtime: IAgentRuntime\r\n): Promise<ankrConfig> {\r\n    try {\r\n        const envConfig = getConfig(\r\n            runtime.getSetting(\"ankr_ENV\") ?? undefined\r\n        );\r\n\r\n        const config = {\r\n            ANKR_ENV: process.env.ANKR_ENV || runtime.getSetting(\"ANKR_ENV\") || envConfig.ANKR_ENV,\r\n            ANKR_WALLET: process.env.ANKR_WALLET || runtime.getSetting(\"ANKR_WALLET\") || envConfig.ANKR_WALLET,\r\n            ANKR_MAX_RETRIES: process.env.ANKR_MAX_RETRIES || runtime.getSetting(\"ANKR_MAX_RETRIES\") || envConfig.ANKR_MAX_RETRIES.toString(),\r\n            ANKR_RETRY_DELAY: process.env.ANKR_RETRY_DELAY || runtime.getSetting(\"ANKR_RETRY_DELAY\") || envConfig.ANKR_RETRY_DELAY.toString(),\r\n            ANKR_TIMEOUT: process.env.ANKR_TIMEOUT || runtime.getSetting(\"ANKR_TIMEOUT\") || envConfig.ANKR_TIMEOUT.toString(),\r\n            ANKR_GRANULAR_LOG: process.env.ANKR_GRANULAR_LOG === \"true\" || false,\r\n            ANKR_LOG_LEVEL: process.env.ANKR_LOG_LEVEL || runtime.getSetting(\"ANKR_LOG_LEVEL\") || envConfig.ANKR_LOG_LEVEL,\r\n            ANKR_RUNTIME_CHECK_MODE: process.env.RUNTIME_CHECK_MODE === \"true\" || false,\r\n            ANKR_SPASH: process.env.ANKR_SPASH === \"true\" || false\r\n        };\r\n\r\n        return ankrEnvSchema.parse(config);\r\n    } catch (error) {\r\n        const errorMessage = error instanceof Error ? error.message : String(error);\r\n        throw new Error(`Failed to validate ANKR configuration: ${errorMessage}`);\r\n    }\r\n}\r\n\r\n// Export endpoints configuration\r\nexport const getEndpoints = (env: string = ENV) =>\r\n    ANKR_ENDPOINTS[env as keyof typeof ANKR_ENDPOINTS];\r\n\r\n// Helper to get full endpoint URL\r\nexport function getEndpointUrl(endpoint: string, env: string = ENV): string {\r\n    const endpoints = getEndpoints(env);\r\n    const parts = endpoint.split('.');\r\n    let current: Record<string, unknown> = endpoints;\r\n\r\n    for (const part of parts) {\r\n        if (current[part] === undefined) {\r\n            throw new Error(`Invalid endpoint path: ${endpoint}`);\r\n        }\r\n        current = current[part] as Record<string, unknown>;\r\n    }\r\n\r\n    if (typeof current !== 'string') {\r\n        throw new Error(`Invalid endpoint path: ${endpoint}`);\r\n    }\r\n\r\n    return current;\r\n}","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetTokenHoldersCount] ${message}`, data);\r\n        console.log(`[GetTokenHoldersCount] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetTokenHoldersCountContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;\r\n        contractAddress?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        blockchain: string;\r\n        contractAddress: string;\r\n        tokenDecimals: number;\r\n        holderCountHistory: Array<{\r\n            holderCount: number;\r\n            totalAmount: string;\r\n            totalAmountRawInteger: string;\r\n            lastUpdatedAt: string;\r\n        }>;\r\n        latestHoldersCount: number;\r\n        syncStatus: {\r\n            timestamp: number;\r\n            lag: string;\r\n            status: string;\r\n        };\r\n    };\r\n}\r\n\r\nexport const actionGetTokenHoldersCount: Action = {\r\n    name: \"GET_TOKEN_HOLDERS_COUNT_ANKR\",\r\n    similes: [\"COUNT_HOLDERS\", \"TOTAL_HOLDERS\", \"HOLDERS_COUNT\", \"NUMBER_OF_HOLDERS\"],\r\n    description: \"Get the total number of holders and historical data for a specific token.\",\r\n    // Fix the example data to match the interface\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"How many holders does [contract]0xdAC17F958D2ee523a2206206994597C13D831ec7[/contract] have? [chain]eth[/chain]\",\r\n                filters: {\r\n                    blockchain: \"eth\",\r\n                    contractAddress: \"0xdAC17F958D2ee523a2206206994597C13D831ec7\"\r\n                }\r\n            } as GetTokenHoldersCountContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Token Holders Count on ETH:\\n\\n\" +\r\n                      \"Current Holders: 500,000\\n\\n\" +\r\n                      \"Historical Data:\\n\" +\r\n                      \"1. 1/24/2024\\n\" +\r\n                      \"   Holders: 500,000\\n\" +\r\n                      \"   Total Amount: 1,000,000\\n\\n\" +\r\n                      \"Sync Status: completed (0s)\",\r\n                success: true,\r\n                data: {\r\n                    blockchain: \"eth\",\r\n                    contractAddress: \"0xdAC17F958D2ee523a2206206994597C13D831ec7\",\r\n                    tokenDecimals: 18,\r\n                    holderCountHistory: [\r\n                        {\r\n                            holderCount: 500000,\r\n                            totalAmount: \"1000000\",\r\n                            totalAmountRawInteger: \"1000000000000000000000000\",\r\n                            lastUpdatedAt: \"2024-01-24T10:30:15Z\"\r\n                        }\r\n                    ],\r\n                    latestHoldersCount: 500000,\r\n                    syncStatus: {\r\n                        timestamp: 1706093415,\r\n                        lag: \"0s\",\r\n                        status: \"completed\"\r\n                    }\r\n                }\r\n            } as GetTokenHoldersCountContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_TOKEN_HOLDERS_COUNT_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_TOKEN_HOLDERS_COUNT_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetTokenHoldersCountContent;\r\n            const parsedContent = parseAPIContent(content.text);\r\n\r\n            if (!parsedContent.chain || !parsedContent.contract) {\r\n                throw new ValidationError(\"Blockchain and contract address are required\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_TOKEN_HOLDERS_COUNT_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetTokenHoldersCountContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n            // Parse the prompt using our API content parser\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasContract: !!parsedContent.contract,\r\n                hasChain: !!parsedContent.chain,\r\n                contract: parsedContent.contract,\r\n                chain: parsedContent.chain,\r\n                matches: parsedContent.raw.matches\r\n            });\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['contract', 'chain']);\r\n\r\n            // Prepare API request parameters\r\n            const requestParams = {\r\n                blockchain: parsedContent.chain,\r\n                contractAddress: parsedContent.contract,\r\n                pageSize: 10\r\n            };\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getTokenHoldersCount\",\r\n                        params: requestParams,\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const result = response.data.result;\r\n\r\n                // Format the response text\r\n                let formattedText = `Token Holders Count on ${parsedContent.chain?.toUpperCase() || 'UNKNOWN'}:\\n\\n`;\r\n                formattedText += `Current Holders: ${result.latestHoldersCount.toLocaleString()}\\n\\n`;\r\n                formattedText += \"Historical Data:\\n\";\r\n\r\n                result.holderCountHistory.forEach((history: {\r\n                    holderCount: number;\r\n                    totalAmount: string;\r\n                    totalAmountRawInteger: string;\r\n                    lastUpdatedAt: string;\r\n                }, index: number) => {\r\n                    const date = new Date(history.lastUpdatedAt).toLocaleDateString();\r\n                    formattedText += `\r\n${index + 1}. ${date}\r\n   Holders: ${history.holderCount.toLocaleString()}\r\n   Total Amount: ${Number(history.totalAmount).toLocaleString()}`;\r\n                });\r\n\r\n                if (result.syncStatus) {\r\n                    formattedText += `\r\n\r\nSync Status: ${result.syncStatus.status} (${result.syncStatus.lag})`;\r\n                }\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: result\r\n                    } as GetTokenHoldersCountContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch token holders count: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch token holders count\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting token holders count: ${errorMessage}`,\r\n                    success: false\r\n                } as GetTokenHoldersCountContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_TOKEN_HOLDERS_COUNT_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetTokenHoldersCount;\r\n","export class HyperbolicError extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'HyperbolicError';\r\n    Object.setPrototypeOf(this, HyperbolicError.prototype);\r\n  }\r\n}\r\n\r\nexport class ConfigurationError extends HyperbolicError {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'ConfigurationError';\r\n    Object.setPrototypeOf(this, ConfigurationError.prototype);\r\n  }\r\n}\r\n\r\nexport class APIError extends HyperbolicError {\r\n  constructor(message: string, public statusCode?: number) {\r\n    super(message);\r\n    this.name = 'APIError';\r\n    Object.setPrototypeOf(this, APIError.prototype);\r\n  }\r\n}\r\n\r\nexport class ValidationError extends HyperbolicError {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'ValidationError';\r\n    Object.setPrototypeOf(this, ValidationError.prototype);\r\n  }\r\n}\r\n\r\nexport class SSHError extends HyperbolicError {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'SSHError';\r\n    Object.setPrototypeOf(this, SSHError.prototype);\r\n  }\r\n}\r\n\r\nexport class GPUError extends HyperbolicError {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = 'GPUError';\r\n    Object.setPrototypeOf(this, GPUError.prototype);\r\n  }\r\n}\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { elizaLogger } from \"@elizaos/core\";\r\nimport { APIError, ValidationError } from '../error/base';\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Types\r\n// ------------------------------------------------------------------------------------------------\r\ninterface ParsedAPIContent {\r\n    wallet?: string;\r\n    chain?: string;\r\n    contract?: string;\r\n    token?: string;\r\n    txHash?: string;\r\n    block?: string;\r\n    block2?: string;\r\n    fromTimestamp?: number;\r\n    toTimestamp?: number;\r\n    raw: {\r\n        text: string;\r\n        matches: {\r\n            wallet: boolean;\r\n            chain: boolean;\r\n            contract: boolean;\r\n            token: boolean;\r\n            txHash: boolean;\r\n            block: boolean;\r\n            block2: boolean;\r\n            fromTimestamp: boolean;\r\n            toTimestamp: boolean;\r\n        };\r\n    };\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Constants\r\n// ------------------------------------------------------------------------------------------------\r\nconst SUPPORTED_CHAINS = [\r\n    'eth', 'ethereum',\r\n    'bsc', 'bnb',\r\n    'polygon', 'matic',\r\n    'avalanche', 'avax',\r\n    'optimism', 'op',\r\n    'base'\r\n];\r\n\r\nconst ADDRESS_REGEX = /^0x[a-fA-F0-9]{40}$/;\r\nconst TX_HASH_REGEX = /^0x[a-fA-F0-9]{64}$/;\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Helper Functions\r\n// ------------------------------------------------------------------------------------------------\r\nconst normalizeChainName = (chain: string): string => {\r\n    chain = chain.toLowerCase().trim();\r\n    switch (chain) {\r\n        case 'eth':\r\n        case 'ethereum':\r\n            return 'eth';\r\n        case 'bsc':\r\n        case 'bnb':\r\n            return 'bsc';\r\n        case 'polygon':\r\n        case 'matic':\r\n            return 'polygon';\r\n        case 'avalanche':\r\n        case 'avax':\r\n            return 'avalanche';\r\n        case 'optimism':\r\n        case 'op':\r\n            return 'optimism';\r\n        case 'base':\r\n            return 'base';\r\n        default:\r\n            throw new ValidationError(`Unsupported blockchain: ${chain}`);\r\n    }\r\n};\r\n\r\nconst validateAddress = (address: string): boolean => {\r\n    return ADDRESS_REGEX.test(address);\r\n};\r\n\r\nconst validateTxHash = (hash: string): boolean => {\r\n    return TX_HASH_REGEX.test(hash);\r\n};\r\n\r\n// Add block number validation\r\nconst validateBlockNumber = (block: string): boolean => {\r\n    return /^\\d+$/.test(block);\r\n};\r\n\r\n// Add timestamp validation\r\nconst validateTimestamp = (timestamp: string): boolean => {\r\n    const num = parseInt(timestamp, 10);\r\n    return !isNaN(num) && num > 0;\r\n};\r\n\r\n// Add token ID validation\r\nconst validateTokenId = (tokenId: string): boolean => {\r\n    return tokenId.trim() !== '';  // Just ensure it's not empty\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Main Parser\r\n// ------------------------------------------------------------------------------------------------\r\n/**\r\n * Parses API-related content from text, extracting wallet addresses, chain names,\r\n * contract addresses, token addresses, and transaction hashes.\r\n *\r\n * @param text The input text containing tagged content\r\n * @returns ParsedAPIContent object containing extracted and validated information\r\n *\r\n * @example\r\n * Input text: \"Check balance for [wallet]0x123...[/wallet] on [chain]eth[/chain]\"\r\n */\r\nexport function parseAPIContent(text: string): ParsedAPIContent {\r\n    try {\r\n        const parsed: ParsedAPIContent = {\r\n            raw: {\r\n                text,\r\n                matches: {\r\n                    wallet: false,\r\n                    chain: false,\r\n                    contract: false,\r\n                    token: false,\r\n                    txHash: false,\r\n                    block: false,\r\n                    block2: false,\r\n                    fromTimestamp: false,\r\n                    toTimestamp: false\r\n                }\r\n            }\r\n        };\r\n\r\n        // Parse wallet address\r\n        const walletMatch = text.match(/\\[wallet\\]([\\s\\S]*?)\\[\\/wallet\\]/);\r\n        if (walletMatch) {\r\n            const wallet = walletMatch[1].trim();\r\n            if (!validateAddress(wallet)) {\r\n                throw new ValidationError(`Invalid wallet address: ${wallet}`);\r\n            }\r\n            parsed.wallet = wallet;\r\n            parsed.raw.matches.wallet = true;\r\n        }\r\n\r\n        // Parse chain name\r\n        const chainMatch = text.match(/\\[chain\\]([\\s\\S]*?)\\[\\/chain\\]/);\r\n        if (chainMatch) {\r\n            const chain = chainMatch[1].trim();\r\n            parsed.chain = normalizeChainName(chain);\r\n            parsed.raw.matches.chain = true;\r\n        }\r\n\r\n        // Parse contract address\r\n        const contractMatch = text.match(/\\[contract\\]([\\s\\S]*?)\\[\\/contract\\]/);\r\n        if (contractMatch) {\r\n            const contract = contractMatch[1].trim();\r\n            if (!validateAddress(contract)) {\r\n                throw new ValidationError(`Invalid contract address: ${contract}`);\r\n            }\r\n            parsed.contract = contract;\r\n            parsed.raw.matches.contract = true;\r\n        }\r\n\r\n        // Parse token ID (modified from token address)\r\n        const tokenMatch = text.match(/\\[token\\]([\\s\\S]*?)\\[\\/token\\]/);\r\n        if (tokenMatch) {\r\n            const token = tokenMatch[1].trim();\r\n            if (!validateTokenId(token)) {\r\n                throw new ValidationError(`Invalid token ID: ${token}`);\r\n            }\r\n            parsed.token = token;\r\n            parsed.raw.matches.token = true;\r\n        }\r\n\r\n        // Parse transaction hash\r\n        const txMatch = text.match(/\\[txHash\\]([\\s\\S]*?)\\[\\/txHash\\]/);\r\n        if (txMatch) {\r\n            const txHash = txMatch[1].trim();\r\n            if (!validateTxHash(txHash)) {\r\n                throw new ValidationError(`Invalid transaction hash: ${txHash}`);\r\n            }\r\n            parsed.txHash = txHash;\r\n            parsed.raw.matches.txHash = true;\r\n        }\r\n\r\n        // Parse block number\r\n        const blockMatch = text.match(/\\[block\\]([\\s\\S]*?)\\[\\/block\\]/);\r\n        if (blockMatch) {\r\n            const block = blockMatch[1].trim();\r\n            if (!validateBlockNumber(block)) {\r\n                throw new ValidationError(`Invalid block number: ${block}`);\r\n            }\r\n            parsed.block = block;\r\n            parsed.raw.matches.block = true;\r\n        }\r\n\r\n        // Parse second block number if present\r\n        const block2Match = text.match(/\\[block2\\]([\\s\\S]*?)\\[\\/block2\\]/);\r\n        if (block2Match) {\r\n            const block2 = block2Match[1].trim();\r\n            if (!validateBlockNumber(block2)) {\r\n                throw new ValidationError(`Invalid block number: ${block2}`);\r\n            }\r\n            parsed.block2 = block2;\r\n            parsed.raw.matches.block2 = true;\r\n        }\r\n\r\n        // Parse fromTimestamp\r\n        const fromTimestampMatch = text.match(/\\[fromtimestamp\\]([\\s\\S]*?)\\[\\/fromtimestamp\\]/);\r\n        if (fromTimestampMatch) {\r\n            const timestamp = fromTimestampMatch[1].trim();\r\n            if (!validateTimestamp(timestamp)) {\r\n                throw new ValidationError(`Invalid from timestamp: ${timestamp}`);\r\n            }\r\n            parsed.fromTimestamp = parseInt(timestamp, 10);\r\n            parsed.raw.matches.fromTimestamp = true;\r\n        }\r\n\r\n        // Parse toTimestamp\r\n        const toTimestampMatch = text.match(/\\[totimestamp\\]([\\s\\S]*?)\\[\\/totimestamp\\]/);\r\n        if (toTimestampMatch) {\r\n            const timestamp = toTimestampMatch[1].trim();\r\n            if (!validateTimestamp(timestamp)) {\r\n                throw new ValidationError(`Invalid to timestamp: ${timestamp}`);\r\n            }\r\n            parsed.toTimestamp = parseInt(timestamp, 10);\r\n            parsed.raw.matches.toTimestamp = true;\r\n        }\r\n\r\n        return parsed;\r\n\r\n    } catch (error) {\r\n        elizaLogger.error(\"API content parsing failed\", {\r\n            error: error instanceof Error ? error.message : String(error)\r\n        });\r\n        throw error;\r\n    }\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Validation Helpers\r\n// ------------------------------------------------------------------------------------------------\r\nexport function validateRequiredFields(\r\n    parsed: ParsedAPIContent,\r\n    required: Array<keyof ParsedAPIContent['raw']['matches']>\r\n): void {\r\n    const missing = required.filter(field => !parsed.raw.matches[field]);\r\n    if (missing.length > 0) {\r\n        throw new ValidationError(\r\n            `Missing required fields: ${missing.join(', ')}. Please provide them in the format [field]value[/field]`\r\n        );\r\n    }\r\n}\r\n\r\nexport function validateChainSupport(chain: string): void {\r\n    if (!SUPPORTED_CHAINS.includes(chain.toLowerCase())) {\r\n        throw new ValidationError(\r\n            `Unsupported blockchain: ${chain}. Supported chains: ${SUPPORTED_CHAINS.join(', ')}`\r\n        );\r\n    }\r\n}","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetTokenPrice] ${message}`, data);\r\n        console.log(`[GetTokenPrice] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetTokenPriceContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;\r\n        contractAddress?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        blockchain: string;\r\n        contractAddress: string;\r\n        usdPrice: string;\r\n        syncStatus: {\r\n            timestamp: number;\r\n            lag: string;\r\n            status: string;\r\n        };\r\n    };\r\n}\r\n\r\nexport const actionGetTokenPrice: Action = {\r\n    name: \"GET_TOKEN_PRICE_ANKR\",\r\n    similes: [\"CHECK_PRICE\", \"TOKEN_PRICE\", \"CRYPTO_PRICE\", \"PRICE_CHECK\"],\r\n    description: \"Get the current USD price for any token on eth blockchain.\",\r\n\r\n\r\n\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"What's the current price of [contract]0x8290333cef9e6d528dd5618fb97a76f268f3edd4[/contract] token [chain]eth[/chain]\",\r\n                filters: {\r\n                    blockchain: \"eth\",\r\n                    contractAddress: \"0x8290333cef9e6d528dd5618fb97a76f268f3edd4\"\r\n                }\r\n            } as GetTokenPriceContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Current token price on eth:\\n\\n\" +\r\n                      \"Price: $0.03024 USD\\n\" +\r\n                      \"Contract: 0x8290...3edd4\\n\" +\r\n                      \"Sync Status: synced (lag: -8s)\",\r\n                success: true,\r\n                data: {\r\n                    blockchain: \"eth\",\r\n                    contractAddress: \"0x8290333cef9e6d528dd5618fb97a76f268f3edd4\",\r\n                    usdPrice: \"0.030239944206509556547\",\r\n                    syncStatus: {\r\n                        timestamp: 1737760907,\r\n                        lag: \"-8s\",\r\n                        status: \"synced\"\r\n                    }\r\n                }\r\n            } as GetTokenPriceContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_TOKEN_PRICE_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_TOKEN_PRICE_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetTokenPriceContent;\r\n            const parsedContent = parseAPIContent(content.text);\r\n\r\n            if (!parsedContent.chain || !parsedContent.contract) {\r\n                throw new ValidationError(\"Blockchain and contract address are required\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_TOKEN_PRICE_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetTokenPriceContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            validateRequiredFields(parsedContent, ['contract', 'chain']);\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getTokenPrice\",\r\n                        params: {\r\n                            blockchain: parsedContent.chain,\r\n                            contractAddress: parsedContent.contract\r\n                        },\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const result = response.data.result;\r\n                const price = Number(result.usdPrice).toFixed(5);\r\n\r\n                const formattedText = `Current token price on ${parsedContent.chain}:\\n\\n` +\r\n                    `Price: $${price} USD\\n` +\r\n                    `Contract: ${result.contractAddress.slice(0, 6)}...${result.contractAddress.slice(-4)}\\n` +\r\n                    `Sync Status: ${result.syncStatus.status} (lag: ${result.syncStatus.lag})`;\r\n\r\n                if (callback) {\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: result\r\n                    } as GetTokenPriceContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch token price: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch token price\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting token price: ${errorMessage}`,\r\n                    success: false\r\n                } as GetTokenPriceContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_TOKEN_PRICE_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetTokenPrice;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetTokenTransfers] ${message}`, data);\r\n        console.log(`[GetTokenTransfers] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetTokenTransfersContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;\r\n        contractAddress?: string;\r\n        fromTimestamp?: number;\r\n        toTimestamp?: number;\r\n        pageSize?: number;\r\n        pageToken?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        transfers: Array<{\r\n            fromAddress: string;\r\n            toAddress: string;\r\n            contractAddress: string;\r\n            value: string;\r\n            valueRawInteger: string;\r\n            blockchain: string;\r\n            tokenName: string;\r\n            tokenSymbol: string;\r\n            tokenDecimals: number;\r\n            thumbnail: string;\r\n            transactionHash: string;\r\n            blockHeight: number;\r\n            timestamp: number;\r\n        }>;\r\n        syncStatus?: {\r\n            timestamp: number;\r\n            lag: string;\r\n            status: string;\r\n        };\r\n    };\r\n}\r\n\r\n// Define transfer type\r\ntype TokenTransfer = {\r\n    fromAddress: string;\r\n    toAddress: string;\r\n    contractAddress: string;\r\n    value: string;\r\n    valueRawInteger: string;\r\n    blockchain: string;\r\n    tokenName: string;\r\n    tokenSymbol: string;\r\n    tokenDecimals: number;\r\n    thumbnail: string;\r\n    transactionHash: string;\r\n    blockHeight: number;\r\n    timestamp: number;\r\n};\r\n\r\nexport const actionGetTokenTransfers: Action = {\r\n    name: \"GET_TOKEN_TRANSFERS_ANKR\",\r\n    similes: [\"LIST_TRANSFERS\", \"SHOW_TRANSFERS\", \"TOKEN_MOVEMENTS\", \"TRANSFER_HISTORY\"],\r\n    description: \"Get transfer history for a specific token or address on eth.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me recent contract [contract]0xff970a61a04b1ca14834a43f5de4533ebddb5cc8[/contract] transfers [chain]eth[/chain] from [fromtimestamp]1655197483[/fromtimestamp] to [totimestamp]1656061483[/totimestamp]\",\r\n                filters: {\r\n                    blockchain: \"eth\",\r\n                    contractAddress: \"0xff970a61a04b1ca14834a43f5de4533ebddb5cc8\",\r\n                    pageSize: 5,\r\n                    fromTimestamp: 1655197483,\r\n                    toTimestamp: 1656061483\r\n                }\r\n            } as GetTokenTransfersContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the 5 most recent USDC transfers on eth:\\n\\n\" +\r\n                      \"1. Transfer\\n\" +\r\n                      \"   From: 0x1234...5678\\n\" +\r\n                      \"   To: 0xabcd...ef01\\n\" +\r\n                      \"   Amount: 10,000 USDC\\n\" +\r\n                      \"   Time: 2024-01-24 10:30:15\\n\\n\" +\r\n                      \"2. Transfer\\n\" +\r\n                      \"   From: 0x9876...5432\\n\" +\r\n                      \"   To: 0xfedc...ba98\\n\" +\r\n                      \"   Amount: 5,000 USDC\\n\" +\r\n                      \"   Time: 2024-01-24 10:29:45\",\r\n                success: true,\r\n                data: {\r\n                    transfers: [{\r\n                        fromAddress: \"0x1234567890123456789012345678901234567890\",\r\n                        toAddress: \"0xabcdef0123456789abcdef0123456789abcdef01\",\r\n                        contractAddress: \"0xff970a61a04b1ca14834a43f5de4533ebddb5cc8\",\r\n                        value: \"10000.0\",\r\n                        valueRawInteger: \"10000000000000000000000\",\r\n                        blockchain: \"eth\",\r\n                        tokenName: \"USD Coin\",\r\n                        tokenSymbol: \"USDC\",\r\n                        tokenDecimals: 6,\r\n                        thumbnail: \"\",\r\n                        transactionHash: \"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\",\r\n                        blockHeight: 123456789,\r\n                        timestamp: 1706093415\r\n                    }],\r\n                    syncStatus: {\r\n                        timestamp: 1706093415,\r\n                        lag: \"0s\",\r\n                        status: \"completed\"\r\n                    }\r\n                }\r\n            } as GetTokenTransfersContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_TOKEN_TRANSFERS_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_TOKEN_TRANSFERS_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetTokenTransfersContent;\r\n            const parsedContent = parseAPIContent(content.text);\r\n\r\n            if (!parsedContent.chain || !parsedContent.contract) {\r\n                throw new ValidationError(\"Blockchain and contract address are required\");\r\n            }\r\n\r\n            if (parsedContent.fromTimestamp && parsedContent.toTimestamp) {\r\n                if (parsedContent.fromTimestamp > parsedContent.toTimestamp) {\r\n                    throw new ValidationError(\"From timestamp must be less than to timestamp\");\r\n                }\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_TOKEN_TRANSFERS_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetTokenTransfersContent;\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            // Parse the prompt using our API content parser\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasContract: !!parsedContent.contract,\r\n                hasChain: !!parsedContent.chain,\r\n                hasFromTimestamp: !!parsedContent.fromTimestamp,\r\n                hasToTimestamp: !!parsedContent.toTimestamp,\r\n                contract: parsedContent.contract,\r\n                chain: parsedContent.chain,\r\n                fromTimestamp: parsedContent.fromTimestamp,\r\n                toTimestamp: parsedContent.toTimestamp\r\n            });\r\n\r\n            validateRequiredFields(parsedContent, ['contract', 'chain', 'fromTimestamp', 'toTimestamp']);\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getTokenTransfers\",\r\n                        params: {\r\n                            address: parsedContent.contract,\r\n                            blockchain: [parsedContent.chain],\r\n                            fromTimestamp: parsedContent.fromTimestamp,\r\n                            toTimestamp: parsedContent.toTimestamp,\r\n                            pageSize: messageContent.filters?.pageSize || 10\r\n                        },\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const result = response.data.result;\r\n\r\n                let formattedText = `Token Transfers on ${parsedContent.chain?.toUpperCase() || 'UNKNOWN'}:\\n\\n`;\r\n\r\n                result.transfers.forEach((transfer: TokenTransfer, index: number) => {\r\n                    const date = new Date(transfer.timestamp * 1000).toLocaleString();\r\n                    const value = Number(transfer.value).toLocaleString();\r\n\r\n                    formattedText += `${index + 1}. Transfer\\n`;\r\n                    formattedText += `   From: ${transfer.fromAddress.slice(0, 6)}...${transfer.fromAddress.slice(-4)}\\n`;\r\n                    formattedText += `   To: ${transfer.toAddress.slice(0, 6)}...${transfer.toAddress.slice(-4)}\\n`;\r\n                    formattedText += `   Amount: ${value} ${transfer.tokenSymbol}\\n`;\r\n                    formattedText += `   Token: ${transfer.tokenName}\\n`;\r\n                    formattedText += `   Time: ${date}\\n\\n`;\r\n                });\r\n\r\n                if (result.syncStatus) {\r\n                    formattedText += `\\nSync Status: ${result.syncStatus.status} (lag: ${result.syncStatus.lag})\\n`;\r\n                }\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            transfers: result.transfers,\r\n                            nextPageToken: result.nextPageToken\r\n                        }\r\n                    } as GetTokenTransfersContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch token transfers: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch token transfers\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting token transfers: ${errorMessage}`,\r\n                    success: false\r\n                } as GetTokenTransfersContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_TOKEN_TRANSFERS_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetTokenTransfers;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetAccountBalance] ${message}`, data);\r\n        console.log(`[GetAccountBalance] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n\r\ninterface GetAccountBalanceContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string[];\r\n        walletAddress?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        address: string;\r\n        balances: Array<{\r\n            blockchain: string;\r\n            tokenName: string;\r\n            symbol: string;\r\n            balance: string;\r\n            balanceRawInteger: string;\r\n            balanceUsd: string;\r\n            tokenDecimals: number;\r\n            tokenType: string;\r\n            contractAddress?: string;\r\n        }>;\r\n    };\r\n}\r\n\r\n// Add interface for balance\r\ninterface TokenBalance {\r\n    blockchain: string;\r\n    contractAddress?: string;\r\n    tokenName: string;\r\n    tokenSymbol: string;\r\n    tokenDecimals: number;\r\n    tokenType: string;\r\n    holderAddress: string;\r\n    balance: string;\r\n    balanceRawInteger: string;\r\n    balanceUsd: string;\r\n    tokenPrice: string;\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Core Action implementation\r\n// ------------------------------------------------------------------------------------------------\r\nexport const actionGetAccountBalance: Action = {\r\n    name: \"GET_ACCOUNT_BALANCE_ANKR\",\r\n    similes: [\"CHECK_BALANCE\", \"SHOW_BALANCE\", \"VIEW_BALANCE\", \"GET_WALLET_BALANCE\"],\r\n    description: \"Retrieve account balance information across multiple blockchains.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me the balance for wallet [wallet]0x1234567890123456789012345678901234567890[/wallet] on [chain]eth[/chain]\",\r\n                filters: {\r\n                    blockchain: [\"eth\"],\r\n                    walletAddress: \"0x1234567890123456789012345678901234567890\"\r\n                }\r\n            } as GetAccountBalanceContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the balances for wallet 0x1234...7890:\\n\\n\" +\r\n                      \"1. ETH (Native)\\n\" +\r\n                      \"   Balance: 1.5 ETH\\n\" +\r\n                      \"   USD Value: $3,000.00\\n\\n\" +\r\n                      \"2. USDC (ERC20)\\n\" +\r\n                      \"   Balance: 1000 USDC\\n\" +\r\n                      \"   Contract: 0xa0b8...c4d5\\n\" +\r\n                      \"   USD Value: $1,000.00\",\r\n                success: true,\r\n                data: {\r\n                    address: \"0x1234567890123456789012345678901234567890\",\r\n                    balances: [{\r\n                        blockchain: \"eth\",\r\n                        tokenName: \"Ethereum\",\r\n                        symbol: \"ETH\",\r\n                        balance: \"1.5\",\r\n                        balanceRawInteger: \"1500000000000000000\",\r\n                        balanceUsd: \"3000.00\",\r\n                        tokenDecimals: 18,\r\n                        tokenType: \"NATIVE\"\r\n                    }, {\r\n                        blockchain: \"eth\",\r\n                        tokenName: \"USD Coin\",\r\n                        symbol: \"USDC\",\r\n                        balance: \"1000\",\r\n                        balanceRawInteger: \"1000000000\",\r\n                        balanceUsd: \"1000.00\",\r\n                        tokenDecimals: 6,\r\n                        tokenType: \"ERC20\",\r\n                        contractAddress: \"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\"\r\n                    }]\r\n                }\r\n            } as GetAccountBalanceContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_ACCOUNT_BALANCE_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_ACCOUNT_BALANCE_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetAccountBalanceContent;\r\n\r\n            if (!content.filters?.walletAddress) {\r\n                throw new ValidationError(\"Wallet address is required\");\r\n            }\r\n\r\n            if (content.filters?.blockchain && !Array.isArray(content.filters.blockchain)) {\r\n                throw new ValidationError(\"Blockchain must be an array\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_ACCOUNT_BALANCE_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetAccountBalanceContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n\r\n            console.log(\"Debug - Message content details:\", {\r\n                hasText: !!messageContent?.text,\r\n                hasFilters: !!messageContent?.filters,\r\n                textContent: messageContent?.text,\r\n                contentType: typeof messageContent?.text\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasWallet: !!parsedContent.wallet,\r\n                hasChain: !!parsedContent.chain,\r\n                wallet: parsedContent.wallet,\r\n                chain: parsedContent.chain,\r\n                matches: parsedContent.raw.matches\r\n            });\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['wallet', 'chain']);\r\n\r\n            // Prepare API request parameters\r\n            const requestParams = {\r\n                blockchain: [parsedContent.chain],\r\n                walletAddress: parsedContent.wallet\r\n            };\r\n\r\n            console.log(\"Debug - API request parameters:\", {\r\n                params: requestParams,\r\n                endpoint: ANKR_ENDPOINTS.production.multichain\r\n            });\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getAccountBalance\",\r\n                        params: requestParams,\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const balances = response.data.result.assets;\r\n                const address = parsedContent.wallet;\r\n\r\n                // Format the response text\r\n                let formattedText = `Here are the balances for wallet ${address?.slice(0, 6)}...${address?.slice(-4)}:\\n\\n`;\r\n\r\n                // Use the interface instead of any\r\n                balances.forEach((balance: TokenBalance, index: number) => {\r\n                    formattedText += `${index + 1}. ${balance.tokenName} (${balance.tokenType})\\n`;\r\n                    formattedText += `   Balance: ${balance.balance} ${balance.tokenSymbol}\\n`;\r\n                    if (balance.contractAddress) {\r\n                        formattedText += `   Contract: ${balance.contractAddress.slice(0, 6)}...${balance.contractAddress.slice(-4)}\\n`;\r\n                    }\r\n                    formattedText += `   USD Value: $${Number.parseFloat(balance.balanceUsd).toFixed(2)}\\n\\n`;\r\n                });\r\n\r\n                // ------------------------------------------------------------------------------------------------\r\n                // Core Callback logic\r\n                // ------------------------------------------------------------------------------------------------\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            address,\r\n                            balances\r\n                        }\r\n                    } as GetAccountBalanceContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch balance data: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch balance data\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting account balance: ${errorMessage}`,\r\n                    success: false\r\n                } as GetAccountBalanceContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_ACCOUNT_BALANCE_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetAccountBalance;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetTransactionsByAddress] ${message}`, data);\r\n        console.log(`[GetTransactionsByAddress] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetTransactionsByAddressContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;\r\n        address?: string;\r\n        pageSize?: number;\r\n        includeLogs?: boolean;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        nextPageToken?: string;\r\n        transactions: Array<{\r\n            blockHash: string;\r\n            blockNumber: string;\r\n            from: string;\r\n            to: string;\r\n            hash: string;\r\n            value: string;\r\n            gas: string;\r\n            gasPrice: string;\r\n            gasUsed: string;\r\n            input: string;\r\n            nonce: string;\r\n            timestamp: string;\r\n            status: string;\r\n            blockchain: string;\r\n            logs?: Array<{\r\n                address: string;\r\n                topics: string[];\r\n                data: string;\r\n                blockNumber: string;\r\n                transactionHash: string;\r\n                logIndex: string;\r\n                timestamp: string;\r\n            }>;\r\n        }>;\r\n        syncStatus?: {\r\n            timestamp: number;\r\n            lag: string;\r\n            status: string;\r\n        };\r\n    };\r\n}\r\n\r\n// Define transaction type\r\ntype Transaction = {\r\n    blockHash: string;\r\n    blockNumber: string;\r\n    from: string;\r\n    to: string;\r\n    hash: string;\r\n    value: string;\r\n    gas: string;\r\n    gasPrice: string;\r\n    gasUsed: string;\r\n    input: string;\r\n    nonce: string;\r\n    timestamp: string;\r\n    status: string;\r\n    blockchain: string;\r\n    logs?: Array<{\r\n        address: string;\r\n        topics: string[];\r\n        data: string;\r\n        blockNumber: string;\r\n        transactionHash: string;\r\n        logIndex: string;\r\n        timestamp: string;\r\n    }>;\r\n};\r\n\r\nexport const actionGetTransactionsByAddress: Action = {\r\n    name: \"GET_TRANSACTIONS_BY_ADDRESS_ANKR\",\r\n    similes: [\"LIST_TXS\", \"SHOW_TXS\", \"VIEW_TRANSACTIONS\", \"GET_ADDRESS_TXS\"],\r\n    description: \"Get transactions for a specific address on the blockchain\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me the latest transactions for address [contract]0xd8da6bf26964af9d7eed9e03e53415d37aa96045[/contract] [chain]eth[/chain]\",\r\n                filters: {\r\n                    blockchain: \"eth\",\r\n                    address: \"0xd8da6bf26964af9d7eed9e03e53415d37aa96045\",\r\n                    pageSize: 2,\r\n                    includeLogs: true\r\n                }\r\n            } as GetTransactionsByAddressContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the latest transactions for the address on eth:\\n\\n\" +\r\n                      \"1. Transfer Out\\n\" +\r\n                      \"   To: 0x1234...5678\\n\" +\r\n                      \"   Amount: 1.5 ETH\\n\" +\r\n                      \"   Time: 2024-01-24 10:30:15\\n\" +\r\n                      \"   Status: Success\\n\\n\" +\r\n                      \"2. Contract Interaction\\n\" +\r\n                      \"   Contract: 0xabcd...ef01 (Uniswap V3)\\n\" +\r\n                      \"   Method: swapExactTokensForTokens\\n\" +\r\n                      \"   Time: 2024-01-24 10:15:22\\n\" +\r\n                      \"   Status: Success\",\r\n                success: true,\r\n                data: {\r\n                    transactions: [{\r\n                        blockchain: \"eth\",\r\n                        from: \"0xd8da6bf26964af9d7eed9e03e53415d37aa96045\",\r\n                        to: \"0x1234567890123456789012345678901234567890\",\r\n                        hash: \"0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890\",\r\n                        value: \"1500000000000000000\",\r\n                        gas: \"21000\",\r\n                        gasPrice: \"100000000\",\r\n                        gasUsed: \"21000\",\r\n                        timestamp: \"2024-01-24T10:30:15Z\",\r\n                        status: \"1\",\r\n                        blockNumber: \"123456789\",\r\n                        blockHash: \"0x9876543210fedcba9876543210fedcba9876543210fedcba9876543210fedcba\"\r\n                    }]\r\n                }\r\n            } as GetTransactionsByAddressContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_TRANSACTIONS_BY_ADDRESS_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_TRANSACTIONS_BY_ADDRESS_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetTransactionsByAddressContent;\r\n            const parsedContent = parseAPIContent(content.text);\r\n\r\n            if (!parsedContent.chain || !parsedContent.contract) {\r\n                throw new ValidationError(\"Blockchain and address are required\");\r\n            }\r\n\r\n            // Validate pageSize if provided\r\n            if (content.filters?.pageSize && (content.filters.pageSize < 1 || content.filters.pageSize > 100)) {\r\n                throw new ValidationError(\"Page size must be between 1 and 100\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_TRANSACTIONS_BY_ADDRESS_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetTransactionsByAddressContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n\r\n            console.log(\"Debug - Message content details:\", {\r\n                hasText: !!messageContent?.text,\r\n                hasFilters: !!messageContent?.filters,\r\n                textContent: messageContent?.text,\r\n                contentType: typeof messageContent?.text\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            // Parse the prompt using our API content parser\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasContract: !!parsedContent.contract,\r\n                hasChain: !!parsedContent.chain,\r\n                contract: parsedContent.contract,\r\n                chain: parsedContent.chain\r\n            });\r\n\r\n            validateRequiredFields(parsedContent, ['contract', 'chain']);\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getTransactionsByAddress\",\r\n                        params: {\r\n                            blockchain: [parsedContent.chain],\r\n                            address: parsedContent.contract,\r\n                            pageSize: messageContent.filters?.pageSize || 5,\r\n                            includeLogs: messageContent.filters?.includeLogs || true\r\n                        },\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const result = response.data.result;\r\n                let formattedText = `Transactions for ${parsedContent.contract} on ${parsedContent.chain?.toUpperCase() || 'UNKNOWN'}:\\n\\n`;\r\n\r\n                result.transactions.forEach((tx: Transaction, index: number) => {\r\n                    const date = new Date(Number.parseInt(tx.timestamp, 16) * 1000).toLocaleString();\r\n                    const value = Number.parseInt(tx.value, 16) / 1e18;\r\n                    const status = tx.status === \"0x1\" ? \"Success\" : \"Failed\";\r\n\r\n                    formattedText += `${index + 1}. Transaction\\n`;\r\n                    formattedText += `   Hash: ${tx.hash.slice(0, 6)}...${tx.hash.slice(-4)}\\n`;\r\n                    formattedText += `   From: ${tx.from.slice(0, 6)}...${tx.from.slice(-4)}\\n`;\r\n                    formattedText += `   To: ${tx.to.slice(0, 6)}...${tx.to.slice(-4)}\\n`;\r\n                    formattedText += `   Value: ${value.toFixed(4)} ETH\\n`;\r\n                    formattedText += `   Status: ${status}\\n`;\r\n                    formattedText += `   Time: ${date}\\n\\n`;\r\n                });\r\n\r\n                if (callback) {\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            transactions: result.transactions,\r\n                            nextPageToken: result.nextPageToken,\r\n                            syncStatus: result.syncStatus\r\n                        }\r\n                    } as GetTransactionsByAddressContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch transactions: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch transactions\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting transactions: ${errorMessage}`,\r\n                    success: false\r\n                } as GetTransactionsByAddressContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_TRANSACTIONS_BY_ADDRESS_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetTransactionsByAddress;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetTransactionsByHash] ${message}`, data);\r\n        console.log(`[GetTransactionsByHash] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetTransactionsByHashContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;\r\n        transactionHash?: string;\r\n        includeLogs?: boolean;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        transactions: Array<{\r\n            blockHash: string;\r\n            blockNumber: string;\r\n            blockchain: string;\r\n            from: string;\r\n            to: string;\r\n            hash: string;\r\n            value: string;\r\n            gas: string;\r\n            gasPrice: string;\r\n            gasUsed: string;\r\n            input: string;\r\n            nonce: string;\r\n            timestamp: string;\r\n            status: string;\r\n            type: string;\r\n            v: string;\r\n            r: string;\r\n            s: string;\r\n            transactionIndex: string;\r\n            cumulativeGasUsed: string;\r\n        }>;\r\n        syncStatus?: {\r\n            timestamp: number;\r\n            lag: string;\r\n            status: string;\r\n        } | null;\r\n    };\r\n}\r\n\r\nexport const actionGetTransactionsByHash: Action = {\r\n    name: \"GET_TRANSACTIONS_BY_HASH_ANKR\",\r\n    similes: [\"GET_TX\", \"SHOW_TRANSACTION\", \"VIEW_TX\", \"TRANSACTION_DETAILS\"],\r\n    description: \"Get detailed information about a transaction by its hash\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me details for transaction [txHash]0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef[/txHash] [chain]eth[/chain]\",\r\n                filters: {\r\n                    blockchain: \"eth\",\r\n                    transactionHash: \"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\",\r\n                    includeLogs: true\r\n                }\r\n            } as GetTransactionsByHashContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the details for the transaction on eth:\\n\\n\" +\r\n                      \"Transaction: 0x1234...cdef\\n\" +\r\n                      \"Status: Success\\n\" +\r\n                      \"From: 0xabcd...ef01\\n\" +\r\n                      \"To: 0x9876...5432\\n\" +\r\n                      \"Value: 1.5 ETH\\n\" +\r\n                      \"Gas Used: 150,000\\n\" +\r\n                      \"Gas Price: 0.1 Gwei\\n\" +\r\n                      \"Block: 123456789\\n\" +\r\n                      \"Timestamp: 2024-01-24 10:30:15\",\r\n                success: true,\r\n                data: {\r\n                    transactions: [{\r\n                        blockchain: \"eth\",\r\n                        from: \"0xabcdef0123456789abcdef0123456789abcdef01\",\r\n                        to: \"0x9876543210987654321098765432109876543210\",\r\n                        hash: \"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\",\r\n                        value: \"1500000000000000000\",\r\n                        gas: \"21000\",\r\n                        gasPrice: \"100000000\",\r\n                        gasUsed: \"21000\",\r\n                        timestamp: \"2024-01-24T10:30:15Z\",\r\n                        status: \"1\",\r\n                        blockNumber: \"123456789\",\r\n                        blockHash: \"0xfedcba0987654321fedcba0987654321fedcba0987654321fedcba0987654321\"\r\n                    }]\r\n                }\r\n            } as GetTransactionsByHashContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_TRANSACTIONS_BY_HASH_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_TRANSACTIONS_BY_HASH_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetTransactionsByHashContent;\r\n            const parsedContent = parseAPIContent(content.text);\r\n\r\n            if (!parsedContent.chain || !parsedContent.txHash) {\r\n                throw new ValidationError(\"Blockchain and transaction hash are required\");\r\n            }\r\n\r\n            // Validate transaction hash format\r\n            if (!/^0x[a-fA-F0-9]{64}$/.test(parsedContent.txHash)) {\r\n                throw new ValidationError(\"Invalid transaction hash format\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_TRANSACTIONS_BY_HASH_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetTransactionsByHashContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n\r\n            console.log(\"Debug - Message content details:\", {\r\n                hasText: !!messageContent?.text,\r\n                hasFilters: !!messageContent?.filters,\r\n                textContent: messageContent?.text,\r\n                contentType: typeof messageContent?.text\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            // Parse the prompt using our API content parser\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasTx: !!parsedContent.txHash,\r\n                hasChain: !!parsedContent.chain,\r\n                tx: parsedContent.txHash,\r\n                chain: parsedContent.chain\r\n            });\r\n\r\n            validateRequiredFields(parsedContent, ['txHash', 'chain']);\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getTransactionsByHash\",\r\n                        params: {\r\n                            blockchain: parsedContent.chain,\r\n                            transactionHash: parsedContent.txHash,\r\n                            includeLogs: true\r\n                        },\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const transaction = response.data.result.transactions[0];\r\n                const timestamp = new Date(Number.parseInt(transaction.timestamp, 16) * 1000).toLocaleString();\r\n                const value = Number.parseInt(transaction.value, 16) / 1e18;\r\n                const gasPrice = Number.parseInt(transaction.gasPrice, 16) / 1e9;\r\n                const gasUsed = Number.parseInt(transaction.gasUsed, 16);\r\n                const blockNumber = Number.parseInt(transaction.blockNumber, 16);\r\n                const status = transaction.status === \"0x1\" ? \"Success\" : \"Failed\";\r\n\r\n                let formattedText = `Transaction Details on ${parsedContent.chain?.toUpperCase() || 'UNKNOWN'}:\\n\\n`;\r\n                formattedText += `Hash: ${transaction.hash}\\n`;\r\n                formattedText += `Status: ${status}\\n`;\r\n                formattedText += `From: ${transaction.from.slice(0, 6)}...${transaction.from.slice(-4)}\\n`;\r\n                formattedText += `To: ${transaction.to.slice(0, 6)}...${transaction.to.slice(-4)}\\n`;\r\n                formattedText += `Value: ${value.toFixed(6)} ETH\\n`;\r\n                formattedText += `Gas Used: ${gasUsed.toLocaleString()}\\n`;\r\n                formattedText += `Gas Price: ${gasPrice.toFixed(2)} Gwei\\n`;\r\n                formattedText += `Block: ${blockNumber.toLocaleString()}\\n`;\r\n                formattedText += `Time: ${timestamp}`;\r\n\r\n                if (callback) {\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: response.data.result\r\n                    } as GetTransactionsByHashContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch transaction: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch transaction\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting transaction: ${errorMessage}`,\r\n                    success: false\r\n                } as GetTransactionsByHashContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_TRANSACTIONS_BY_HASH_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetTransactionsByHash;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetBlockchainStats] ${message}`, data);\r\n        console.log(`[GetBlockchainStats] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n\r\ninterface GetBlockchainStatsContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string[];\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        stats: Array<{\r\n            blockchain: string;\r\n            latestBlock: number;\r\n            totalTransactions: string;\r\n            totalAccounts: string;\r\n            tps: number;\r\n            gasPrice: string;\r\n            marketCap: string;\r\n            totalValueLocked: string;\r\n        }>;\r\n    };\r\n}\r\n\r\n// Update the interface to match actual API response\r\ninterface AnkrBlockchainStats {\r\n    blockchain: string;\r\n    totalTransactionsCount: number;\r\n    totalEventsCount: number;\r\n    latestBlockNumber: number;\r\n    blockTimeMs: number;\r\n    nativeCoinUsdPrice: string;\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Core Action implementation\r\n// ------------------------------------------------------------------------------------------------\r\nexport const actionGetBlockchainStats: Action = {\r\n    name: \"GET_BLOCKCHAIN_STATS_ANKR\",\r\n    similes: [\"CHAIN_STATS\", \"BLOCKCHAIN_INFO\", \"NETWORK_STATS\", \"CHAIN_METRICS\"],\r\n    description: \"Retrieve statistical information about specified blockchain networks.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me stats for [chain]eth[/chain] blockchain\",\r\n                filters: {\r\n                    blockchain: [\"eth\"]\r\n                }\r\n            } as GetBlockchainStatsContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the current statistics for Ethereum:\\n\\n\" +\r\n                      \"Latest Block: 19,234,567\\n\" +\r\n                      \"Total Transactions: 2.5B\\n\" +\r\n                      \"Active Accounts: 245M\\n\" +\r\n                      \"TPS: 15.5\\n\" +\r\n                      \"Gas Price: 25 Gwei\\n\" +\r\n                      \"Market Cap: $250B\\n\" +\r\n                      \"Total Value Locked: $45B\",\r\n                success: true,\r\n                data: {\r\n                    stats: [{\r\n                        blockchain: \"eth\",\r\n                        latestBlock: 19234567,\r\n                        totalTransactions: \"2500000000\",\r\n                        totalAccounts: \"245000000\",\r\n                        tps: 15.5,\r\n                        gasPrice: \"25000000000\",\r\n                        marketCap: \"250000000000\",\r\n                        totalValueLocked: \"45000000000\"\r\n                    }]\r\n                }\r\n            } as GetBlockchainStatsContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_BLOCKCHAIN_STATS_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_BLOCKCHAIN_STATS_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetBlockchainStatsContent;\r\n\r\n            if (content.filters?.blockchain && !Array.isArray(content.filters.blockchain)) {\r\n                throw new ValidationError(\"Blockchain must be an array\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_BLOCKCHAIN_STATS_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetBlockchainStatsContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n\r\n            console.log(\"Debug - Message content details:\", {\r\n                hasText: !!messageContent?.text,\r\n                hasFilters: !!messageContent?.filters,\r\n                textContent: messageContent?.text,\r\n                contentType: typeof messageContent?.text\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasChain: !!parsedContent.chain,\r\n                chain: parsedContent.chain,\r\n                matches: parsedContent.raw.matches\r\n            });\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['chain']);\r\n\r\n            // Prepare API request parameters\r\n            const requestParams = {\r\n                blockchain: parsedContent.chain  // Changed from array to string\r\n            };\r\n\r\n            console.log(\"Debug - API request parameters:\", {\r\n                params: requestParams,\r\n                endpoint: ANKR_ENDPOINTS.production.multichain\r\n            });\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getBlockchainStats\",\r\n                        params: requestParams,\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const stats = response.data.result.stats;\r\n\r\n                // Format the response text\r\n                let formattedText = \"\";\r\n                for (const stat of stats) {\r\n                    formattedText += `Statistics for ${stat.blockchain.toUpperCase()}:\\n\\n`;\r\n                    formattedText += `Latest Block: ${stat.latestBlockNumber.toLocaleString()}\\n`;\r\n                    formattedText += `Total Transactions: ${(stat.totalTransactionsCount / 1e9).toFixed(1)}B\\n`;\r\n                    formattedText += `Total Events: ${(stat.totalEventsCount / 1e9).toFixed(1)}B\\n`;\r\n                    formattedText += `Block Time: ${(stat.blockTimeMs / 1000).toFixed(1)} seconds\\n`;\r\n                    formattedText += `Native Coin Price: $${Number(stat.nativeCoinUsdPrice).toFixed(2)}\\n\\n`;\r\n                }\r\n\r\n                // Update callback data structure to match new format\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            stats: stats.map((stat: AnkrBlockchainStats) => ({\r\n                                blockchain: stat.blockchain,\r\n                                latestBlock: stat.latestBlockNumber,\r\n                                totalTransactions: stat.totalTransactionsCount.toString(),\r\n                                totalEvents: stat.totalEventsCount.toString(),\r\n                                blockTime: stat.blockTimeMs / 1000,\r\n                                nativeCoinPrice: stat.nativeCoinUsdPrice\r\n                            }))\r\n                        }\r\n                    } as GetBlockchainStatsContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch blockchain stats: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch blockchain stats\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting blockchain stats: ${errorMessage}`,\r\n                    success: false\r\n                } as GetBlockchainStatsContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_BLOCKCHAIN_STATS_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetBlockchainStats;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetCurrencies] ${message}`, data);\r\n        console.log(`[GetCurrencies] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n\r\ninterface GetCurrenciesContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;\r\n        pageSize?: number;\r\n        pageToken?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        currencies: Array<{\r\n            blockchain: string;\r\n            address: string;\r\n            name: string;\r\n            symbol: string;\r\n            decimals: number;\r\n            thumbnail?: string;\r\n        }>;\r\n        syncStatus?: {\r\n            timestamp: number;\r\n            lag: string;\r\n            status: string;\r\n        };\r\n    };\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Core Action implementation\r\n// ------------------------------------------------------------------------------------------------\r\nexport const actionGetCurrencies: Action = {\r\n    name: \"GET_CURRENCIES_ANKR\",\r\n    similes: [\"LIST_CURRENCIES\", \"SHOW_CURRENCIES\", \"VIEW_CURRENCIES\", \"FETCH_CURRENCIES\"],\r\n    description: \"Retrieve information about currencies on specified blockchain networks.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me the top currencies on [chain]eth[/chain]\",\r\n                filters: {\r\n                    blockchain: \"eth\",\r\n                    pageSize: 5,\r\n                    pageToken: \"eyJsYXN0X2JhbGFuY2UiOiIyIn0=\"\r\n                }\r\n            } as GetCurrenciesContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the top currencies on Ethereum:\\n\\n\" +\r\n                      \"1. Ethereum (ETH)\\n\" +\r\n                      \"   Market Cap: $250B\\n\" +\r\n                      \"   Holders: 2.5M\\n\" +\r\n                      \"   Total Supply: 120.5M ETH\\n\\n\" +\r\n                      \"2. USD Coin (USDC)\\n\" +\r\n                      \"   Contract: 0xa0b8...c4d5\\n\" +\r\n                      \"   Market Cap: $45B\\n\" +\r\n                      \"   Holders: 1.2M\\n\" +\r\n                      \"   Total Supply: 45B USDC\",\r\n                success: true,\r\n                data: {\r\n                    currencies: [\r\n                        {\r\n                            blockchain: \"eth\",\r\n                            address: \"0x0000000000000000000000000000000000000000\",\r\n                            name: \"Ethereum\",\r\n                            symbol: \"ETH\",\r\n                            decimals: 18\r\n                        }\r\n                    ]\r\n                }\r\n            } as GetCurrenciesContent\r\n        } as ActionExample\r\n    ]],\r\n\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_CURRENCIES_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_CURRENCIES_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetCurrenciesContent;\r\n\r\n            if (!content.filters?.blockchain) {\r\n                throw new ValidationError(\"Blockchain is required\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_CURRENCIES_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetCurrenciesContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasChain: !!parsedContent.chain,\r\n                chain: parsedContent.chain,\r\n                matches: parsedContent.raw.matches\r\n            });\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['chain']);\r\n\r\n            // Prepare API request parameters\r\n            const requestParams = {\r\n                blockchain: parsedContent.chain,\r\n                pageSize: messageContent.filters?.pageSize ?? 5\r\n            };\r\n\r\n            console.log(\"Debug - API request parameters:\", {\r\n                params: requestParams,\r\n                endpoint: ANKR_ENDPOINTS.production.multichain\r\n            });\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getCurrencies\",\r\n                        params: requestParams,\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const currencies = response.data.result.currencies;\r\n\r\n                // Format the response text\r\n                let formattedText = `Here are the top currencies from ${parsedContent.chain ? parsedContent.chain[0].toUpperCase() : 'Unknown Chain'}:\\n\\n`;\r\n\r\n                let index = 0;\r\n                for (const currency of currencies) {\r\n                    formattedText += [\r\n                        `${index + 1}. ${currency.name} (${currency.symbol})`,\r\n                        currency.address ? `   Contract: ${currency.address.slice(0, 6)}...${currency.address.slice(-4)}` : '',\r\n                        `   Decimals: ${currency.decimals}`,\r\n                        currency.thumbnail ? `   Logo: ${currency.thumbnail}` : '',\r\n                        '',\r\n                        ''\r\n                    ].filter(Boolean).join('\\n');\r\n                    index++;\r\n                }\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            currencies,\r\n                            syncStatus: response.data.result.syncStatus\r\n                        }\r\n                    } as GetCurrenciesContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch currencies data: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch currencies data\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting currencies: ${errorMessage}`,\r\n                    success: false\r\n                } as GetCurrenciesContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_CURRENCIES_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetCurrencies;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetInteractions] ${message}`, data);\r\n        console.log(`[GetInteractions] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n\r\ninterface GetInteractionsContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;  // Changed from string[] to string\r\n        address?: string;     // Changed from walletAddress\r\n        pageSize?: number;\r\n        pageToken?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        interactions: Array<{\r\n            blockchain: string;\r\n            transactionHash: string;\r\n            blockNumber: number;\r\n            timestamp: string;\r\n            from: string;\r\n            to: string;\r\n            value: string;\r\n            gasPrice: string;\r\n            gasUsed: string;\r\n            methodName?: string;\r\n            logs: Array<{\r\n                address: string;\r\n                topics: string[];\r\n                data: string;\r\n                logIndex: number;\r\n            }>;\r\n        }>;\r\n        nextPageToken?: string;\r\n    };\r\n}\r\n\r\ninterface AnkrAPIResponse {\r\n    blockchains: string[];\r\n    syncStatus: {\r\n        timestamp: number;\r\n        lag: string;\r\n        status: string;\r\n    };\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Core Action implementation\r\n// ------------------------------------------------------------------------------------------------\r\nexport const actionGetInteractions: Action = {\r\n    name: \"GET_INTERACTIONS_ANKR\",\r\n    similes: [\"FETCH_INTERACTIONS\", \"SHOW_INTERACTIONS\", \"VIEW_INTERACTIONS\", \"LIST_INTERACTIONS\"],\r\n    description: \"Retrieve interactions between wallets and smart contracts on specified blockchain networks.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me interactions for the wallet [wallet]0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45[/wallet]\",\r\n                filters: {\r\n                    blockchain: \"eth\",  // Changed from string[] to string\r\n                    address: \"0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45\",\r\n                    pageSize: 5,\r\n                    pageToken: \"eyJsYXN0X2Jsb2NrIjoiMTIzNDU2Nzg4IiwibGFzdF9pbnRlcmFjdGlvbl9pbmRleCI6IjEifQ==\"\r\n                }\r\n            } as GetInteractionsContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the recent interactions:\\n\\n\" +\r\n                      \"1. Transfer (2024-03-15 14:30 UTC)\\n\" +\r\n                      \"   From: 0xabc...def1\\n\" +\r\n                      \"   To: 0x123...5678\\n\" +\r\n                      \"   Value: 1.5 ETH\\n\" +\r\n                      \"   Gas Used: 21,000\\n\" +\r\n                      \"   Tx Hash: 0xdef...789\\n\\n\" +\r\n                      \"2. Approve (2024-03-15 14:25 UTC)\\n\" +\r\n                      \"   From: 0xabc...def1\\n\" +\r\n                      \"   To: 0x123...5678\\n\" +\r\n                      \"   Value: 0 ETH\\n\" +\r\n                      \"   Gas Used: 45,000\\n\" +\r\n                      \"   Tx Hash: 0x789...012\",\r\n                success: true,\r\n                data: {\r\n                    interactions: [{\r\n                        blockchain: \"eth\",\r\n                        transactionHash: \"0xdef...789\",\r\n                        blockNumber: 17000100,\r\n                        timestamp: \"2024-03-15T14:30:00Z\",\r\n                        from: \"0xabcdef1234567890abcdef1234567890abcdef12\",\r\n                        to: \"0x1234567890abcdef1234567890abcdef12345678\",\r\n                        value: \"1500000000000000000\",\r\n                        gasPrice: \"20000000000\",\r\n                        gasUsed: \"21000\",\r\n                        methodName: \"transfer\",\r\n                        logs: [{\r\n                            address: \"0x1234567890abcdef1234567890abcdef12345678\",\r\n                            topics: [\"0x000...123\"],\r\n                            data: \"0x000...456\",\r\n                            logIndex: 0\r\n                        }]\r\n                    }]\r\n                }\r\n            } as GetInteractionsContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_INTERACTIONS_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_INTERACTIONS_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetInteractionsContent;\r\n\r\n            // Only wallet address is required based on the API\r\n            if (!content.filters?.address) {\r\n                throw new ValidationError(\"Wallet address is required\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_INTERACTIONS_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetInteractionsContent;\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['wallet']);\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Prepare API request parameters\r\n            const requestParams = {\r\n                blockchain: parsedContent.chain || \"eth\",\r\n                address: parsedContent.wallet,\r\n                pageSize: messageContent.filters?.pageSize ?? 5,\r\n                pageToken: messageContent.filters?.pageToken\r\n            };\r\n\r\n            try {\r\n                const response = await axios.post<{\r\n                    id: number;\r\n                    jsonrpc: string;\r\n                    result: AnkrAPIResponse;\r\n                }>(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getInteractions\",\r\n                        params: requestParams,\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                // Format the response text based on the sync status\r\n                const formattedText = `Blockchain Status Information:\r\n\r\nAvailable Blockchains: ${response.data.result.blockchains.join(', ')}\r\nSync Status: ${response.data.result.syncStatus.status}\r\nLag: ${response.data.result.syncStatus.lag}`;\r\n\r\n                if (callback) {\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            interactions: [],\r\n                            syncStatus: response.data.result.syncStatus,\r\n                            availableBlockchains: response.data.result.blockchains\r\n                        }\r\n                    } as GetInteractionsContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch interactions data: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch interactions data\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting interactions: ${errorMessage}`,\r\n                    success: false\r\n                } as GetInteractionsContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_INTERACTIONS_ANKR action\");\r\n        }\r\n    },\r\n\r\n\r\n};\r\n\r\nexport default actionGetInteractions;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetNFTHolders] ${message}`, data);\r\n        console.log(`[GetNFTHolders] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n\r\ninterface GetNFTHoldersContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;  // Changed from string[] to single string\r\n        contractAddress?: string;\r\n        pageSize?: number;\r\n        pageToken?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        holders: Array<{\r\n            holderAddress: string;\r\n            balance: string;\r\n            balanceRawInteger: string;\r\n        }>;\r\n        nextPageToken?: string;\r\n        blockchain?: string;\r\n        contractAddress?: string;\r\n        tokenDecimals?: number;\r\n        holdersCount?: number;\r\n        syncStatus?: {\r\n            timestamp: number;\r\n            lag: string;\r\n            status: string;\r\n        };\r\n    };\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Core Action implementation\r\n// ------------------------------------------------------------------------------------------------\r\nexport const actionGetNFTHolders: Action = {\r\n    name: \"GET_NFT_HOLDERS_ANKR\",\r\n    similes: [\"FETCH_NFT_HOLDERS\", \"SHOW_NFT_HOLDERS\", \"VIEW_NFT_HOLDERS\", \"LIST_NFT_HOLDERS\"],\r\n    description: \"Retrieve holders of specific NFTs on specified blockchain networks.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me holders of NFT contract [contract]0x34d85c9cdeb23fa97cb08333b511ac86e1c4e258[/contract] on [chain]bsc[/chain]\",\r\n                filters: {\r\n                    blockchain: \"bsc\",  // Changed from string[] to string\r\n                    contractAddress: \"0x34d85c9cdeb23fa97cb08333b511ac86e1c4e258\",\r\n                    pageSize: 5\r\n                }\r\n            } as GetNFTHoldersContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"Here are the NFT holders:\\n\\n\" +\r\n                      \"1. 0xabc...def1\\n\" +\r\n                      \"   Balance: 1.5\\n\" +\r\n                      \"   Raw Balance: 1500000000000000000\\n\\n\" +\r\n                      \"2. 0xdef...789a\\n\" +\r\n                      \"   Balance: 2.0\\n\" +\r\n                      \"   Raw Balance: 2000000000000000000\",\r\n                success: true,\r\n                data: {\r\n                    holders: [{\r\n                        holderAddress: \"0xabcdef1234567890abcdef1234567890abcdef12\",\r\n                        balance: \"1.5\",\r\n                        balanceRawInteger: \"1500000000000000000\"\r\n                    }],\r\n                    blockchain: \"bsc\",\r\n                    contractAddress: \"0xf307910A4c7bbc79691fD374889b36d8531B08e3\",\r\n                    tokenDecimals: 18,\r\n                    holdersCount: 1000,\r\n                    syncStatus: {\r\n                        timestamp: 1737769593,\r\n                        lag: \"-2m\",\r\n                        status: \"synced\"\r\n                    }\r\n                }\r\n            } as GetNFTHoldersContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_NFT_HOLDERS_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_NFT_HOLDERS_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetNFTHoldersContent;\r\n\r\n            if (!content.filters?.contractAddress) {\r\n                throw new ValidationError(\"Contract address is required\");\r\n            }\r\n\r\n            // Blockchain is optional, defaults to \"eth\"\r\n            if (content.filters?.blockchain && typeof content.filters.blockchain !== 'string') {\r\n                throw new ValidationError(\"Blockchain must be a string\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_NFT_HOLDERS_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetNFTHoldersContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasContract: !!parsedContent.contract,\r\n                hasToken: !!parsedContent.token,\r\n                hasChain: !!parsedContent.chain,\r\n                contract: parsedContent.contract,\r\n                token: parsedContent.token,\r\n                chain: parsedContent.chain,\r\n                matches: parsedContent.raw.matches\r\n            });\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['contract']);\r\n\r\n            const requestParams = {\r\n                blockchain: parsedContent.chain,\r\n                contractAddress: parsedContent.contract,\r\n                pageSize: messageContent.filters?.pageSize || 10,\r\n                pageToken: messageContent.filters?.pageToken\r\n            };\r\n\r\n            console.log(\"Debug - API request parameters:\", {\r\n                params: requestParams,\r\n                endpoint: endpoint\r\n            });\r\n\r\n            const response = await axios.post(\r\n                endpoint,\r\n                {\r\n                    jsonrpc: \"2.0\",\r\n                    method: \"ankr_getNFTHolders\",\r\n                    params: requestParams,\r\n                    id: 1\r\n                },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                }\r\n            );\r\n\r\n            logGranular(\"Received response from Ankr API\", {\r\n                statusCode: response.status,\r\n                data: response.data\r\n            });\r\n\r\n            const result = response.data.result;\r\n            const formattedText =\r\n                `NFT Holders:\r\nTotal Holders: ${result.holders.length}\r\n\r\n${result.holders.map((holderAddress: string, index: number) =>\r\n    `${index + 1}. ${holderAddress}`\r\n).join('\\n')}\r\n\r\n${result.nextPageToken ? 'More holders available. Use the page token to see more.\\n' : ''}\r\n${result.syncStatus ? `Sync Status:\r\nLast Update: ${new Date(result.syncStatus.timestamp * 1000).toLocaleString()}\r\nLag: ${result.syncStatus.lag}\r\nStatus: ${result.syncStatus.status}` : ''}`;\r\n\r\n            logGranular(\"Formatted response text\", { formattedText });\r\n\r\n            if (callback) {\r\n                logGranular(\"Sending success callback with formatted text\");\r\n                callback({\r\n                    text: formattedText,\r\n                    success: true,\r\n                    data: {\r\n                        holders: result.holders.map((address: string) => ({\r\n                            holderAddress: address,\r\n                            balance: \"1\",  // Default values since not provided in response\r\n                            balanceRawInteger: \"1\"\r\n                        })),\r\n                        nextPageToken: result.nextPageToken,\r\n                        syncStatus: result.syncStatus\r\n                    }\r\n                } as GetNFTHoldersContent);\r\n            }\r\n\r\n            return true;\r\n\r\n        } catch (error: unknown) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting NFT holders: ${errorMessage}`,\r\n                    success: false\r\n                } as GetNFTHoldersContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_NFT_HOLDERS_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetNFTHolders;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetNFTTransfers] ${message}`, data);\r\n        console.log(`[GetNFTTransfers] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n\r\ninterface GetNFTTransfersContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;\r\n        contractAddress?: string;\r\n        fromTimestamp?: number;\r\n        toTimestamp?: number;\r\n        pageSize?: number;\r\n        pageToken?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        transfers: Array<{\r\n            fromAddress: string;\r\n            toAddress: string;\r\n            contractAddress: string;\r\n            value: string;\r\n            valueRawInteger: string;\r\n            blockchain: string;\r\n            tokenName: string;\r\n            tokenSymbol: string;\r\n            tokenDecimals: number;\r\n            thumbnail: string;\r\n            transactionHash: string;\r\n            blockHeight: number;\r\n            timestamp: number;\r\n        }>;\r\n        syncStatus?: {\r\n            timestamp?: number;\r\n            lag?: string;\r\n            status?: string;\r\n        } | null;\r\n    };\r\n}\r\n\r\n// Add type definition for transfer\r\ninterface NFTTransfer {\r\n    tokenName: string;\r\n    tokenSymbol: string;\r\n    fromAddress: string;\r\n    toAddress: string;\r\n    value: string;\r\n    timestamp: number;\r\n    transactionHash: string;\r\n    thumbnail?: string;\r\n}\r\n\r\nexport const actionGetNFTTransfers: Action = {\r\n    name: \"GET_NFT_TRANSFERS_ANKR\",\r\n    similes: [\"LIST_NFT_TRANSFERS\", \"SHOW_NFT_TRANSFERS\", \"VIEW_NFT_TRANSFERS\", \"GET_NFT_HISTORY\"],\r\n    description: \"Get NFT transfer history for a specific address or contract on eth.\",\r\n\r\n\r\n\r\n    // Fix the example data to match the interface\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me NFT transfers for contract [contract]0x34d85c9cdeb23fa97cb08333b511ac86e1c4e258[/contract] [chain]eth[/chain] [fromtimestamp]1655197483[/fromtimestamp][totimestamp]1671974699[/totimestamp]\",\r\n                filters: {\r\n                    blockchain: \"eth\",\r\n                    contractAddress: \"0x34d85c9cdeb23fa97cb08333b511ac86e1c4e258\",\r\n                    pageSize: 5\r\n                }\r\n            } as GetNFTTransfersContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"NFT Transfers:\\n\\n\" +\r\n                      \"1. Transfer of Token #1234\\n\" +\r\n                      \"   From: 0xabcd...ef01\\n\" +\r\n                      \"   To: 0x9876...4321\\n\" +\r\n                      \"   Time: 1/24/2024, 10:30:15 AM\\n\" +\r\n                      \"   Token: CoolNFT #123\\n\\n\" +\r\n                      \"2. Transfer of Token #456\\n\" +\r\n                      \"   From: 0x9876...3210\\n\" +\r\n                      \"   To: 0xfedc...ba98\\n\" +\r\n                      \"   Time: 1/24/2024, 10:15:22 AM\\n\" +\r\n                      \"   Token: CoolNFT #456\\n\",\r\n                success: true,\r\n                data: {\r\n                    transfers: [\r\n                        {\r\n                            fromAddress: \"0xabcdef0123456789abcdef0123456789abcdef01\",\r\n                            toAddress: \"0x9876543210fedcba9876543210fedcba98765432\",\r\n                            contractAddress: \"0x34d85c9cdeb23fa97cb08333b511ac86e1c4e258\",\r\n                            value: \"1\",\r\n                            valueRawInteger: \"1\",\r\n                            blockchain: \"eth\",\r\n                            tokenName: \"CoolNFT\",\r\n                            tokenSymbol: \"COOL\",\r\n                            tokenDecimals: 18,\r\n                            thumbnail: \"https://example.com/nft/123.png\",\r\n                            transactionHash: \"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\",\r\n                            blockHeight: 123456789,\r\n                            timestamp: 1706093415\r\n                        },\r\n                        {\r\n                            fromAddress: \"0x9876543210987654321098765432109876543210\",\r\n                            toAddress: \"0xfedcba9876543210fedcba9876543210fedcba98\",\r\n                            contractAddress: \"0x34d85c9cdeb23fa97cb08333b511ac86e1c4e258\",\r\n                            value: \"1\",\r\n                            valueRawInteger: \"1\",\r\n                            blockchain: \"eth\",\r\n                            tokenName: \"CoolNFT\",\r\n                            tokenSymbol: \"COOL\",\r\n                            tokenDecimals: 18,\r\n                            thumbnail: \"https://example.com/nft/456.png\",\r\n                            transactionHash: \"0x9876543210fedcba9876543210fedcba9876543210fedcba9876543210fedcba\",\r\n                            blockHeight: 123456788,\r\n                            timestamp: 1706092522\r\n                        }\r\n                    ],\r\n                    syncStatus: {\r\n                        timestamp: 1706093415,\r\n                        lag: \"0s\",\r\n                        status: \"synced\"\r\n                    }\r\n                }\r\n            } as GetNFTTransfersContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_NFT_TRANSFERS_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_NFT_TRANSFERS_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetNFTTransfersContent;\r\n\r\n            if (!content.filters?.blockchain || !content.filters?.contractAddress) {\r\n                throw new ValidationError(\"Blockchain and contract address are required\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_NFT_TRANSFERS_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetNFTTransfersContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n\r\n            console.log(\"Debug - Message content details:\", {\r\n                hasText: !!messageContent?.text,\r\n                hasFilters: !!messageContent?.filters,\r\n                textContent: messageContent?.text,\r\n                contentType: typeof messageContent?.text\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasContract: !!parsedContent.contract,\r\n                hasChain: !!parsedContent.chain,\r\n                hasFromTimestamp: !!parsedContent.fromTimestamp,\r\n                hasToTimestamp: !!parsedContent.toTimestamp,\r\n                contract: parsedContent.contract,\r\n                chain: parsedContent.chain,\r\n                fromTimestamp: parsedContent.fromTimestamp,\r\n                toTimestamp: parsedContent.toTimestamp,\r\n                matches: parsedContent.raw.matches\r\n            });\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['contract', 'chain', 'fromTimestamp', 'toTimestamp']);\r\n\r\n            // Prepare API request parameters\r\n            const requestParams = {\r\n                address: parsedContent.contract,\r\n                blockchain: [parsedContent.chain],\r\n                fromTimestamp: parsedContent.fromTimestamp,\r\n                toTimestamp: parsedContent.toTimestamp\r\n            };\r\n\r\n            console.log(\"Debug - API request parameters:\", {\r\n                params: requestParams,\r\n                endpoint: ANKR_ENDPOINTS.production.multichain\r\n            });\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getTokenTransfers\",\r\n                        params: requestParams,\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const transfers = response.data.result.transfers;\r\n\r\n                // Format the response text\r\n                let formattedText = \"Token Transfers:\\n\\n\";\r\n                transfers.forEach((transfer: NFTTransfer, index: number) => {\r\n                    formattedText += `${index + 1}. Transfer of ${transfer.tokenName} (${transfer.tokenSymbol})\\n`;\r\n                    formattedText += `   From: ${transfer.fromAddress.slice(0, 6)}...${transfer.fromAddress.slice(-4)}\\n`;\r\n                    formattedText += `   To: ${transfer.toAddress.slice(0, 6)}...${transfer.toAddress.slice(-4)}\\n`;\r\n                    formattedText += `   Amount: ${transfer.value}\\n`;\r\n                    formattedText += `   Time: ${new Date(transfer.timestamp * 1000).toLocaleString()}\\n`;\r\n                    formattedText += `   Tx Hash: ${transfer.transactionHash}\\n`;\r\n                    if (transfer.thumbnail) {\r\n                        formattedText += `   Token Icon: ${transfer.thumbnail}\\n`;\r\n                    }\r\n                    formattedText += \"\\n\";\r\n                });\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            transfers,\r\n                            syncStatus: response.data.result.syncStatus\r\n                        }\r\n                    } as GetNFTTransfersContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch NFT transfers: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch NFT transfers\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting NFT transfers: ${errorMessage}`,\r\n                    success: false\r\n                } as GetNFTTransfersContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_NFT_TRANSFERS_ANKR action\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default actionGetNFTTransfers;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetNFTMetadata] ${message}`, data);\r\n        console.log(`[GetNFTMetadata] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n\r\ninterface GetNFTMetadataContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string;\r\n        contractAddress?: string;\r\n        tokenId?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        metadata: {\r\n            blockchain: string;\r\n            contractAddress: string;\r\n            contractType: string;\r\n            tokenId: string;\r\n        };\r\n        attributes: {\r\n            contractType: string;\r\n            tokenUrl: string;\r\n            imageUrl: string;\r\n            name: string;\r\n            description: string;\r\n            traits: Array<{\r\n                trait_type: string;\r\n                value: string;\r\n            }>;\r\n        };\r\n    };\r\n}\r\n\r\nexport const actionGetNFTMetadata: Action = {\r\n    name: \"GET_NFT_METADATA_ANKR\",\r\n    similes: [\"GET_NFT_INFO\", \"SHOW_NFT_DETAILS\", \"VIEW_NFT\", \"NFT_METADATA\"],\r\n    description: \"Get detailed metadata for a specific NFT including traits, images, and contract information.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me the metadata for NFT [token]1234[/token] at contract [contract]0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d[/contract] [chain]eth[/chain]\",\r\n                filters: {\r\n                    blockchain: \"eth\",\r\n                    contractAddress: \"0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d\",\r\n                    tokenId: \"1234\"\r\n                }\r\n            } as GetNFTMetadataContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"NFT Metadata for Bored Ape #1234:\\n\\n\" +\r\n                      \"Collection: Bored Ape Yacht Club\\n\" +\r\n                      \"Contract: 0xbc4c...f13d (ERC721)\\n\\n\" +\r\n                      \"Description: A unique Bored Ape NFT living on the Ethereum blockchain\\n\\n\" +\r\n                      \"Traits:\\n\" +\r\n                      \"- Background: Blue\\n\" +\r\n                      \"- Fur: Dark Brown\\n\" +\r\n                      \"- Eyes: Bored\\n\" +\r\n                      \"- Mouth: Grin\\n\",\r\n                success: true,\r\n                data: {\r\n                    metadata: {\r\n                        blockchain: \"eth\",\r\n                        contractAddress: \"0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d\",\r\n                        contractType: \"ERC721\",\r\n                        tokenId: \"1234\"\r\n                    },\r\n                    attributes: {\r\n                        contractType: \"ERC721\",\r\n                        tokenUrl: \"ipfs://QmeSjSinHpPnmXmspMjwiXyN6zS4E9zccariGR3jxcaWtq/1234\",\r\n                        imageUrl: \"ipfs://QmRRPWG96cmgTn2qSzjwr2qvfNEuhunv6FNeMFGa9bx6mQ\",\r\n                        name: \"Bored Ape #1234\",\r\n                        description: \"A unique Bored Ape NFT living on the Ethereum blockchain\",\r\n                        traits: [\r\n                            { trait_type: \"Background\", value: \"Blue\" },\r\n                            { trait_type: \"Fur\", value: \"Dark Brown\" },\r\n                            { trait_type: \"Eyes\", value: \"Bored\" },\r\n                            { trait_type: \"Mouth\", value: \"Grin\" }\r\n                        ]\r\n                    }\r\n                }\r\n            } as GetNFTMetadataContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_NFT_METADATA_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_NFT_METADATA_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetNFTMetadataContent;\r\n\r\n            if (!content.filters?.blockchain || !content.filters?.contractAddress || !content.filters?.tokenId) {\r\n                throw new ValidationError(\"Blockchain, contract address, and token ID are required\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_NFT_METADATA_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetNFTMetadataContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type,\r\n                allKeys: Object.keys(message.content || {})\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            console.log(\"Debug - Raw prompt:\", {\r\n                text: messageContent.text,\r\n                promptLength: messageContent.text?.length,\r\n            });\r\n\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasContract: !!parsedContent.contract,\r\n                hasToken: !!parsedContent.token,\r\n                hasChain: !!parsedContent.chain,\r\n                contract: parsedContent.contract,\r\n                token: parsedContent.token,\r\n                chain: parsedContent.chain,\r\n                matches: parsedContent.raw.matches\r\n            });\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['contract', 'token', 'chain']);\r\n\r\n            // Prepare API request parameters\r\n            const requestParams = {\r\n                blockchain: parsedContent.chain,\r\n                contractAddress: parsedContent.contract,\r\n                tokenId: parsedContent.token\r\n            };\r\n\r\n            console.log(\"Debug - API request parameters:\", {\r\n                params: requestParams,\r\n                endpoint: ANKR_ENDPOINTS.production.multichain\r\n            });\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getNFTMetadata\",\r\n                        params: requestParams,\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const nftData = response.data.result;\r\n\r\n                // Format the response text\r\n                let formattedText = `NFT Metadata for ${nftData.attributes.name}:\\n\\n`;\r\n                formattedText += `Collection: ${nftData.attributes.name.split('#')[0].trim()}\\n`;\r\n                formattedText += `Contract: ${nftData.metadata.contractAddress.slice(0, 6)}...${nftData.metadata.contractAddress.slice(-4)} (${nftData.metadata.contractType})\\n\\n`;\r\n\r\n                if (nftData.attributes.description) {\r\n                    formattedText += `Description: ${nftData.attributes.description}\\n\\n`;\r\n                }\r\n\r\n                if (nftData.attributes.traits && nftData.attributes.traits.length > 0) {\r\n                    formattedText += \"Traits:\\n\";\r\n                    for (const trait of nftData.attributes.traits as { trait_type: string; value: string }[]) {\r\n                        formattedText += `- ${trait.trait_type}: ${trait.value}\\n`;\r\n                    }\r\n                }\r\n\r\n                if (nftData.attributes.imageUrl) {\r\n                    formattedText += `\\nImage URL: ${nftData.attributes.imageUrl}\\n`;\r\n                }\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: nftData\r\n                    } as GetNFTMetadataContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch NFT metadata: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch NFT metadata\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting NFT metadata: ${errorMessage}`,\r\n                    success: false\r\n                } as GetNFTMetadataContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_NFT_METADATA_ANKR action\");\r\n        }\r\n    },\r\n\r\n\r\n};\r\n\r\nexport default actionGetNFTMetadata;\r\n","// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport { Action, elizaLogger } from \"@elizaos/core\";\r\nimport { IAgentRuntime, Memory, State, HandlerCallback, Content, ActionExample } from \"@elizaos/core\";\r\n// ------------------------------------------------------------------------------------------------\r\n// Essential Imports\r\n// ------------------------------------------------------------------------------------------------\r\nimport axios from 'axios';\r\nimport { getConfig, validateankrConfig, ANKR_ENDPOINTS } from '../environment';\r\nimport { APIError, ConfigurationError, ValidationError } from '../error/base';\r\nimport { parseAPIContent, validateRequiredFields } from '../validator/apiParseValidation';\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n// Get configuration for granular logging\r\nconst config = getConfig();\r\nconst GRANULAR_LOG = config.ANKR_GRANULAR_LOG;\r\n\r\n// Enhanced logging helper\r\nconst logGranular = (message: string, data?: unknown) => {\r\n    if (GRANULAR_LOG) {\r\n        elizaLogger.debug(`[GetNFTsByOwner] ${message}`, data);\r\n        console.log(`[GetNFTsByOwner] ${message}`, data ? JSON.stringify(data, null, 2) : '');\r\n    }\r\n};\r\n// ------------------------------------------------------------------------------------------------\r\n// Granular Logger\r\n// ------------------------------------------------------------------------------------------------\r\n\r\ninterface GetNFTsByOwnerContent extends Content {\r\n    text: string;\r\n    filters?: {\r\n        blockchain?: string[];\r\n        walletAddress?: string;\r\n        pageSize?: number;\r\n        pageToken?: string;\r\n    };\r\n    success?: boolean;\r\n    data?: {\r\n        owner: string;\r\n        assets: Array<{\r\n            blockchain: string;\r\n            name: string;\r\n            tokenId: string;\r\n            tokenUrl: string;\r\n            imageUrl: string;\r\n            collectionName: string;\r\n            symbol: string;\r\n            contractType: string;\r\n            contractAddress: string;\r\n            quantity?: string;  // Added for ERC1155 support\r\n        }>;\r\n        syncStatus?: {\r\n            timestamp?: number;\r\n            lag?: string;\r\n            status?: string;\r\n        } | null;\r\n    };\r\n}\r\n\r\ntype NFTAsset = {\r\n    blockchain: string;\r\n    name: string;\r\n    tokenId: string;\r\n    tokenUrl: string;\r\n    imageUrl: string;\r\n    collectionName: string;\r\n    symbol: string;\r\n    contractType: string;\r\n    contractAddress: string;\r\n    quantity?: string;\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// Core Action implementation\r\n// ------------------------------------------------------------------------------------------------\r\nexport const actionGetNFTsByOwner: Action = {\r\n    name: \"GET_NFTS_BY_OWNER_ANKR\",\r\n    similes: [\"LIST_NFTS\", \"SHOW_NFTS\", \"VIEW_NFTS\", \"FETCH_NFTS\", \"GET_OWNED_NFTS\"],\r\n    description: \"Retrieve all NFTs owned by a specific wallet address across multiple blockchains with detailed metadata.\",\r\n    examples: [[\r\n        {\r\n            user: \"user\",\r\n            content: {\r\n                text: \"Show me all NFTs owned by wallet [wallet]0x1234567890123456789012345678901234567890[/wallet] on [chain]eth[/chain]\",\r\n                filters: {\r\n                    blockchain: [\"eth\"],\r\n                    walletAddress: \"0x1234567890123456789012345678901234567890\",\r\n                    pageSize: 10\r\n                }\r\n            } as GetNFTsByOwnerContent\r\n        } as ActionExample,\r\n        {\r\n            user: \"assistant\",\r\n            content: {\r\n                text: \"NFTs owned by 0x1234567890123456789012345678901234567890:\\n\\n\" +\r\n                      \"1. Bored Ape #1234\\n\" +\r\n                      \"   Collection: Bored Ape Yacht Club\\n\" +\r\n                      \"   Contract: 0xbc4c...f13d\\n\" +\r\n                      \"   Token ID: 1234\\n\\n\" +\r\n                      \"2. CryptoPunk #5678\\n\" +\r\n                      \"   Collection: CryptoPunks\\n\" +\r\n                      \"   Contract: 0x2505...42a2\\n\" +\r\n                      \"   Token ID: 5678\\n\",\r\n                success: true,\r\n                data: {\r\n                    owner: \"0x1234567890123456789012345678901234567890\",\r\n                    assets: [\r\n                        {\r\n                            blockchain: \"eth\",\r\n                            name: \"Bored Ape #1234\",\r\n                            tokenId: \"1234\",\r\n                            tokenUrl: \"ipfs://QmeSjSinHpPnmXmspMjwiXyN6zS4E9zccariGR3jxcaWtq/1234\",\r\n                            imageUrl: \"ipfs://QmRRPWG96cmgTn2qSzjwr2qvfNEuhunv6FNeMFGa9bx6mQ\",\r\n                            collectionName: \"Bored Ape Yacht Club\",\r\n                            symbol: \"BAYC\",\r\n                            contractType: \"ERC721\",\r\n                            contractAddress: \"0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d\"\r\n                        },\r\n                        {\r\n                            blockchain: \"eth\",\r\n                            name: \"CryptoPunk #5678\",\r\n                            tokenId: \"5678\",\r\n                            tokenUrl: \"https://cryptopunks.app/cryptopunks/details/5678\",\r\n                            imageUrl: \"https://cryptopunks.app/cryptopunks/image/5678\",\r\n                            collectionName: \"CryptoPunks\",\r\n                            symbol: \"PUNK\",\r\n                            contractType: \"ERC721\",\r\n                            contractAddress: \"0x2505...42a2\"\r\n                        }\r\n                    ]\r\n                }\r\n            } as GetNFTsByOwnerContent\r\n        } as ActionExample\r\n    ]],\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Validation implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    validate: async (_runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\r\n        if (message.content?.type !== \"GET_NFTS_BY_OWNER_ANKR\") {\r\n            return true;\r\n        }\r\n\r\n        logGranular(\"Validating GET_NFTS_BY_OWNER_ANKR action\", {\r\n            content: message.content\r\n        });\r\n\r\n        try {\r\n            const content = message.content as GetNFTsByOwnerContent;\r\n\r\n            if (!content.filters?.blockchain || !content.filters?.walletAddress) {\r\n                throw new ValidationError(\"Blockchain and wallet address are required\");\r\n            }\r\n\r\n            if (content.filters?.blockchain && !Array.isArray(content.filters.blockchain)) {\r\n                throw new ValidationError(\"Blockchain must be an array\");\r\n            }\r\n\r\n            logGranular(\"Validation successful\");\r\n            return true;\r\n        } catch (error) {\r\n            logGranular(\"Validation failed\", { error });\r\n            if (error instanceof ValidationError) {\r\n                throw error;\r\n            }\r\n            throw new ValidationError(error instanceof Error ? error.message : \"Unknown validation error\");\r\n        }\r\n    },\r\n    // ------------------------------------------------------------------------------------------------\r\n    // Core Handler implementation\r\n    // ------------------------------------------------------------------------------------------------\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state?: State,\r\n        _options: { [key: string]: unknown } = {},\r\n        callback?: HandlerCallback\r\n    ): Promise<boolean> => {\r\n        logGranular(\"Executing GET_NFTS_BY_OWNER_ANKR action\");\r\n\r\n        try {\r\n            const messageContent = message.content as GetNFTsByOwnerContent;\r\n            console.log(\"Debug - Full message content:\", {\r\n                fullContent: message.content,\r\n                rawText: messageContent?.text,\r\n                type: message.content?.type\r\n            });\r\n\r\n            const config = await validateankrConfig(runtime);\r\n            console.log(\"Debug - Config validated:\", {\r\n                hasWallet: !!config.ANKR_WALLET,\r\n                env: config.ANKR_ENV\r\n            });\r\n            const wallet = config.ANKR_WALLET;\r\n            if (!wallet) {\r\n                throw new ConfigurationError(\"ANKR_WALLET not found in environment variables\");\r\n            }\r\n\r\n            const endpoint = `https://rpc.ankr.com/multichain/${wallet}`;\r\n\r\n            // Parse the prompt using our API content parser\r\n            const parsedContent = parseAPIContent(messageContent.text);\r\n            console.log(\"Debug - Parsed API content:\", {\r\n                hasWallet: !!parsedContent.wallet,\r\n                hasChain: !!parsedContent.chain,\r\n                wallet: parsedContent.wallet,\r\n                chain: parsedContent.chain,\r\n                matches: parsedContent.raw.matches\r\n            });\r\n\r\n            // Validate required fields\r\n            validateRequiredFields(parsedContent, ['wallet', 'chain']);\r\n\r\n            // Prepare API request parameters\r\n            const requestParams = {\r\n                blockchain: [parsedContent.chain],  // API expects array\r\n                walletAddress: parsedContent.wallet,\r\n                pageSize: messageContent.filters?.pageSize ?? 10,\r\n                pageToken: messageContent.filters?.pageToken\r\n            };\r\n\r\n            console.log(\"Debug - API request parameters:\", requestParams);\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    endpoint,\r\n                    {\r\n                        jsonrpc: \"2.0\",\r\n                        method: \"ankr_getNFTsByOwner\",\r\n                        params: requestParams,\r\n                        id: 1\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n\r\n                logGranular(\"Received response from Ankr API\", {\r\n                    statusCode: response.status,\r\n                    data: response.data\r\n                });\r\n\r\n                if (response.data.error) {\r\n                    throw new APIError(`Ankr API error: ${response.data.error.message}`);\r\n                }\r\n\r\n                const { owner, assets, syncStatus } = response.data.result;\r\n\r\n                // Format the response text\r\n                let formattedText = `NFTs owned by ${owner}:\\n\\n`;\r\n\r\n                for (const [index, nft] of (assets as NFTAsset[]).entries()) {\r\n                    formattedText += `${index + 1}. ${nft.name || 'Unnamed NFT'}\\n`;\r\n                    if (nft.collectionName) {\r\n                        formattedText += `   Collection: ${nft.collectionName}\\n`;\r\n                    }\r\n                    formattedText += `   Contract: ${nft.contractAddress.slice(0, 6)}...${nft.contractAddress.slice(-4)} (${nft.contractType})\\n`;\r\n                    formattedText += `   Token ID: ${nft.tokenId}\\n`;\r\n                    if (nft.quantity) {\r\n                        formattedText += `   Quantity: ${nft.quantity}\\n`;\r\n                    }\r\n                    if (nft.tokenUrl) {\r\n                        formattedText += `   Metadata URL: ${nft.tokenUrl}\\n`;\r\n                    }\r\n                    formattedText += '\\n';\r\n                }\r\n\r\n                if (callback) {\r\n                    logGranular(\"Sending success callback with formatted text\", { formattedText });\r\n                    callback({\r\n                        text: formattedText,\r\n                        success: true,\r\n                        data: {\r\n                            owner,\r\n                            assets,\r\n                            syncStatus\r\n                        }\r\n                    } as GetNFTsByOwnerContent);\r\n                }\r\n\r\n                return true;\r\n\r\n            } catch (error) {\r\n                logGranular(\"API request failed\", { error });\r\n                if (axios.isAxiosError(error)) {\r\n                    throw new APIError(\r\n                        `Failed to fetch NFTs data: ${error.message}`,\r\n                        error.response?.status\r\n                    );\r\n                }\r\n                throw new APIError(\"Failed to fetch NFTs data\");\r\n            }\r\n\r\n        } catch (error) {\r\n            logGranular(\"Handler execution failed\", { error });\r\n\r\n            if (callback) {\r\n                const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\r\n                callback({\r\n                    text: `Error getting NFTs: ${errorMessage}`,\r\n                    success: false\r\n                } as GetNFTsByOwnerContent);\r\n            }\r\n\r\n            if (error instanceof ConfigurationError ||\r\n                error instanceof ValidationError ||\r\n                error instanceof APIError) {\r\n                throw error;\r\n            }\r\n\r\n            throw new APIError(\"Failed to execute GET_NFTS_BY_OWNER_ANKR action\");\r\n        }\r\n    },\r\n\r\n\r\n};\r\n\r\nexport default actionGetNFTsByOwner;\r\n\r\n"],"mappings":";AACA,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,SAAS;;;ACFhB,SAAS,SAAS;AAGlB,IAAI,MAAK;AAGF,IAAM,iBAAiB;AAAA,EAC1B,YAAY;AAAA,IACR,YAAY;AAAA,EAChB;AAEJ;AAEO,IAAM,gBAAgB,EAAE,OAAO;AAAA;AAAA,EAElC,UAAU,EAAE,KAAK,CAAC,cAAc,SAAS,CAAC,EAAE,QAAQ,YAAY;AAAA,EAChE,aAAa,EAAE,OAAO,EAAE,IAAI,GAAG,yBAAyB;AAAA;AAAA,EAGxD,kBAAkB,EAAE,OAAO,EAAE,UAAU,MAAM,EAAE,QAAQ,GAAG;AAAA,EAC1D,kBAAkB,EAAE,OAAO,EAAE,UAAU,MAAM,EAAE,QAAQ,MAAM;AAAA,EAC7D,cAAc,EAAE,OAAO,EAAE,UAAU,MAAM,EAAE,QAAQ,MAAM;AAAA;AAAA,EAGzD,mBAAmB,EAAE,QAAQ,EAAE,QAAQ,IAAI;AAAA,EAC3C,gBAAgB,EAAE,KAAK,CAAC,SAAS,QAAQ,QAAQ,OAAO,CAAC,EAAE,QAAQ,MAAM;AAAA;AAAA,EAGzE,yBAAyB,EAAE,QAAQ,EAAE,QAAQ,KAAK;AAAA,EAClD,YAAY,EAAE,QAAQ,EAAE,QAAQ,KAAK;AACzC,CAAC;AAIM,SAAS,UACZ,MAAiC,OAC7B,QAAQ,IAAI,UACN;AACV,QAAM,OAAO;AAEb,SAAO;AAAA,IACH,UAAW,OAAoC;AAAA,IAC/C,aAAa,QAAQ,IAAI,eAAe;AAAA,IACxC,kBAAkB,OAAO,QAAQ,IAAI,oBAAoB,GAAG;AAAA,IAC5D,kBAAkB,OAAO,QAAQ,IAAI,oBAAoB,MAAM;AAAA,IAC/D,cAAc,OAAO,QAAQ,IAAI,gBAAgB,MAAM;AAAA,IACvD,mBAAmB,QAAQ,IAAI,sBAAsB,UAAU;AAAA,IAC/D,gBAAiB,QAAQ,IAAI,kBAA0D;AAAA,IACvF,yBAAyB,QAAQ,IAAI,uBAAuB,UAAU;AAAA,IACtE,YAAY,QAAQ,IAAI,eAAe,UAAU;AAAA,EACrD;AACJ;AAEA,eAAsB,mBAClB,SACmB;AACnB,MAAI;AACA,UAAM,YAAY;AAAA,MACd,QAAQ,WAAW,UAAU,KAAK;AAAA,IACtC;AAEA,UAAMA,WAAS;AAAA,MACX,UAAU,QAAQ,IAAI,YAAY,QAAQ,WAAW,UAAU,KAAK,UAAU;AAAA,MAC9E,aAAa,QAAQ,IAAI,eAAe,QAAQ,WAAW,aAAa,KAAK,UAAU;AAAA,MACvF,kBAAkB,QAAQ,IAAI,oBAAoB,QAAQ,WAAW,kBAAkB,KAAK,UAAU,iBAAiB,SAAS;AAAA,MAChI,kBAAkB,QAAQ,IAAI,oBAAoB,QAAQ,WAAW,kBAAkB,KAAK,UAAU,iBAAiB,SAAS;AAAA,MAChI,cAAc,QAAQ,IAAI,gBAAgB,QAAQ,WAAW,cAAc,KAAK,UAAU,aAAa,SAAS;AAAA,MAChH,mBAAmB,QAAQ,IAAI,sBAAsB,UAAU;AAAA,MAC/D,gBAAgB,QAAQ,IAAI,kBAAkB,QAAQ,WAAW,gBAAgB,KAAK,UAAU;AAAA,MAChG,yBAAyB,QAAQ,IAAI,uBAAuB,UAAU;AAAA,MACtE,YAAY,QAAQ,IAAI,eAAe,UAAU;AAAA,IACrD;AAEA,WAAO,cAAc,MAAMA,QAAM;AAAA,EACrC,SAAS,OAAO;AACZ,UAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAC1E,UAAM,IAAI,MAAM,0CAA0C,YAAY,EAAE;AAAA,EAC5E;AACJ;;;AC5EA,SAAiB,eAAAC,oBAAmB;AAKpC,OAAO,WAAW;;;ACRX,IAAM,kBAAN,MAAM,yBAAwB,MAAM;AAAA,EACzC,YAAY,SAAiB;AAC3B,UAAM,OAAO;AACb,SAAK,OAAO;AACZ,WAAO,eAAe,MAAM,iBAAgB,SAAS;AAAA,EACvD;AACF;AAEO,IAAM,qBAAN,MAAM,4BAA2B,gBAAgB;AAAA,EACtD,YAAY,SAAiB;AAC3B,UAAM,OAAO;AACb,SAAK,OAAO;AACZ,WAAO,eAAe,MAAM,oBAAmB,SAAS;AAAA,EAC1D;AACF;AAEO,IAAM,WAAN,MAAM,kBAAiB,gBAAgB;AAAA,EAC5C,YAAY,SAAwB,YAAqB;AACvD,UAAM,OAAO;AADqB;AAElC,SAAK,OAAO;AACZ,WAAO,eAAe,MAAM,UAAS,SAAS;AAAA,EAChD;AACF;AAEO,IAAM,kBAAN,MAAM,yBAAwB,gBAAgB;AAAA,EACnD,YAAY,SAAiB;AAC3B,UAAM,OAAO;AACb,SAAK,OAAO;AACZ,WAAO,eAAe,MAAM,iBAAgB,SAAS;AAAA,EACvD;AACF;;;AC3BA,SAAS,mBAAmB;AA4C5B,IAAM,gBAAgB;AACtB,IAAM,gBAAgB;AAKtB,IAAM,qBAAqB,CAAC,UAA0B;AAClD,UAAQ,MAAM,YAAY,EAAE,KAAK;AACjC,UAAQ,OAAO;AAAA,IACX,KAAK;AAAA,IACL,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AAAA,IACL,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AAAA,IACL,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AAAA,IACL,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AAAA,IACL,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX;AACI,YAAM,IAAI,gBAAgB,2BAA2B,KAAK,EAAE;AAAA,EACpE;AACJ;AAEA,IAAM,kBAAkB,CAAC,YAA6B;AAClD,SAAO,cAAc,KAAK,OAAO;AACrC;AAEA,IAAM,iBAAiB,CAAC,SAA0B;AAC9C,SAAO,cAAc,KAAK,IAAI;AAClC;AAGA,IAAM,sBAAsB,CAAC,UAA2B;AACpD,SAAO,QAAQ,KAAK,KAAK;AAC7B;AAGA,IAAM,oBAAoB,CAAC,cAA+B;AACtD,QAAM,MAAM,SAAS,WAAW,EAAE;AAClC,SAAO,CAAC,MAAM,GAAG,KAAK,MAAM;AAChC;AAGA,IAAM,kBAAkB,CAAC,YAA6B;AAClD,SAAO,QAAQ,KAAK,MAAM;AAC9B;AAeO,SAAS,gBAAgB,MAAgC;AAC5D,MAAI;AACA,UAAM,SAA2B;AAAA,MAC7B,KAAK;AAAA,QACD;AAAA,QACA,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,OAAO;AAAA,UACP,UAAU;AAAA,UACV,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,eAAe;AAAA,UACf,aAAa;AAAA,QACjB;AAAA,MACJ;AAAA,IACJ;AAGA,UAAM,cAAc,KAAK,MAAM,kCAAkC;AACjE,QAAI,aAAa;AACb,YAAM,SAAS,YAAY,CAAC,EAAE,KAAK;AACnC,UAAI,CAAC,gBAAgB,MAAM,GAAG;AAC1B,cAAM,IAAI,gBAAgB,2BAA2B,MAAM,EAAE;AAAA,MACjE;AACA,aAAO,SAAS;AAChB,aAAO,IAAI,QAAQ,SAAS;AAAA,IAChC;AAGA,UAAM,aAAa,KAAK,MAAM,gCAAgC;AAC9D,QAAI,YAAY;AACZ,YAAM,QAAQ,WAAW,CAAC,EAAE,KAAK;AACjC,aAAO,QAAQ,mBAAmB,KAAK;AACvC,aAAO,IAAI,QAAQ,QAAQ;AAAA,IAC/B;AAGA,UAAM,gBAAgB,KAAK,MAAM,sCAAsC;AACvE,QAAI,eAAe;AACf,YAAM,WAAW,cAAc,CAAC,EAAE,KAAK;AACvC,UAAI,CAAC,gBAAgB,QAAQ,GAAG;AAC5B,cAAM,IAAI,gBAAgB,6BAA6B,QAAQ,EAAE;AAAA,MACrE;AACA,aAAO,WAAW;AAClB,aAAO,IAAI,QAAQ,WAAW;AAAA,IAClC;AAGA,UAAM,aAAa,KAAK,MAAM,gCAAgC;AAC9D,QAAI,YAAY;AACZ,YAAM,QAAQ,WAAW,CAAC,EAAE,KAAK;AACjC,UAAI,CAAC,gBAAgB,KAAK,GAAG;AACzB,cAAM,IAAI,gBAAgB,qBAAqB,KAAK,EAAE;AAAA,MAC1D;AACA,aAAO,QAAQ;AACf,aAAO,IAAI,QAAQ,QAAQ;AAAA,IAC/B;AAGA,UAAM,UAAU,KAAK,MAAM,kCAAkC;AAC7D,QAAI,SAAS;AACT,YAAM,SAAS,QAAQ,CAAC,EAAE,KAAK;AAC/B,UAAI,CAAC,eAAe,MAAM,GAAG;AACzB,cAAM,IAAI,gBAAgB,6BAA6B,MAAM,EAAE;AAAA,MACnE;AACA,aAAO,SAAS;AAChB,aAAO,IAAI,QAAQ,SAAS;AAAA,IAChC;AAGA,UAAM,aAAa,KAAK,MAAM,gCAAgC;AAC9D,QAAI,YAAY;AACZ,YAAM,QAAQ,WAAW,CAAC,EAAE,KAAK;AACjC,UAAI,CAAC,oBAAoB,KAAK,GAAG;AAC7B,cAAM,IAAI,gBAAgB,yBAAyB,KAAK,EAAE;AAAA,MAC9D;AACA,aAAO,QAAQ;AACf,aAAO,IAAI,QAAQ,QAAQ;AAAA,IAC/B;AAGA,UAAM,cAAc,KAAK,MAAM,kCAAkC;AACjE,QAAI,aAAa;AACb,YAAM,SAAS,YAAY,CAAC,EAAE,KAAK;AACnC,UAAI,CAAC,oBAAoB,MAAM,GAAG;AAC9B,cAAM,IAAI,gBAAgB,yBAAyB,MAAM,EAAE;AAAA,MAC/D;AACA,aAAO,SAAS;AAChB,aAAO,IAAI,QAAQ,SAAS;AAAA,IAChC;AAGA,UAAM,qBAAqB,KAAK,MAAM,gDAAgD;AACtF,QAAI,oBAAoB;AACpB,YAAM,YAAY,mBAAmB,CAAC,EAAE,KAAK;AAC7C,UAAI,CAAC,kBAAkB,SAAS,GAAG;AAC/B,cAAM,IAAI,gBAAgB,2BAA2B,SAAS,EAAE;AAAA,MACpE;AACA,aAAO,gBAAgB,SAAS,WAAW,EAAE;AAC7C,aAAO,IAAI,QAAQ,gBAAgB;AAAA,IACvC;AAGA,UAAM,mBAAmB,KAAK,MAAM,4CAA4C;AAChF,QAAI,kBAAkB;AAClB,YAAM,YAAY,iBAAiB,CAAC,EAAE,KAAK;AAC3C,UAAI,CAAC,kBAAkB,SAAS,GAAG;AAC/B,cAAM,IAAI,gBAAgB,yBAAyB,SAAS,EAAE;AAAA,MAClE;AACA,aAAO,cAAc,SAAS,WAAW,EAAE;AAC3C,aAAO,IAAI,QAAQ,cAAc;AAAA,IACrC;AAEA,WAAO;AAAA,EAEX,SAAS,OAAO;AACZ,gBAAY,MAAM,8BAA8B;AAAA,MAC5C,OAAO,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,IAChE,CAAC;AACD,UAAM;AAAA,EACV;AACJ;AAKO,SAAS,uBACZ,QACA,UACI;AACJ,QAAM,UAAU,SAAS,OAAO,WAAS,CAAC,OAAO,IAAI,QAAQ,KAAK,CAAC;AACnE,MAAI,QAAQ,SAAS,GAAG;AACpB,UAAM,IAAI;AAAA,MACN,4BAA4B,QAAQ,KAAK,IAAI,CAAC;AAAA,IAClD;AAAA,EACJ;AACJ;;;AF7OA,IAAM,SAAS,UAAU;AACzB,IAAM,eAAe,OAAO;AAG5B,IAAM,cAAc,CAAC,SAAiB,SAAmB;AACrD,MAAI,cAAc;AACd,IAAAC,aAAY,MAAM,0BAA0B,OAAO,IAAI,IAAI;AAC3D,YAAQ,IAAI,0BAA0B,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EAC9F;AACJ;AA4BO,IAAM,6BAAqC;AAAA,EAC9C,MAAM;AAAA,EACN,SAAS,CAAC,iBAAiB,iBAAiB,iBAAiB,mBAAmB;AAAA,EAChF,aAAa;AAAA;AAAA,EAEb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA,UACZ,iBAAiB;AAAA,QACrB;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAON,SAAS;AAAA,QACT,MAAM;AAAA,UACF,YAAY;AAAA,UACZ,iBAAiB;AAAA,UACjB,eAAe;AAAA,UACf,oBAAoB;AAAA,YAChB;AAAA,cACI,aAAa;AAAA,cACb,aAAa;AAAA,cACb,uBAAuB;AAAA,cACvB,eAAe;AAAA,YACnB;AAAA,UACJ;AAAA,UACA,oBAAoB;AAAA,UACpB,YAAY;AAAA,YACR,WAAW;AAAA,YACX,KAAK;AAAA,YACL,QAAQ;AAAA,UACZ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,gCAAgC;AAC1D,aAAO;AAAA,IACX;AAEA,gBAAY,kDAAkD;AAAA,MAC1D,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AACxB,YAAM,gBAAgB,gBAAgB,QAAQ,IAAI;AAElD,UAAI,CAAC,cAAc,SAAS,CAAC,cAAc,UAAU;AACjD,cAAM,IAAI,gBAAgB,8CAA8C;AAAA,MAC5E;AAEA,kBAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,kBAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,gBAAY,+CAA+C;AAE3D,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AACD,YAAMC,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAED,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,aAAa,CAAC,CAAC,cAAc;AAAA,QAC7B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,UAAU,cAAc;AAAA,QACxB,OAAO,cAAc;AAAA,QACrB,SAAS,cAAc,IAAI;AAAA,MAC/B,CAAC;AAGD,6BAAuB,eAAe,CAAC,YAAY,OAAO,CAAC;AAG3D,YAAM,gBAAgB;AAAA,QAClB,YAAY,cAAc;AAAA,QAC1B,iBAAiB,cAAc;AAAA,QAC/B,UAAU;AAAA,MACd;AAEA,UAAI;AACA,cAAM,WAAW,MAAM,MAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,YACR,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,oBAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,SAAS,SAAS,KAAK;AAG7B,YAAI,gBAAgB,0BAA0B,cAAc,OAAO,YAAY,KAAK,SAAS;AAAA;AAAA;AAC7F,yBAAiB,oBAAoB,OAAO,mBAAmB,eAAe,CAAC;AAAA;AAAA;AAC/E,yBAAiB;AAEjB,eAAO,mBAAmB,QAAQ,CAAC,SAKhC,UAAkB;AACjB,gBAAM,OAAO,IAAI,KAAK,QAAQ,aAAa,EAAE,mBAAmB;AAChE,2BAAiB;AAAA,EACnC,QAAQ,CAAC,KAAK,IAAI;AAAA,cACN,QAAQ,YAAY,eAAe,CAAC;AAAA,mBAC/B,OAAO,QAAQ,WAAW,EAAE,eAAe,CAAC;AAAA,QAC/C,CAAC;AAED,YAAI,OAAO,YAAY;AACnB,2BAAiB;AAAA;AAAA,eAEtB,OAAO,WAAW,MAAM,KAAK,OAAO,WAAW,GAAG;AAAA,QACjD;AAEA,YAAI,UAAU;AACV,sBAAY,gDAAgD,EAAE,cAAc,CAAC;AAC7E,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,UACV,CAAgC;AAAA,QACpC;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,oBAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAI,MAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,wCAAwC,MAAM,OAAO;AAAA,YACrD,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,qCAAqC;AAAA,MAC5D;AAAA,IAEJ,SAAS,OAAO;AACZ,kBAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,sCAAsC,YAAY;AAAA,UACxD,SAAS;AAAA,QACb,CAAgC;AAAA,MACpC;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,uDAAuD;AAAA,IAC9E;AAAA,EACJ;AACJ;;;AGxRA,SAAiB,eAAAC,oBAAmB;AAKpC,OAAOC,YAAW;AAQlB,IAAMC,UAAS,UAAU;AACzB,IAAMC,gBAAeD,QAAO;AAG5B,IAAME,eAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,eAAc;AACd,IAAAE,aAAY,MAAM,mBAAmB,OAAO,IAAI,IAAI;AACpD,YAAQ,IAAI,mBAAmB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EACvF;AACJ;AAqBO,IAAM,sBAA8B;AAAA,EACvC,MAAM;AAAA,EACN,SAAS,CAAC,eAAe,eAAe,gBAAgB,aAAa;AAAA,EACrE,aAAa;AAAA,EAIb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA,UACZ,iBAAiB;AAAA,QACrB;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAIN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,YAAY;AAAA,UACZ,iBAAiB;AAAA,UACjB,UAAU;AAAA,UACV,YAAY;AAAA,YACR,WAAW;AAAA,YACX,KAAK;AAAA,YACL,QAAQ;AAAA,UACZ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,wBAAwB;AAClD,aAAO;AAAA,IACX;AAEA,IAAAD,aAAY,0CAA0C;AAAA,MAClD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AACxB,YAAM,gBAAgB,gBAAgB,QAAQ,IAAI;AAElD,UAAI,CAAC,cAAc,SAAS,CAAC,cAAc,UAAU;AACjD,cAAM,IAAI,gBAAgB,8CAA8C;AAAA,MAC5E;AAEA,MAAAA,aAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,aAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,aAAY,uCAAuC;AAEnD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AACD,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AACD,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,6BAAuB,eAAe,CAAC,YAAY,OAAO,CAAC;AAE3D,UAAI;AACA,cAAM,WAAW,MAAMI,OAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,cACJ,YAAY,cAAc;AAAA,cAC1B,iBAAiB,cAAc;AAAA,YACnC;AAAA,YACA,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,aAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,SAAS,SAAS,KAAK;AAC7B,cAAM,QAAQ,OAAO,OAAO,QAAQ,EAAE,QAAQ,CAAC;AAE/C,cAAM,gBAAgB,0BAA0B,cAAc,KAAK;AAAA;AAAA,UACpD,KAAK;AAAA,YACH,OAAO,gBAAgB,MAAM,GAAG,CAAC,CAAC,MAAM,OAAO,gBAAgB,MAAM,EAAE,CAAC;AAAA,eACrE,OAAO,WAAW,MAAM,UAAU,OAAO,WAAW,GAAG;AAE3E,YAAI,UAAU;AACV,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,UACV,CAAyB;AAAA,QAC7B;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,aAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,OAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,gCAAgC,MAAM,OAAO;AAAA,YAC7C,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,6BAA6B;AAAA,MACpD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,aAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,8BAA8B,YAAY;AAAA,UAChD,SAAS;AAAA,QACb,CAAyB;AAAA,MAC7B;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,+CAA+C;AAAA,IACtE;AAAA,EACJ;AACJ;;;ACtOA,SAAiB,eAAAG,oBAAmB;AAKpC,OAAOC,YAAW;AAQlB,IAAMC,UAAS,UAAU;AACzB,IAAMC,gBAAeD,QAAO;AAG5B,IAAME,eAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,eAAc;AACd,IAAAE,aAAY,MAAM,uBAAuB,OAAO,IAAI,IAAI;AACxD,YAAQ,IAAI,uBAAuB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EAC3F;AACJ;AAsDO,IAAM,0BAAkC;AAAA,EAC3C,MAAM;AAAA,EACN,SAAS,CAAC,kBAAkB,kBAAkB,mBAAmB,kBAAkB;AAAA,EACnF,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA,UACZ,iBAAiB;AAAA,UACjB,UAAU;AAAA,UACV,eAAe;AAAA,UACf,aAAa;AAAA,QACjB;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAWN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,WAAW,CAAC;AAAA,YACR,aAAa;AAAA,YACb,WAAW;AAAA,YACX,iBAAiB;AAAA,YACjB,OAAO;AAAA,YACP,iBAAiB;AAAA,YACjB,YAAY;AAAA,YACZ,WAAW;AAAA,YACX,aAAa;AAAA,YACb,eAAe;AAAA,YACf,WAAW;AAAA,YACX,iBAAiB;AAAA,YACjB,aAAa;AAAA,YACb,WAAW;AAAA,UACf,CAAC;AAAA,UACD,YAAY;AAAA,YACR,WAAW;AAAA,YACX,KAAK;AAAA,YACL,QAAQ;AAAA,UACZ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAKD,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,4BAA4B;AACtD,aAAO;AAAA,IACX;AAEA,IAAAD,aAAY,8CAA8C;AAAA,MACtD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AACxB,YAAM,gBAAgB,gBAAgB,QAAQ,IAAI;AAElD,UAAI,CAAC,cAAc,SAAS,CAAC,cAAc,UAAU;AACjD,cAAM,IAAI,gBAAgB,8CAA8C;AAAA,MAC5E;AAEA,UAAI,cAAc,iBAAiB,cAAc,aAAa;AAC1D,YAAI,cAAc,gBAAgB,cAAc,aAAa;AACzD,gBAAM,IAAI,gBAAgB,+CAA+C;AAAA,QAC7E;AAAA,MACJ;AAEA,MAAAA,aAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,aAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,aAAY,2CAA2C;AAEvD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAGD,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,aAAa,CAAC,CAAC,cAAc;AAAA,QAC7B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,kBAAkB,CAAC,CAAC,cAAc;AAAA,QAClC,gBAAgB,CAAC,CAAC,cAAc;AAAA,QAChC,UAAU,cAAc;AAAA,QACxB,OAAO,cAAc;AAAA,QACrB,eAAe,cAAc;AAAA,QAC7B,aAAa,cAAc;AAAA,MAC/B,CAAC;AAED,6BAAuB,eAAe,CAAC,YAAY,SAAS,iBAAiB,aAAa,CAAC;AAE3F,UAAI;AACA,cAAM,WAAW,MAAMI,OAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,cACJ,SAAS,cAAc;AAAA,cACvB,YAAY,CAAC,cAAc,KAAK;AAAA,cAChC,eAAe,cAAc;AAAA,cAC7B,aAAa,cAAc;AAAA,cAC3B,UAAU,eAAe,SAAS,YAAY;AAAA,YAClD;AAAA,YACA,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,aAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,SAAS,SAAS,KAAK;AAE7B,YAAI,gBAAgB,sBAAsB,cAAc,OAAO,YAAY,KAAK,SAAS;AAAA;AAAA;AAEzF,eAAO,UAAU,QAAQ,CAAC,UAAyB,UAAkB;AACjE,gBAAM,OAAO,IAAI,KAAK,SAAS,YAAY,GAAI,EAAE,eAAe;AAChE,gBAAM,QAAQ,OAAO,SAAS,KAAK,EAAE,eAAe;AAEpD,2BAAiB,GAAG,QAAQ,CAAC;AAAA;AAC7B,2BAAiB,YAAY,SAAS,YAAY,MAAM,GAAG,CAAC,CAAC,MAAM,SAAS,YAAY,MAAM,EAAE,CAAC;AAAA;AACjG,2BAAiB,UAAU,SAAS,UAAU,MAAM,GAAG,CAAC,CAAC,MAAM,SAAS,UAAU,MAAM,EAAE,CAAC;AAAA;AAC3F,2BAAiB,cAAc,KAAK,IAAI,SAAS,WAAW;AAAA;AAC5D,2BAAiB,aAAa,SAAS,SAAS;AAAA;AAChD,2BAAiB,YAAY,IAAI;AAAA;AAAA;AAAA,QACrC,CAAC;AAED,YAAI,OAAO,YAAY;AACnB,2BAAiB;AAAA,eAAkB,OAAO,WAAW,MAAM,UAAU,OAAO,WAAW,GAAG;AAAA;AAAA,QAC9F;AAEA,YAAI,UAAU;AACV,UAAAA,aAAY,gDAAgD,EAAE,cAAc,CAAC;AAC7E,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,cACF,WAAW,OAAO;AAAA,cAClB,eAAe,OAAO;AAAA,YAC1B;AAAA,UACJ,CAA6B;AAAA,QACjC;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,aAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,OAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,oCAAoC,MAAM,OAAO;AAAA,YACjD,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,iCAAiC;AAAA,MACxD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,aAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,kCAAkC,YAAY;AAAA,UACpD,SAAS;AAAA,QACb,CAA6B;AAAA,MACjC;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,mDAAmD;AAAA,IAC1E;AAAA,EACJ;AACJ;;;AC3TA,SAAiB,eAAAG,oBAAmB;AAKpC,OAAOC,YAAW;AAQlB,IAAMC,UAAS,UAAU;AACzB,IAAMC,gBAAeD,QAAO;AAG5B,IAAME,eAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,eAAc;AACd,IAAAE,aAAY,MAAM,uBAAuB,OAAO,IAAI,IAAI;AACxD,YAAQ,IAAI,uBAAuB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EAC3F;AACJ;AA8CO,IAAM,0BAAkC;AAAA,EAC3C,MAAM;AAAA,EACN,SAAS,CAAC,iBAAiB,gBAAgB,gBAAgB,oBAAoB;AAAA,EAC/E,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY,CAAC,KAAK;AAAA,UAClB,eAAe;AAAA,QACnB;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAQN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,SAAS;AAAA,UACT,UAAU,CAAC;AAAA,YACP,YAAY;AAAA,YACZ,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,mBAAmB;AAAA,YACnB,YAAY;AAAA,YACZ,eAAe;AAAA,YACf,WAAW;AAAA,UACf,GAAG;AAAA,YACC,YAAY;AAAA,YACZ,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,mBAAmB;AAAA,YACnB,YAAY;AAAA,YACZ,eAAe;AAAA,YACf,WAAW;AAAA,YACX,iBAAiB;AAAA,UACrB,CAAC;AAAA,QACL;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,4BAA4B;AACtD,aAAO;AAAA,IACX;AAEA,IAAAD,aAAY,8CAA8C;AAAA,MACtD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AAExB,UAAI,CAAC,QAAQ,SAAS,eAAe;AACjC,cAAM,IAAI,gBAAgB,4BAA4B;AAAA,MAC1D;AAEA,UAAI,QAAQ,SAAS,cAAc,CAAC,MAAM,QAAQ,QAAQ,QAAQ,UAAU,GAAG;AAC3E,cAAM,IAAI,gBAAgB,6BAA6B;AAAA,MAC3D;AAEA,MAAAA,aAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,aAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,aAAY,2CAA2C;AAEvD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AAED,cAAQ,IAAI,oCAAoC;AAAA,QAC5C,SAAS,CAAC,CAAC,gBAAgB;AAAA,QAC3B,YAAY,CAAC,CAAC,gBAAgB;AAAA,QAC9B,aAAa,gBAAgB;AAAA,QAC7B,aAAa,OAAO,gBAAgB;AAAA,MACxC,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAED,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,WAAW,CAAC,CAAC,cAAc;AAAA,QAC3B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,QAAQ,cAAc;AAAA,QACtB,OAAO,cAAc;AAAA,QACrB,SAAS,cAAc,IAAI;AAAA,MAC/B,CAAC;AAGD,6BAAuB,eAAe,CAAC,UAAU,OAAO,CAAC;AAGzD,YAAM,gBAAgB;AAAA,QAClB,YAAY,CAAC,cAAc,KAAK;AAAA,QAChC,eAAe,cAAc;AAAA,MACjC;AAEA,cAAQ,IAAI,mCAAmC;AAAA,QAC3C,QAAQ;AAAA,QACR,UAAU,eAAe,WAAW;AAAA,MACxC,CAAC;AAED,UAAI;AACA,cAAM,WAAW,MAAMI,OAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,YACR,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,aAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,WAAW,SAAS,KAAK,OAAO;AACtC,cAAM,UAAU,cAAc;AAG9B,YAAI,gBAAgB,oCAAoC,SAAS,MAAM,GAAG,CAAC,CAAC,MAAM,SAAS,MAAM,EAAE,CAAC;AAAA;AAAA;AAGpG,iBAAS,QAAQ,CAAC,SAAuB,UAAkB;AACvD,2BAAiB,GAAG,QAAQ,CAAC,KAAK,QAAQ,SAAS,KAAK,QAAQ,SAAS;AAAA;AACzE,2BAAiB,eAAe,QAAQ,OAAO,IAAI,QAAQ,WAAW;AAAA;AACtE,cAAI,QAAQ,iBAAiB;AACzB,6BAAiB,gBAAgB,QAAQ,gBAAgB,MAAM,GAAG,CAAC,CAAC,MAAM,QAAQ,gBAAgB,MAAM,EAAE,CAAC;AAAA;AAAA,UAC/G;AACA,2BAAiB,kBAAkB,OAAO,WAAW,QAAQ,UAAU,EAAE,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA,QACvF,CAAC;AAKD,YAAI,UAAU;AACV,UAAAA,aAAY,gDAAgD,EAAE,cAAc,CAAC;AAC7E,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,cACF;AAAA,cACA;AAAA,YACJ;AAAA,UACJ,CAA6B;AAAA,QACjC;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,aAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,OAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,iCAAiC,MAAM,OAAO;AAAA,YAC9C,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,8BAA8B;AAAA,MACrD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,aAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,kCAAkC,YAAY;AAAA,UACpD,SAAS;AAAA,QACb,CAA6B;AAAA,MACjC;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,mDAAmD;AAAA,IAC1E;AAAA,EACJ;AACJ;;;ACzTA,SAAiB,eAAAG,oBAAmB;AAKpC,OAAOC,YAAW;AAQlB,IAAMC,UAAS,UAAU;AACzB,IAAMC,gBAAeD,QAAO;AAG5B,IAAME,eAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,eAAc;AACd,IAAAE,aAAY,MAAM,8BAA8B,OAAO,IAAI,IAAI;AAC/D,YAAQ,IAAI,8BAA8B,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EAClG;AACJ;AAyEO,IAAM,iCAAyC;AAAA,EAClD,MAAM;AAAA,EACN,SAAS,CAAC,YAAY,YAAY,qBAAqB,iBAAiB;AAAA,EACxE,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA,UACZ,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,QACjB;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAWN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,cAAc,CAAC;AAAA,YACX,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,IAAI;AAAA,YACJ,MAAM;AAAA,YACN,OAAO;AAAA,YACP,KAAK;AAAA,YACL,UAAU;AAAA,YACV,SAAS;AAAA,YACT,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,WAAW;AAAA,UACf,CAAC;AAAA,QACL;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAKD,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,oCAAoC;AAC9D,aAAO;AAAA,IACX;AAEA,IAAAD,aAAY,sDAAsD;AAAA,MAC9D,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AACxB,YAAM,gBAAgB,gBAAgB,QAAQ,IAAI;AAElD,UAAI,CAAC,cAAc,SAAS,CAAC,cAAc,UAAU;AACjD,cAAM,IAAI,gBAAgB,qCAAqC;AAAA,MACnE;AAGA,UAAI,QAAQ,SAAS,aAAa,QAAQ,QAAQ,WAAW,KAAK,QAAQ,QAAQ,WAAW,MAAM;AAC/F,cAAM,IAAI,gBAAgB,qCAAqC;AAAA,MACnE;AAEA,MAAAA,aAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,aAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,aAAY,mDAAmD;AAE/D,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AAED,cAAQ,IAAI,oCAAoC;AAAA,QAC5C,SAAS,CAAC,CAAC,gBAAgB;AAAA,QAC3B,YAAY,CAAC,CAAC,gBAAgB;AAAA,QAC9B,aAAa,gBAAgB;AAAA,QAC7B,aAAa,OAAO,gBAAgB;AAAA,MACxC,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAGD,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,aAAa,CAAC,CAAC,cAAc;AAAA,QAC7B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,UAAU,cAAc;AAAA,QACxB,OAAO,cAAc;AAAA,MACzB,CAAC;AAED,6BAAuB,eAAe,CAAC,YAAY,OAAO,CAAC;AAE3D,UAAI;AACA,cAAM,WAAW,MAAMI,OAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,cACJ,YAAY,CAAC,cAAc,KAAK;AAAA,cAChC,SAAS,cAAc;AAAA,cACvB,UAAU,eAAe,SAAS,YAAY;AAAA,cAC9C,aAAa,eAAe,SAAS,eAAe;AAAA,YACxD;AAAA,YACA,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,SAAS,SAAS,KAAK;AAC7B,YAAI,gBAAgB,oBAAoB,cAAc,QAAQ,OAAO,cAAc,OAAO,YAAY,KAAK,SAAS;AAAA;AAAA;AAEpH,eAAO,aAAa,QAAQ,CAAC,IAAiB,UAAkB;AAC5D,gBAAM,OAAO,IAAI,KAAK,OAAO,SAAS,GAAG,WAAW,EAAE,IAAI,GAAI,EAAE,eAAe;AAC/E,gBAAM,QAAQ,OAAO,SAAS,GAAG,OAAO,EAAE,IAAI;AAC9C,gBAAM,SAAS,GAAG,WAAW,QAAQ,YAAY;AAEjD,2BAAiB,GAAG,QAAQ,CAAC;AAAA;AAC7B,2BAAiB,YAAY,GAAG,KAAK,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,KAAK,MAAM,EAAE,CAAC;AAAA;AACvE,2BAAiB,YAAY,GAAG,KAAK,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,KAAK,MAAM,EAAE,CAAC;AAAA;AACvE,2BAAiB,UAAU,GAAG,GAAG,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC;AAAA;AACjE,2BAAiB,aAAa,MAAM,QAAQ,CAAC,CAAC;AAAA;AAC9C,2BAAiB,cAAc,MAAM;AAAA;AACrC,2BAAiB,YAAY,IAAI;AAAA;AAAA;AAAA,QACrC,CAAC;AAED,YAAI,UAAU;AACV,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,cACF,cAAc,OAAO;AAAA,cACrB,eAAe,OAAO;AAAA,cACtB,YAAY,OAAO;AAAA,YACvB;AAAA,UACJ,CAAoC;AAAA,QACxC;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAF,aAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,OAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,iCAAiC,MAAM,OAAO;AAAA,YAC9C,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,8BAA8B;AAAA,MACrD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,aAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,+BAA+B,YAAY;AAAA,UACjD,SAAS;AAAA,QACb,CAAoC;AAAA,MACxC;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,2DAA2D;AAAA,IAClF;AAAA,EACJ;AACJ;;;ACvUA,SAAiB,eAAAG,oBAAmB;AAKpC,OAAOC,YAAW;AAQlB,IAAMC,UAAS,UAAU;AACzB,IAAMC,gBAAeD,QAAO;AAG5B,IAAME,eAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,eAAc;AACd,IAAAE,aAAY,MAAM,2BAA2B,OAAO,IAAI,IAAI;AAC5D,YAAQ,IAAI,2BAA2B,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EAC/F;AACJ;AAyCO,IAAM,8BAAsC;AAAA,EAC/C,MAAM;AAAA,EACN,SAAS,CAAC,UAAU,oBAAoB,WAAW,qBAAqB;AAAA,EACxE,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA,UACZ,iBAAiB;AAAA,UACjB,aAAa;AAAA,QACjB;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAUN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,cAAc,CAAC;AAAA,YACX,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,IAAI;AAAA,YACJ,MAAM;AAAA,YACN,OAAO;AAAA,YACP,KAAK;AAAA,YACL,UAAU;AAAA,YACV,SAAS;AAAA,YACT,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,WAAW;AAAA,UACf,CAAC;AAAA,QACL;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,iCAAiC;AAC3D,aAAO;AAAA,IACX;AAEA,IAAAD,aAAY,mDAAmD;AAAA,MAC3D,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AACxB,YAAM,gBAAgB,gBAAgB,QAAQ,IAAI;AAElD,UAAI,CAAC,cAAc,SAAS,CAAC,cAAc,QAAQ;AAC/C,cAAM,IAAI,gBAAgB,8CAA8C;AAAA,MAC5E;AAGA,UAAI,CAAC,sBAAsB,KAAK,cAAc,MAAM,GAAG;AACnD,cAAM,IAAI,gBAAgB,iCAAiC;AAAA,MAC/D;AAEA,MAAAA,aAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,aAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,aAAY,gDAAgD;AAE5D,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AAED,cAAQ,IAAI,oCAAoC;AAAA,QAC5C,SAAS,CAAC,CAAC,gBAAgB;AAAA,QAC3B,YAAY,CAAC,CAAC,gBAAgB;AAAA,QAC9B,aAAa,gBAAgB;AAAA,QAC7B,aAAa,OAAO,gBAAgB;AAAA,MACxC,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAGD,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,OAAO,CAAC,CAAC,cAAc;AAAA,QACvB,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,IAAI,cAAc;AAAA,QAClB,OAAO,cAAc;AAAA,MACzB,CAAC;AAED,6BAAuB,eAAe,CAAC,UAAU,OAAO,CAAC;AAEzD,UAAI;AACA,cAAM,WAAW,MAAMI,OAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,cACJ,YAAY,cAAc;AAAA,cAC1B,iBAAiB,cAAc;AAAA,cAC/B,aAAa;AAAA,YACjB;AAAA,YACA,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,cAAc,SAAS,KAAK,OAAO,aAAa,CAAC;AACvD,cAAM,YAAY,IAAI,KAAK,OAAO,SAAS,YAAY,WAAW,EAAE,IAAI,GAAI,EAAE,eAAe;AAC7F,cAAM,QAAQ,OAAO,SAAS,YAAY,OAAO,EAAE,IAAI;AACvD,cAAM,WAAW,OAAO,SAAS,YAAY,UAAU,EAAE,IAAI;AAC7D,cAAM,UAAU,OAAO,SAAS,YAAY,SAAS,EAAE;AACvD,cAAM,cAAc,OAAO,SAAS,YAAY,aAAa,EAAE;AAC/D,cAAM,SAAS,YAAY,WAAW,QAAQ,YAAY;AAE1D,YAAI,gBAAgB,0BAA0B,cAAc,OAAO,YAAY,KAAK,SAAS;AAAA;AAAA;AAC7F,yBAAiB,SAAS,YAAY,IAAI;AAAA;AAC1C,yBAAiB,WAAW,MAAM;AAAA;AAClC,yBAAiB,SAAS,YAAY,KAAK,MAAM,GAAG,CAAC,CAAC,MAAM,YAAY,KAAK,MAAM,EAAE,CAAC;AAAA;AACtF,yBAAiB,OAAO,YAAY,GAAG,MAAM,GAAG,CAAC,CAAC,MAAM,YAAY,GAAG,MAAM,EAAE,CAAC;AAAA;AAChF,yBAAiB,UAAU,MAAM,QAAQ,CAAC,CAAC;AAAA;AAC3C,yBAAiB,aAAa,QAAQ,eAAe,CAAC;AAAA;AACtD,yBAAiB,cAAc,SAAS,QAAQ,CAAC,CAAC;AAAA;AAClD,yBAAiB,UAAU,YAAY,eAAe,CAAC;AAAA;AACvD,yBAAiB,SAAS,SAAS;AAEnC,YAAI,UAAU;AACV,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM,SAAS,KAAK;AAAA,UACxB,CAAiC;AAAA,QACrC;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAF,aAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,OAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,gCAAgC,MAAM,OAAO;AAAA,YAC7C,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,6BAA6B;AAAA,MACpD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,aAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,8BAA8B,YAAY;AAAA,UAChD,SAAS;AAAA,QACb,CAAiC;AAAA,MACrC;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,wDAAwD;AAAA,IAC/E;AAAA,EACJ;AACJ;;;AClSA,SAAiB,eAAAG,oBAAmB;AAKpC,OAAOC,YAAW;AAQlB,IAAMC,UAAS,UAAU;AACzB,IAAMC,gBAAeD,QAAO;AAG5B,IAAME,eAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,eAAc;AACd,IAAAE,aAAY,MAAM,wBAAwB,OAAO,IAAI,IAAI;AACzD,YAAQ,IAAI,wBAAwB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EAC5F;AACJ;AAsCO,IAAM,2BAAmC;AAAA,EAC5C,MAAM;AAAA,EACN,SAAS,CAAC,eAAe,mBAAmB,iBAAiB,eAAe;AAAA,EAC5E,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY,CAAC,KAAK;AAAA,QACtB;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAQN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,OAAO,CAAC;AAAA,YACJ,YAAY;AAAA,YACZ,aAAa;AAAA,YACb,mBAAmB;AAAA,YACnB,eAAe;AAAA,YACf,KAAK;AAAA,YACL,UAAU;AAAA,YACV,WAAW;AAAA,YACX,kBAAkB;AAAA,UACtB,CAAC;AAAA,QACL;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,6BAA6B;AACvD,aAAO;AAAA,IACX;AAEA,IAAAD,aAAY,+CAA+C;AAAA,MACvD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AAExB,UAAI,QAAQ,SAAS,cAAc,CAAC,MAAM,QAAQ,QAAQ,QAAQ,UAAU,GAAG;AAC3E,cAAM,IAAI,gBAAgB,6BAA6B;AAAA,MAC3D;AAEA,MAAAA,aAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,aAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,aAAY,4CAA4C;AAExD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AAED,cAAQ,IAAI,oCAAoC;AAAA,QAC5C,SAAS,CAAC,CAAC,gBAAgB;AAAA,QAC3B,YAAY,CAAC,CAAC,gBAAgB;AAAA,QAC9B,aAAa,gBAAgB;AAAA,QAC7B,aAAa,OAAO,gBAAgB;AAAA,MACxC,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAED,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,OAAO,cAAc;AAAA,QACrB,SAAS,cAAc,IAAI;AAAA,MAC/B,CAAC;AAGD,6BAAuB,eAAe,CAAC,OAAO,CAAC;AAG/C,YAAM,gBAAgB;AAAA,QAClB,YAAY,cAAc;AAAA;AAAA,MAC9B;AAEA,cAAQ,IAAI,mCAAmC;AAAA,QAC3C,QAAQ;AAAA,QACR,UAAU,eAAe,WAAW;AAAA,MACxC,CAAC;AAED,UAAI;AACA,cAAM,WAAW,MAAMI,OAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,YACR,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,aAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,QAAQ,SAAS,KAAK,OAAO;AAGnC,YAAI,gBAAgB;AACpB,mBAAW,QAAQ,OAAO;AACtB,2BAAiB,kBAAkB,KAAK,WAAW,YAAY,CAAC;AAAA;AAAA;AAChE,2BAAiB,iBAAiB,KAAK,kBAAkB,eAAe,CAAC;AAAA;AACzE,2BAAiB,wBAAwB,KAAK,yBAAyB,KAAK,QAAQ,CAAC,CAAC;AAAA;AACtF,2BAAiB,kBAAkB,KAAK,mBAAmB,KAAK,QAAQ,CAAC,CAAC;AAAA;AAC1E,2BAAiB,gBAAgB,KAAK,cAAc,KAAM,QAAQ,CAAC,CAAC;AAAA;AACpE,2BAAiB,uBAAuB,OAAO,KAAK,kBAAkB,EAAE,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA,QACtF;AAGA,YAAI,UAAU;AACV,UAAAA,aAAY,gDAAgD,EAAE,cAAc,CAAC;AAC7E,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,cACF,OAAO,MAAM,IAAI,CAAC,UAA+B;AAAA,gBAC7C,YAAY,KAAK;AAAA,gBACjB,aAAa,KAAK;AAAA,gBAClB,mBAAmB,KAAK,uBAAuB,SAAS;AAAA,gBACxD,aAAa,KAAK,iBAAiB,SAAS;AAAA,gBAC5C,WAAW,KAAK,cAAc;AAAA,gBAC9B,iBAAiB,KAAK;AAAA,cAC1B,EAAE;AAAA,YACN;AAAA,UACJ,CAA8B;AAAA,QAClC;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,aAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,OAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,qCAAqC,MAAM,OAAO;AAAA,YAClD,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,kCAAkC;AAAA,MACzD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,aAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,mCAAmC,YAAY;AAAA,UACrD,SAAS;AAAA,QACb,CAA8B;AAAA,MAClC;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,oDAAoD;AAAA,IAC3E;AAAA,EACJ;AACJ;;;AC/RA,SAAiB,eAAAG,oBAAmB;AAKpC,OAAOC,YAAW;AAQlB,IAAMC,UAAS,UAAU;AACzB,IAAMC,gBAAeD,QAAO;AAG5B,IAAME,eAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,eAAc;AACd,IAAAE,aAAY,MAAM,mBAAmB,OAAO,IAAI,IAAI;AACpD,YAAQ,IAAI,mBAAmB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EACvF;AACJ;AAiCO,IAAM,sBAA8B;AAAA,EACvC,MAAM;AAAA,EACN,SAAS,CAAC,mBAAmB,mBAAmB,mBAAmB,kBAAkB;AAAA,EACrF,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,WAAW;AAAA,QACf;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAUN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,YAAY;AAAA,YACR;AAAA,cACI,YAAY;AAAA,cACZ,SAAS;AAAA,cACT,MAAM;AAAA,cACN,QAAQ;AAAA,cACR,UAAU;AAAA,YACd;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAKD,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,uBAAuB;AACjD,aAAO;AAAA,IACX;AAEA,IAAAD,aAAY,yCAAyC;AAAA,MACjD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AAExB,UAAI,CAAC,QAAQ,SAAS,YAAY;AAC9B,cAAM,IAAI,gBAAgB,wBAAwB;AAAA,MACtD;AAEA,MAAAA,aAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,aAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,aAAY,sCAAsC;AAElD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAED,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,OAAO,cAAc;AAAA,QACrB,SAAS,cAAc,IAAI;AAAA,MAC/B,CAAC;AAGD,6BAAuB,eAAe,CAAC,OAAO,CAAC;AAG/C,YAAM,gBAAgB;AAAA,QAClB,YAAY,cAAc;AAAA,QAC1B,UAAU,eAAe,SAAS,YAAY;AAAA,MAClD;AAEA,cAAQ,IAAI,mCAAmC;AAAA,QAC3C,QAAQ;AAAA,QACR,UAAU,eAAe,WAAW;AAAA,MACxC,CAAC;AAED,UAAI;AACA,cAAM,WAAW,MAAMI,OAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,YACR,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,aAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,aAAa,SAAS,KAAK,OAAO;AAGxC,YAAI,gBAAgB,oCAAoC,cAAc,QAAQ,cAAc,MAAM,CAAC,EAAE,YAAY,IAAI,eAAe;AAAA;AAAA;AAEpI,YAAI,QAAQ;AACZ,mBAAW,YAAY,YAAY;AAC/B,2BAAiB;AAAA,YACb,GAAG,QAAQ,CAAC,KAAK,SAAS,IAAI,KAAK,SAAS,MAAM;AAAA,YAClD,SAAS,UAAU,gBAAgB,SAAS,QAAQ,MAAM,GAAG,CAAC,CAAC,MAAM,SAAS,QAAQ,MAAM,EAAE,CAAC,KAAK;AAAA,YACpG,gBAAgB,SAAS,QAAQ;AAAA,YACjC,SAAS,YAAY,YAAY,SAAS,SAAS,KAAK;AAAA,YACxD;AAAA,YACA;AAAA,UACJ,EAAE,OAAO,OAAO,EAAE,KAAK,IAAI;AAC3B;AAAA,QACJ;AAEA,YAAI,UAAU;AACV,UAAAA,aAAY,gDAAgD,EAAE,cAAc,CAAC;AAC7E,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,cACF;AAAA,cACA,YAAY,SAAS,KAAK,OAAO;AAAA,YACrC;AAAA,UACJ,CAAyB;AAAA,QAC7B;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,aAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,OAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,oCAAoC,MAAM,OAAO;AAAA,YACjD,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,iCAAiC;AAAA,MACxD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,aAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,6BAA6B,YAAY;AAAA,UAC/C,SAAS;AAAA,QACb,CAAyB;AAAA,MAC7B;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,8CAA8C;AAAA,IACrE;AAAA,EACJ;AACJ;;;ACvRA,SAAiB,eAAAG,qBAAmB;AAKpC,OAAOC,YAAW;AAQlB,IAAMC,UAAS,UAAU;AACzB,IAAMC,gBAAeD,QAAO;AAG5B,IAAME,eAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,eAAc;AACd,IAAAE,cAAY,MAAM,qBAAqB,OAAO,IAAI,IAAI;AACtD,YAAQ,IAAI,qBAAqB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EACzF;AACJ;AAiDO,IAAM,wBAAgC;AAAA,EACzC,MAAM;AAAA,EACN,SAAS,CAAC,sBAAsB,qBAAqB,qBAAqB,mBAAmB;AAAA,EAC7F,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA;AAAA,UACZ,SAAS;AAAA,UACT,UAAU;AAAA,UACV,WAAW;AAAA,QACf;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAaN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,cAAc,CAAC;AAAA,YACX,YAAY;AAAA,YACZ,iBAAiB;AAAA,YACjB,aAAa;AAAA,YACb,WAAW;AAAA,YACX,MAAM;AAAA,YACN,IAAI;AAAA,YACJ,OAAO;AAAA,YACP,UAAU;AAAA,YACV,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,MAAM,CAAC;AAAA,cACH,SAAS;AAAA,cACT,QAAQ,CAAC,aAAa;AAAA,cACtB,MAAM;AAAA,cACN,UAAU;AAAA,YACd,CAAC;AAAA,UACL,CAAC;AAAA,QACL;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,yBAAyB;AACnD,aAAO;AAAA,IACX;AAEA,IAAAD,aAAY,2CAA2C;AAAA,MACnD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AAGxB,UAAI,CAAC,QAAQ,SAAS,SAAS;AAC3B,cAAM,IAAI,gBAAgB,4BAA4B;AAAA,MAC1D;AAEA,MAAAA,aAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,aAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,aAAY,wCAAwC;AAEpD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AAGzD,6BAAuB,eAAe,CAAC,QAAQ,CAAC;AAEhD,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,YAAM,gBAAgB;AAAA,QAClB,YAAY,cAAc,SAAS;AAAA,QACnC,SAAS,cAAc;AAAA,QACvB,UAAU,eAAe,SAAS,YAAY;AAAA,QAC9C,WAAW,eAAe,SAAS;AAAA,MACvC;AAEA,UAAI;AACA,cAAM,WAAW,MAAMI,OAAM;AAAA,UAKzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,YACR,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,aAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAGD,cAAM,gBAAgB;AAAA;AAAA,yBAEb,SAAS,KAAK,OAAO,YAAY,KAAK,IAAI,CAAC;AAAA,eACrD,SAAS,KAAK,OAAO,WAAW,MAAM;AAAA,OAC9C,SAAS,KAAK,OAAO,WAAW,GAAG;AAE1B,YAAI,UAAU;AACV,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,cACF,cAAc,CAAC;AAAA,cACf,YAAY,SAAS,KAAK,OAAO;AAAA,cACjC,sBAAsB,SAAS,KAAK,OAAO;AAAA,YAC/C;AAAA,UACJ,CAA2B;AAAA,QAC/B;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,aAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,OAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,sCAAsC,MAAM,OAAO;AAAA,YACnD,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,mCAAmC;AAAA,MAC1D;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,aAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,+BAA+B,YAAY;AAAA,UACjD,SAAS;AAAA,QACb,CAA2B;AAAA,MAC/B;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,gDAAgD;AAAA,IACvE;AAAA,EACJ;AAGJ;;;ACtRA,SAAiB,eAAAG,qBAAmB;AAKpC,OAAOC,aAAW;AAQlB,IAAMC,WAAS,UAAU;AACzB,IAAMC,iBAAeD,SAAO;AAG5B,IAAME,gBAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,gBAAc;AACd,IAAAE,cAAY,MAAM,mBAAmB,OAAO,IAAI,IAAI;AACpD,YAAQ,IAAI,mBAAmB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EACvF;AACJ;AAoCO,IAAM,sBAA8B;AAAA,EACvC,MAAM;AAAA,EACN,SAAS,CAAC,qBAAqB,oBAAoB,oBAAoB,kBAAkB;AAAA,EACzF,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA;AAAA,UACZ,iBAAiB;AAAA,UACjB,UAAU;AAAA,QACd;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAON,SAAS;AAAA,QACT,MAAM;AAAA,UACF,SAAS,CAAC;AAAA,YACN,eAAe;AAAA,YACf,SAAS;AAAA,YACT,mBAAmB;AAAA,UACvB,CAAC;AAAA,UACD,YAAY;AAAA,UACZ,iBAAiB;AAAA,UACjB,eAAe;AAAA,UACf,cAAc;AAAA,UACd,YAAY;AAAA,YACR,WAAW;AAAA,YACX,KAAK;AAAA,YACL,QAAQ;AAAA,UACZ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,wBAAwB;AAClD,aAAO;AAAA,IACX;AAEA,IAAAD,cAAY,0CAA0C;AAAA,MAClD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AAExB,UAAI,CAAC,QAAQ,SAAS,iBAAiB;AACnC,cAAM,IAAI,gBAAgB,8BAA8B;AAAA,MAC5D;AAGA,UAAI,QAAQ,SAAS,cAAc,OAAO,QAAQ,QAAQ,eAAe,UAAU;AAC/E,cAAM,IAAI,gBAAgB,6BAA6B;AAAA,MAC3D;AAEA,MAAAA,cAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,cAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,cAAY,uCAAuC;AAEnD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAED,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,aAAa,CAAC,CAAC,cAAc;AAAA,QAC7B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,UAAU,cAAc;AAAA,QACxB,OAAO,cAAc;AAAA,QACrB,OAAO,cAAc;AAAA,QACrB,SAAS,cAAc,IAAI;AAAA,MAC/B,CAAC;AAGD,6BAAuB,eAAe,CAAC,UAAU,CAAC;AAElD,YAAM,gBAAgB;AAAA,QAClB,YAAY,cAAc;AAAA,QAC1B,iBAAiB,cAAc;AAAA,QAC/B,UAAU,eAAe,SAAS,YAAY;AAAA,QAC9C,WAAW,eAAe,SAAS;AAAA,MACvC;AAEA,cAAQ,IAAI,mCAAmC;AAAA,QAC3C,QAAQ;AAAA,QACR;AAAA,MACJ,CAAC;AAED,YAAM,WAAW,MAAMI,QAAM;AAAA,QACzB;AAAA,QACA;AAAA,UACI,SAAS;AAAA,UACT,QAAQ;AAAA,UACR,QAAQ;AAAA,UACR,IAAI;AAAA,QACR;AAAA,QACA;AAAA,UACI,SAAS;AAAA,YACL,gBAAgB;AAAA,UACpB;AAAA,QACJ;AAAA,MACJ;AAEA,MAAAF,cAAY,mCAAmC;AAAA,QAC3C,YAAY,SAAS;AAAA,QACrB,MAAM,SAAS;AAAA,MACnB,CAAC;AAED,YAAM,SAAS,SAAS,KAAK;AAC7B,YAAM,gBACF;AAAA,iBACC,OAAO,QAAQ,MAAM;AAAA;AAAA,EAEpC,OAAO,QAAQ;AAAA,QAAI,CAAC,eAAuB,UACzC,GAAG,QAAQ,CAAC,KAAK,aAAa;AAAA,MAClC,EAAE,KAAK,IAAI,CAAC;AAAA;AAAA,EAEV,OAAO,gBAAgB,8DAA8D,EAAE;AAAA,EACvF,OAAO,aAAa;AAAA,eACP,IAAI,KAAK,OAAO,WAAW,YAAY,GAAI,EAAE,eAAe,CAAC;AAAA,OACrE,OAAO,WAAW,GAAG;AAAA,UAClB,OAAO,WAAW,MAAM,KAAK,EAAE;AAE7B,MAAAA,cAAY,2BAA2B,EAAE,cAAc,CAAC;AAExD,UAAI,UAAU;AACV,QAAAA,cAAY,8CAA8C;AAC1D,iBAAS;AAAA,UACL,MAAM;AAAA,UACN,SAAS;AAAA,UACT,MAAM;AAAA,YACF,SAAS,OAAO,QAAQ,IAAI,CAAC,aAAqB;AAAA,cAC9C,eAAe;AAAA,cACf,SAAS;AAAA;AAAA,cACT,mBAAmB;AAAA,YACvB,EAAE;AAAA,YACF,eAAe,OAAO;AAAA,YACtB,YAAY,OAAO;AAAA,UACvB;AAAA,QACJ,CAAyB;AAAA,MAC7B;AAEA,aAAO;AAAA,IAEX,SAAS,OAAgB;AACrB,MAAAA,cAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,8BAA8B,YAAY;AAAA,UAChD,SAAS;AAAA,QACb,CAAyB;AAAA,MAC7B;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,+CAA+C;AAAA,IACtE;AAAA,EACJ;AACJ;;;ACxRA,SAAiB,eAAAG,qBAAmB;AAKpC,OAAOC,aAAW;AAQlB,IAAMC,WAAS,UAAU;AACzB,IAAMC,iBAAeD,SAAO;AAG5B,IAAME,gBAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,gBAAc;AACd,IAAAE,cAAY,MAAM,qBAAqB,OAAO,IAAI,IAAI;AACtD,YAAQ,IAAI,qBAAqB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EACzF;AACJ;AAiDO,IAAM,wBAAgC;AAAA,EACzC,MAAM;AAAA,EACN,SAAS,CAAC,sBAAsB,sBAAsB,sBAAsB,iBAAiB;AAAA,EAC7F,aAAa;AAAA;AAAA,EAKb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA,UACZ,iBAAiB;AAAA,UACjB,UAAU;AAAA,QACd;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QAWN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,WAAW;AAAA,YACP;AAAA,cACI,aAAa;AAAA,cACb,WAAW;AAAA,cACX,iBAAiB;AAAA,cACjB,OAAO;AAAA,cACP,iBAAiB;AAAA,cACjB,YAAY;AAAA,cACZ,WAAW;AAAA,cACX,aAAa;AAAA,cACb,eAAe;AAAA,cACf,WAAW;AAAA,cACX,iBAAiB;AAAA,cACjB,aAAa;AAAA,cACb,WAAW;AAAA,YACf;AAAA,YACA;AAAA,cACI,aAAa;AAAA,cACb,WAAW;AAAA,cACX,iBAAiB;AAAA,cACjB,OAAO;AAAA,cACP,iBAAiB;AAAA,cACjB,YAAY;AAAA,cACZ,WAAW;AAAA,cACX,aAAa;AAAA,cACb,eAAe;AAAA,cACf,WAAW;AAAA,cACX,iBAAiB;AAAA,cACjB,aAAa;AAAA,cACb,WAAW;AAAA,YACf;AAAA,UACJ;AAAA,UACA,YAAY;AAAA,YACR,WAAW;AAAA,YACX,KAAK;AAAA,YACL,QAAQ;AAAA,UACZ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,0BAA0B;AACpD,aAAO;AAAA,IACX;AAEA,IAAAD,cAAY,4CAA4C;AAAA,MACpD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AAExB,UAAI,CAAC,QAAQ,SAAS,cAAc,CAAC,QAAQ,SAAS,iBAAiB;AACnE,cAAM,IAAI,gBAAgB,8CAA8C;AAAA,MAC5E;AAEA,MAAAA,cAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,cAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,cAAY,yCAAyC;AAErD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AAED,cAAQ,IAAI,oCAAoC;AAAA,QAC5C,SAAS,CAAC,CAAC,gBAAgB;AAAA,QAC3B,YAAY,CAAC,CAAC,gBAAgB;AAAA,QAC9B,aAAa,gBAAgB;AAAA,QAC7B,aAAa,OAAO,gBAAgB;AAAA,MACxC,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAED,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,aAAa,CAAC,CAAC,cAAc;AAAA,QAC7B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,kBAAkB,CAAC,CAAC,cAAc;AAAA,QAClC,gBAAgB,CAAC,CAAC,cAAc;AAAA,QAChC,UAAU,cAAc;AAAA,QACxB,OAAO,cAAc;AAAA,QACrB,eAAe,cAAc;AAAA,QAC7B,aAAa,cAAc;AAAA,QAC3B,SAAS,cAAc,IAAI;AAAA,MAC/B,CAAC;AAGD,6BAAuB,eAAe,CAAC,YAAY,SAAS,iBAAiB,aAAa,CAAC;AAG3F,YAAM,gBAAgB;AAAA,QAClB,SAAS,cAAc;AAAA,QACvB,YAAY,CAAC,cAAc,KAAK;AAAA,QAChC,eAAe,cAAc;AAAA,QAC7B,aAAa,cAAc;AAAA,MAC/B;AAEA,cAAQ,IAAI,mCAAmC;AAAA,QAC3C,QAAQ;AAAA,QACR,UAAU,eAAe,WAAW;AAAA,MACxC,CAAC;AAED,UAAI;AACA,cAAM,WAAW,MAAMI,QAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,YACR,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,cAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,YAAY,SAAS,KAAK,OAAO;AAGvC,YAAI,gBAAgB;AACpB,kBAAU,QAAQ,CAAC,UAAuB,UAAkB;AACxD,2BAAiB,GAAG,QAAQ,CAAC,iBAAiB,SAAS,SAAS,KAAK,SAAS,WAAW;AAAA;AACzF,2BAAiB,YAAY,SAAS,YAAY,MAAM,GAAG,CAAC,CAAC,MAAM,SAAS,YAAY,MAAM,EAAE,CAAC;AAAA;AACjG,2BAAiB,UAAU,SAAS,UAAU,MAAM,GAAG,CAAC,CAAC,MAAM,SAAS,UAAU,MAAM,EAAE,CAAC;AAAA;AAC3F,2BAAiB,cAAc,SAAS,KAAK;AAAA;AAC7C,2BAAiB,YAAY,IAAI,KAAK,SAAS,YAAY,GAAI,EAAE,eAAe,CAAC;AAAA;AACjF,2BAAiB,eAAe,SAAS,eAAe;AAAA;AACxD,cAAI,SAAS,WAAW;AACpB,6BAAiB,kBAAkB,SAAS,SAAS;AAAA;AAAA,UACzD;AACA,2BAAiB;AAAA,QACrB,CAAC;AAED,YAAI,UAAU;AACV,UAAAA,cAAY,gDAAgD,EAAE,cAAc,CAAC;AAC7E,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,cACF;AAAA,cACA,YAAY,SAAS,KAAK,OAAO;AAAA,YACrC;AAAA,UACJ,CAA2B;AAAA,QAC/B;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,cAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,QAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,kCAAkC,MAAM,OAAO;AAAA,YAC/C,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,+BAA+B;AAAA,MACtD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,cAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,gCAAgC,YAAY;AAAA,UAClD,SAAS;AAAA,QACb,CAA2B;AAAA,MAC/B;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,iDAAiD;AAAA,IACxE;AAAA,EACJ;AACJ;;;ACpVA,SAAiB,eAAAG,qBAAmB;AAKpC,OAAOC,aAAW;AAQlB,IAAMC,WAAS,UAAU;AACzB,IAAMC,iBAAeD,SAAO;AAG5B,IAAME,gBAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,gBAAc;AACd,IAAAE,cAAY,MAAM,oBAAoB,OAAO,IAAI,IAAI;AACrD,YAAQ,IAAI,oBAAoB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EACxF;AACJ;AAkCO,IAAM,uBAA+B;AAAA,EACxC,MAAM;AAAA,EACN,SAAS,CAAC,gBAAgB,oBAAoB,YAAY,cAAc;AAAA,EACxE,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY;AAAA,UACZ,iBAAiB;AAAA,UACjB,SAAS;AAAA,QACb;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QASN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,UAAU;AAAA,YACN,YAAY;AAAA,YACZ,iBAAiB;AAAA,YACjB,cAAc;AAAA,YACd,SAAS;AAAA,UACb;AAAA,UACA,YAAY;AAAA,YACR,cAAc;AAAA,YACd,UAAU;AAAA,YACV,UAAU;AAAA,YACV,MAAM;AAAA,YACN,aAAa;AAAA,YACb,QAAQ;AAAA,cACJ,EAAE,YAAY,cAAc,OAAO,OAAO;AAAA,cAC1C,EAAE,YAAY,OAAO,OAAO,aAAa;AAAA,cACzC,EAAE,YAAY,QAAQ,OAAO,QAAQ;AAAA,cACrC,EAAE,YAAY,SAAS,OAAO,OAAO;AAAA,YACzC;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,yBAAyB;AACnD,aAAO;AAAA,IACX;AAEA,IAAAD,cAAY,2CAA2C;AAAA,MACnD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AAExB,UAAI,CAAC,QAAQ,SAAS,cAAc,CAAC,QAAQ,SAAS,mBAAmB,CAAC,QAAQ,SAAS,SAAS;AAChG,cAAM,IAAI,gBAAgB,yDAAyD;AAAA,MACvF;AAEA,MAAAA,cAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,cAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,cAAY,wCAAwC;AAEpD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,QACvB,SAAS,OAAO,KAAK,QAAQ,WAAW,CAAC,CAAC;AAAA,MAC9C,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AAED,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,cAAQ,IAAI,uBAAuB;AAAA,QAC/B,MAAM,eAAe;AAAA,QACrB,cAAc,eAAe,MAAM;AAAA,MACvC,CAAC;AAED,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,aAAa,CAAC,CAAC,cAAc;AAAA,QAC7B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,UAAU,cAAc;AAAA,QACxB,OAAO,cAAc;AAAA,QACrB,OAAO,cAAc;AAAA,QACrB,SAAS,cAAc,IAAI;AAAA,MAC/B,CAAC;AAGD,6BAAuB,eAAe,CAAC,YAAY,SAAS,OAAO,CAAC;AAGpE,YAAM,gBAAgB;AAAA,QAClB,YAAY,cAAc;AAAA,QAC1B,iBAAiB,cAAc;AAAA,QAC/B,SAAS,cAAc;AAAA,MAC3B;AAEA,cAAQ,IAAI,mCAAmC;AAAA,QAC3C,QAAQ;AAAA,QACR,UAAU,eAAe,WAAW;AAAA,MACxC,CAAC;AAED,UAAI;AACA,cAAM,WAAW,MAAMI,QAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,YACR,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,cAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,UAAU,SAAS,KAAK;AAG9B,YAAI,gBAAgB,oBAAoB,QAAQ,WAAW,IAAI;AAAA;AAAA;AAC/D,yBAAiB,eAAe,QAAQ,WAAW,KAAK,MAAM,GAAG,EAAE,CAAC,EAAE,KAAK,CAAC;AAAA;AAC5E,yBAAiB,aAAa,QAAQ,SAAS,gBAAgB,MAAM,GAAG,CAAC,CAAC,MAAM,QAAQ,SAAS,gBAAgB,MAAM,EAAE,CAAC,KAAK,QAAQ,SAAS,YAAY;AAAA;AAAA;AAE5J,YAAI,QAAQ,WAAW,aAAa;AAChC,2BAAiB,gBAAgB,QAAQ,WAAW,WAAW;AAAA;AAAA;AAAA,QACnE;AAEA,YAAI,QAAQ,WAAW,UAAU,QAAQ,WAAW,OAAO,SAAS,GAAG;AACnE,2BAAiB;AACjB,qBAAW,SAAS,QAAQ,WAAW,QAAmD;AACtF,6BAAiB,KAAK,MAAM,UAAU,KAAK,MAAM,KAAK;AAAA;AAAA,UAC1D;AAAA,QACJ;AAEA,YAAI,QAAQ,WAAW,UAAU;AAC7B,2BAAiB;AAAA,aAAgB,QAAQ,WAAW,QAAQ;AAAA;AAAA,QAChE;AAEA,YAAI,UAAU;AACV,UAAAA,cAAY,gDAAgD,EAAE,cAAc,CAAC;AAC7E,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,UACV,CAA0B;AAAA,QAC9B;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,cAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,QAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,iCAAiC,MAAM,OAAO;AAAA,YAC9C,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,8BAA8B;AAAA,MACrD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,cAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,+BAA+B,YAAY;AAAA,UACjD,SAAS;AAAA,QACb,CAA0B;AAAA,MAC9B;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,gDAAgD;AAAA,IACvE;AAAA,EACJ;AAGJ;;;ACvSA,SAAiB,eAAAG,qBAAmB;AAKpC,OAAOC,aAAW;AAQlB,IAAMC,WAAS,UAAU;AACzB,IAAMC,iBAAeD,SAAO;AAG5B,IAAME,gBAAc,CAAC,SAAiB,SAAmB;AACrD,MAAID,gBAAc;AACd,IAAAE,cAAY,MAAM,oBAAoB,OAAO,IAAI,IAAI;AACrD,YAAQ,IAAI,oBAAoB,OAAO,IAAI,OAAO,KAAK,UAAU,MAAM,MAAM,CAAC,IAAI,EAAE;AAAA,EACxF;AACJ;AAoDO,IAAM,uBAA+B;AAAA,EACxC,MAAM;AAAA,EACN,SAAS,CAAC,aAAa,aAAa,aAAa,cAAc,gBAAgB;AAAA,EAC/E,aAAa;AAAA,EACb,UAAU,CAAC;AAAA,IACP;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,UACL,YAAY,CAAC,KAAK;AAAA,UAClB,eAAe;AAAA,UACf,UAAU;AAAA,QACd;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI,MAAM;AAAA,MACN,SAAS;AAAA,QACL,MAAM;AAAA,QASN,SAAS;AAAA,QACT,MAAM;AAAA,UACF,OAAO;AAAA,UACP,QAAQ;AAAA,YACJ;AAAA,cACI,YAAY;AAAA,cACZ,MAAM;AAAA,cACN,SAAS;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,gBAAgB;AAAA,cAChB,QAAQ;AAAA,cACR,cAAc;AAAA,cACd,iBAAiB;AAAA,YACrB;AAAA,YACA;AAAA,cACI,YAAY;AAAA,cACZ,MAAM;AAAA,cACN,SAAS;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,gBAAgB;AAAA,cAChB,QAAQ;AAAA,cACR,cAAc;AAAA,cACd,iBAAiB;AAAA,YACrB;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC;AAAA;AAAA;AAAA;AAAA,EAID,UAAU,OAAO,UAAyB,YAAsC;AAC5E,QAAI,QAAQ,SAAS,SAAS,0BAA0B;AACpD,aAAO;AAAA,IACX;AAEA,IAAAD,cAAY,4CAA4C;AAAA,MACpD,SAAS,QAAQ;AAAA,IACrB,CAAC;AAED,QAAI;AACA,YAAM,UAAU,QAAQ;AAExB,UAAI,CAAC,QAAQ,SAAS,cAAc,CAAC,QAAQ,SAAS,eAAe;AACjE,cAAM,IAAI,gBAAgB,4CAA4C;AAAA,MAC1E;AAEA,UAAI,QAAQ,SAAS,cAAc,CAAC,MAAM,QAAQ,QAAQ,QAAQ,UAAU,GAAG;AAC3E,cAAM,IAAI,gBAAgB,6BAA6B;AAAA,MAC3D;AAEA,MAAAA,cAAY,uBAAuB;AACnC,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,MAAAA,cAAY,qBAAqB,EAAE,MAAM,CAAC;AAC1C,UAAI,iBAAiB,iBAAiB;AAClC,cAAM;AAAA,MACV;AACA,YAAM,IAAI,gBAAgB,iBAAiB,QAAQ,MAAM,UAAU,0BAA0B;AAAA,IACjG;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OACL,SACA,SACA,QACA,WAAuC,CAAC,GACxC,aACmB;AACnB,IAAAA,cAAY,yCAAyC;AAErD,QAAI;AACA,YAAM,iBAAiB,QAAQ;AAC/B,cAAQ,IAAI,iCAAiC;AAAA,QACzC,aAAa,QAAQ;AAAA,QACrB,SAAS,gBAAgB;AAAA,QACzB,MAAM,QAAQ,SAAS;AAAA,MAC3B,CAAC;AAED,YAAMF,WAAS,MAAM,mBAAmB,OAAO;AAC/C,cAAQ,IAAI,6BAA6B;AAAA,QACrC,WAAW,CAAC,CAACA,SAAO;AAAA,QACpB,KAAKA,SAAO;AAAA,MAChB,CAAC;AACD,YAAM,SAASA,SAAO;AACtB,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,mBAAmB,gDAAgD;AAAA,MACjF;AAEA,YAAM,WAAW,mCAAmC,MAAM;AAG1D,YAAM,gBAAgB,gBAAgB,eAAe,IAAI;AACzD,cAAQ,IAAI,+BAA+B;AAAA,QACvC,WAAW,CAAC,CAAC,cAAc;AAAA,QAC3B,UAAU,CAAC,CAAC,cAAc;AAAA,QAC1B,QAAQ,cAAc;AAAA,QACtB,OAAO,cAAc;AAAA,QACrB,SAAS,cAAc,IAAI;AAAA,MAC/B,CAAC;AAGD,6BAAuB,eAAe,CAAC,UAAU,OAAO,CAAC;AAGzD,YAAM,gBAAgB;AAAA,QAClB,YAAY,CAAC,cAAc,KAAK;AAAA;AAAA,QAChC,eAAe,cAAc;AAAA,QAC7B,UAAU,eAAe,SAAS,YAAY;AAAA,QAC9C,WAAW,eAAe,SAAS;AAAA,MACvC;AAEA,cAAQ,IAAI,mCAAmC,aAAa;AAE5D,UAAI;AACA,cAAM,WAAW,MAAMI,QAAM;AAAA,UACzB;AAAA,UACA;AAAA,YACI,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,QAAQ;AAAA,YACR,IAAI;AAAA,UACR;AAAA,UACA;AAAA,YACI,SAAS;AAAA,cACL,gBAAgB;AAAA,YACpB;AAAA,UACJ;AAAA,QACJ;AAEA,QAAAF,cAAY,mCAAmC;AAAA,UAC3C,YAAY,SAAS;AAAA,UACrB,MAAM,SAAS;AAAA,QACnB,CAAC;AAED,YAAI,SAAS,KAAK,OAAO;AACrB,gBAAM,IAAI,SAAS,mBAAmB,SAAS,KAAK,MAAM,OAAO,EAAE;AAAA,QACvE;AAEA,cAAM,EAAE,OAAO,QAAQ,WAAW,IAAI,SAAS,KAAK;AAGpD,YAAI,gBAAgB,iBAAiB,KAAK;AAAA;AAAA;AAE1C,mBAAW,CAAC,OAAO,GAAG,KAAM,OAAsB,QAAQ,GAAG;AACzD,2BAAiB,GAAG,QAAQ,CAAC,KAAK,IAAI,QAAQ,aAAa;AAAA;AAC3D,cAAI,IAAI,gBAAgB;AACpB,6BAAiB,kBAAkB,IAAI,cAAc;AAAA;AAAA,UACzD;AACA,2BAAiB,gBAAgB,IAAI,gBAAgB,MAAM,GAAG,CAAC,CAAC,MAAM,IAAI,gBAAgB,MAAM,EAAE,CAAC,KAAK,IAAI,YAAY;AAAA;AACxH,2BAAiB,gBAAgB,IAAI,OAAO;AAAA;AAC5C,cAAI,IAAI,UAAU;AACd,6BAAiB,gBAAgB,IAAI,QAAQ;AAAA;AAAA,UACjD;AACA,cAAI,IAAI,UAAU;AACd,6BAAiB,oBAAoB,IAAI,QAAQ;AAAA;AAAA,UACrD;AACA,2BAAiB;AAAA,QACrB;AAEA,YAAI,UAAU;AACV,UAAAA,cAAY,gDAAgD,EAAE,cAAc,CAAC;AAC7E,mBAAS;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,YACT,MAAM;AAAA,cACF;AAAA,cACA;AAAA,cACA;AAAA,YACJ;AAAA,UACJ,CAA0B;AAAA,QAC9B;AAEA,eAAO;AAAA,MAEX,SAAS,OAAO;AACZ,QAAAA,cAAY,sBAAsB,EAAE,MAAM,CAAC;AAC3C,YAAIE,QAAM,aAAa,KAAK,GAAG;AAC3B,gBAAM,IAAI;AAAA,YACN,8BAA8B,MAAM,OAAO;AAAA,YAC3C,MAAM,UAAU;AAAA,UACpB;AAAA,QACJ;AACA,cAAM,IAAI,SAAS,2BAA2B;AAAA,MAClD;AAAA,IAEJ,SAAS,OAAO;AACZ,MAAAF,cAAY,4BAA4B,EAAE,MAAM,CAAC;AAEjD,UAAI,UAAU;AACV,cAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,iBAAS;AAAA,UACL,MAAM,uBAAuB,YAAY;AAAA,UACzC,SAAS;AAAA,QACb,CAA0B;AAAA,MAC9B;AAEA,UAAI,iBAAiB,sBACjB,iBAAiB,mBACjB,iBAAiB,UAAU;AAC3B,cAAM;AAAA,MACV;AAEA,YAAM,IAAI,SAAS,iDAAiD;AAAA,IACxE;AAAA,EACJ;AAGJ;;;AhBxSA,IAAM,UAAU,IAAI;AAAA,EAChB,MAAM,MAAM,KAAK,6BAA6B;AAAA,EAC9C,SAAS;AAAA,EACT,OAAO;AACT,CAAC,EAAE,MAAM;AAEX,IAAM,UAAU;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AAGA,IAAM,aAAa,UAAU,EAAE;AAI/B,IAAI,YAAY;AAEZ,UAAQ,IAAI;AAAA,EAAK,MAAM,KAAK,8PAA4C,CAAC,EAAE;AAC3E,UAAQ,IAAI,MAAM,KAAK,QAAG,IAAI,MAAM,OAAO,KAAK,oCAAoC,IAAI,MAAM,KAAK,SAAI,CAAC;AACxG,UAAQ,IAAI,MAAM,KAAK,8PAA4C,CAAC;AACpE,UAAQ,IAAI,MAAM,KAAK,QAAG,IAAI,MAAM,MAAM,qCAAqC,IAAI,MAAM,KAAK,QAAG,CAAC;AAClG,UAAQ,IAAI,MAAM,KAAK,QAAG,IAAI,MAAM,MAAM,0CAA0C,IAAI,MAAM,KAAK,QAAG,CAAC;AACvG,UAAQ,IAAI,MAAM,KAAK,8PAA4C,CAAC;AAGpE,UAAQ,QAAQ,MAAM,MAAM,uCAAuC,CAAC;AAGpE,QAAM,cAAc,IAAI,MAAM;AAAA,IAC5B,MAAM;AAAA,MACJ,MAAM,KAAK,QAAQ;AAAA,MACnB,MAAM,KAAK,GAAG;AAAA,MACd,MAAM,KAAK,GAAG;AAAA,MACd,MAAM,KAAK,GAAG;AAAA,MACd,MAAM,KAAK,SAAS;AAAA,IACtB;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC;AAAA,MACP,QAAQ,CAAC,MAAM;AAAA,IACjB;AAAA,EACF,CAAC;AAGD,aAAW,UAAU,SAAS;AAC1B,gBAAY,KAAK;AAAA,MACb,MAAM,MAAM,OAAO,IAAI;AAAA,MACvB,OAAO,OAAO,YAAY,aAAa,MAAM,MAAM,QAAG,IAAI,MAAM,IAAI,QAAG;AAAA,MACvE,OAAO,OAAO,aAAa,aAAa,MAAM,MAAM,QAAG,IAAI,MAAM,IAAI,QAAG;AAAA,MACxE,OAAO,UAAU,SAAS,IAAI,MAAM,MAAM,QAAG,IAAI,MAAM,IAAI,QAAG;AAAA,MAC9D,MAAM,KAAK,OAAO,SAAS,KAAK,IAAI,KAAK,MAAM;AAAA,IACnD,CAAC;AAAA,EACL;AAGA,UAAQ,IAAI;AAAA,EAAK,YAAY,SAAS,CAAC,EAAE;AAGzC,QAAM,cAAc,IAAI,MAAM;AAAA,IAC5B,OAAO;AAAA,MACL,QAAQ,CAAC,MAAM;AAAA,IACjB;AAAA,EACF,CAAC;AAED,cAAY;AAAA,IACV,CAAC,MAAM,KAAK,eAAe,CAAC;AAAA,IAC5B,CAAC,MAAM,MAAM,YAAY,IAAI,MAAM,OAAO,aAAa,CAAC;AAAA,IACxD,CAAC,MAAM,MAAM,YAAY,IAAI,MAAM,MAAM,QAAQ,OAAO,SAAS,CAAC,CAAC;AAAA,IACnE,CAAC,MAAM,MAAM,YAAY,IAAI,MAAM,MAAM,gBAAgB,CAAC;AAAA,EAC5D;AAEA,UAAQ,IAAI;AAAA,EAAK,YAAY,SAAS,CAAC;AAAA,CAAI;AAC7C,OAAO;AAEL,UAAQ,KAAK;AACf;AAEA,IAAM,aAAqB;AAAA,EACzB,MAAM;AAAA,EACN,aAAa;AAAA,EACb;AAAA,EACA,YAAY,CAAC;AACf;AAGF,IAAO,gBAAQ;","names":["config","elizaLogger","elizaLogger","config","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios","elizaLogger","axios","config","GRANULAR_LOG","logGranular","elizaLogger","axios"]}